<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a .hrc hierarchy from a correspondence table. 
Ecrit une hiérarchie .hrc à partir d'une table de correspondance."><title>Creates a hrc file from correspondence table — write_hrc2 • rtauargus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a hrc file from correspondence table — write_hrc2"><meta property="og:description" content="Creates a .hrc hierarchy from a correspondence table. 
Ecrit une hiérarchie .hrc à partir d'une table de correspondance."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rtauargus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/rtauargus.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>tabular-wise</h6>
    <a class="dropdown-item" href="../articles/rtauargus_fr.html">Tau-Argus depuis R - données tabulées</a>
    <a class="dropdown-item" href="../articles/protect_multi_tables.html">Protect several linked tables at once</a>
    <a class="dropdown-item" href="../articles/protect_multi_tables_fr.html">Protéger des tableaux liés</a>
    <a class="dropdown-item" href="../articles/options_safety_rules.html">Safety rules and Suppress Options</a>
    <a class="dropdown-item" href="../articles/options_safety_rules_fr.html">Les arguments Safety rules et Suppress</a>
    <a class="dropdown-item" href="../articles/split_tab_fr.html">Comment poser du secret sur des tableaux à 4 ou 5 dimensions avec `rtauargus`?</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>micro-wise</h6>
    <a class="dropdown-item" href="../articles/rtauargus_micro.html">&amp;tau;-Argus from R - microdata version</a>
    <a class="dropdown-item" href="../articles/rtauargus_micro_fr.html">Tau-Argus depuis R - sur microdonnées</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creates a hrc file from correspondence table</h1>
      <small class="dont-index">Source: <a href="https://github.com/inseefrlab/rtauargus/blob/HEAD/R/writehrc.R" class="external-link"><code>R/writehrc.R</code></a></small>
      <div class="d-none name"><code>write_hrc2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a .hrc hierarchy from a correspondence table. <br>
Ecrit une hiérarchie .hrc à partir d'une table de correspondance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">write_hrc2</span><span class="op">(</span></span>
<span>  <span class="va">corr_table</span>,</span>
<span>  file_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rev <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hier_lead_string <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"rtauargus.hierleadstring"</span><span class="op">)</span>,</span>
<span>  adjust_unique_roots <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_char <span class="op">=</span> <span class="st">"ZZZ"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>corr_table</dt>
<dd><p>Data frame. Correspondence table, from most aggregated level to most detailed one
<br>
Table de correspondance, du niveau le plus agrégé au niveau le plus fin</p></dd>


<dt>file_name</dt>
<dd><p>character string. Name for the output file (with .hrc extension or not).
If NULL (default), file_name is set to the same name as the correspondence table
<br>
Nom du fichier en sortie (avec ou sans l'extension .hrc) ; Si NULL (par défaut),
le nom du fichier sera identique au nom de la table de correspondance.</p></dd>


<dt>sort_table</dt>
<dd><p>boolean. If TRUE, table will be sorted beforehand.
(default to FALSE)<br>
Si TRUE, la table sera triée avant traitement. (défaut à FALSE)</p></dd>


<dt>rev</dt>
<dd><p>boolean. If TRUE, column order is reversed.<br>
Si TRUE, inverse l'ordre des colonnes.</p></dd>


<dt>hier_lead_string</dt>
<dd><p>character. (Single) character indicating the
hierarchy depth in the .hrc file. By default, the value is set to the current
value mentionned in the package options (i.e. "@" at the package startup).
<br>
Caractère unique repérant le niveau de profondeur dans le .hrc</p></dd>


<dt>adjust_unique_roots</dt>
<dd><p>boolean. If TRUE (default) will add fictional roots to the
correspondence table, by doing so there will be no unique roots in the hrc file.
With tabular function, unique roots are not handled by Tau-Argus. <br>
Si TRUE la fonction va ajouter des feuilles fictives au fichier .hrc afin
qu'il n'y ait plus de feuilles uniques. Les feuilles uniques peuvent générer
des problèmes dans l'exécution de Tau-Argus</p></dd>


<dt>add_char</dt>
<dd><p>character If adjust_unique_roots is TRUE add_char is the string that will
be used to create fictional roots, be sure that this string does not create
duplicates.The string will be paste at the beginning of a unique root
default = "ZZZ" <br>
character Si adjust_unique_roots est TRUE add_char est l'élément qui sera
utilisé afin de créer des feuilles fictives, il faut être sur que cela
ne crée pas de doublons dans la hiérarchie.La chaine de caractère sera
ajouté au début d'une feuille unique. Par defaut :"ZZZ"</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Invisible. Path to the written .hrc file.
<br></p>


<p>Chemin vers le fichier .hrc.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Creates a .hrc hierarchy file adapted to tau-Argus from a
correspondence table fully describing it. By default, lines are sorted
alphabetically so as to regroup identical levels.</p>
<p>Ecrit un fichier de hiérarchie .hrc lisible par tau-Argus à
partir d'une table de corrrespondance la décrivant complètement. Par défaut,
les lignes du tableau seront triées afin de regrouper les niveaux de
hiérarchie identiques.</p>
    </div>
    <div class="section level2">
    <h2 id="details-about-correspondence-table-amp-hrc">Details about correspondence table &amp; .hrc<a class="anchor" aria-label="anchor" href="#details-about-correspondence-table-amp-hrc"></a></h2>
    

<p>Hierarchy files read by tau-Argus are expected to follow a strict pattern.
This function mimicks some of its rigidities.
<br></p>
<p>1 <strong>Ideal case</strong></p>
<p>Here is how a correspondence table is assumed to look like:</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td>planet</td><td>gasgiant</td><td>star</td></tr><tr><td>bluestar</td><td>star</td><td>whitedwarf</td></tr><tr><td>star</td><td>reddwarf</td><td>other</td></tr><tr><td>blackhole</td><td>other</td><td>pulsar</td></tr></table><p>Columns must be ordered from most aggregated to most detailed.
If they are in reverse order, you may want to use rev = TRUE. In any other
case, please reorder columns by hand.<br></p>
<p>Hierarchy must be well-nested : fine levels must systematically be nested
into unique higher levels. If this is not compatible with your situation,
you will have to split it in different hierarchies and insure common cells
are correctly protected (seek further documentation or help if needed).
<br></p>
<p>2 <strong>Dealing with NAs</strong></p>
<p>The write_hrc2 function has to be preferably used without any NAs in your
correspondence table. In presence of NAs, the <strong>sort</strong> argument
has to be to FALSE. Indeed, NAs would be sorted together and, thus,
be separated from their expected place in the hierarchy.</p>
<p>Below, we introduce two common cases where correspondence tables could have
NAs. The first one is supported by the function, the second one is not.</p>
<p>Please be careful when dealing with NAs and check thoroughly the
resulting .hrc file, or consider filling in NAs beforehand.</p>
<p>2.1 <em>Sparse hierarchies</em> <br>
Hierarchy is sparse when NAs are inserted instead of repeating under a given
level.</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td></td><td>gasgiant</td><td>star</td></tr><tr><td>bluestar</td><td></td><td>whitedwarf</td></tr><tr><td></td><td>reddwarf</td><td>other</td></tr><tr><td>blackhole</td><td></td><td>pulsar</td></tr></table><p>Such cases still issue a warning for the presence of NAs, but do not pose
any problem, if <strong>sort=FALSE</strong> is set.</p>
<p>2.2 <em>Non-uniform hierarchies</em><br>
Hierarchies with non-uniform depth happen when some levels are not detailed
to the  lowest detail, creating NAs.</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td>planet</td><td>gasgiant</td><td>star</td></tr><tr><td></td><td>other</td><td>blackhole</td></tr><tr><td>other</td><td>pulsar</td><td></td></tr></table><p>Processing such a file will generate an error with the following messages:
<em>Missing values on the last column of the correspondence table is not allowed.
If relevant, you could fill in with the value of the previous column</em></p>
    </div>
    <div class="section level2">
    <h2 id="d-tails-sur-les-tables-de-correspondance-et-le-hrc">Détails sur les tables de correspondance et le .hrc<a class="anchor" aria-label="anchor" href="#d-tails-sur-les-tables-de-correspondance-et-le-hrc"></a></h2>
    

<p>Tau-Argus attend des fichiers écrits avec précision. Certaines de ses
rigidités sont reproduites par cette fonction.
<br></p>
<p>1 <strong>Cas idéal</strong></p>
<p>Voici l'aspect général que devrait avoir une table de correspondance :</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td>planet</td><td>gasgiant</td><td>star</td></tr><tr><td>bluestar</td><td>star</td><td>whitedwarf</td></tr><tr><td>star</td><td>reddwarf</td><td>other</td></tr><tr><td>blackhole</td><td>other</td><td>pulsar</td></tr></table><p>Les colonnes doivent être ordonnées du niveau le plus agrégé au plus fin.
Si elles sont en sens inverse, l'option rev = TRUE permet de les mettre en
ordre. Dans toute autre situation, vous devrez d'abord les ordonner à la
main.
<br></p>
<p>La hiérarchie doit être bien emboîtée : un niveau fin doit systématiquement
correspondre à un unique niveau agrégé. Si cette exigence n'est pas remplie,
il faudra créer plusieurs hiérarchies et faire en sorte que les cellules
communes soient correctement protégées (au besoin, consultez la documentation
ou chercher de l'aide).
<br></p>
<p>2 <strong>Valeurs manquantes</strong></p>
<p>La fonction write_hrc2 doit être utilisée de préférence sans aucun NA dans votre
table de correspondance. En présence de NAs, l'argument <strong>sort</strong>
doit être à FALSE. En effet, les NAs seraient triés ensemble et, donc,
être séparées de leur place attendue dans la hiérarchie.</p>
<p>Ci-dessous, nous présentons deux cas courants où les tables de correspondance
pourraient avoir NAs. Le premier cas est pris en charge par la fonction,
le second ne l'est pas.</p>
<p>Soyez prudent lorsque vous manipulez des NA et vérifiez soigneusement
le fichier .hrc résultant ou envisagez de remplir les NAs à l'avance.</p>
<p>2.1 <em>Hiérarchies creuses</em> <br>
Une hiérarchie est creuse si des NAs sont insérées au lieu de répéter un
niveau donné verticalement.</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td></td><td>gasgiant</td><td>star</td></tr><tr><td>bluestar</td><td></td><td>whitedwarf</td></tr><tr><td></td><td>reddwarf</td><td>other</td></tr><tr><td>blackhole</td><td></td><td>pulsar</td></tr></table><p>De tels cas émettent toujours un avertissement du fait de la présence de NA,
mais ne posent aucun problème, si on utilise <strong>sort=FALSE</strong>.</p>
<p>2.2 <em>Hiérarchies non-uniformes</em><br>
Les hiérarchies à profondeur non-uniforme correspondent aux cas où certains
niveaux ne sont pas détaillés jusqu'au bout, la fin de certaines lignes étant
manquante.</p>
<table class="table table"><tr><td><strong>type</strong></td><td><strong>details</strong></td><td><code>-------</code></td></tr><tr><td><code>------</code></td><td>planet</td><td>telluric</td></tr><tr><td>planet</td><td>gasgiant</td><td>star</td></tr><tr><td></td><td>other</td><td>blackhole</td></tr><tr><td>other</td><td>pulsar</td><td></td></tr></table><p>Le traitement d'un tel fichier générera une erreur avec les messages suivants :
<em>Missing values on the last column of the correspondence table is not allowed.
If relevant, you could fill in with the value of the previous column</em></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># 1. Standard example. Table will be written on your working directory.</span></span></span>
<span class="r-in"><span><span class="co"># Exemple standard. La table sera écrite dans votre répertoire de travail.</span></span></span>
<span class="r-in"><span><span class="va">astral</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"planet"</span>, <span class="st">"planet"</span>, <span class="st">"star"</span>, <span class="st">"star"</span>, <span class="st">"star"</span>, <span class="st">"other"</span>, <span class="st">"other"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  details   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"telluric"</span>, <span class="st">"gasgiant"</span>, <span class="st">"bluestar"</span>, <span class="st">"whitedwarf"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"reddwarf"</span>, <span class="st">"blackhole"</span>, <span class="st">"pulsar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Note that line order was changed ('other' comes before 'planet'), to no</span></span></span>
<span class="r-in"><span><span class="co"># consequence whatsoever for Tau-Argus.</span></span></span>
<span class="r-in"><span><span class="co"># Remarque : l'ordre des lignes a été modifié ('other' arrive avant 'planet'),</span></span></span>
<span class="r-in"><span><span class="co"># ce qui n'a aucune conséquence pour Tau-Argus.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wrong column order:</span></span></span>
<span class="r-in"><span><span class="co"># Mauvais ordonnancement des colonnes :</span></span></span>
<span class="r-in"><span><span class="va">astral_inv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"telluric"</span>, <span class="st">"gasgiant"</span>, <span class="st">"bluestar"</span>, <span class="st">"whitedwarf"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"reddwarf"</span>, <span class="st">"blackhole"</span>, <span class="st">"pulsar"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"planet"</span>, <span class="st">"planet"</span>, <span class="st">"star"</span>, <span class="st">"star"</span>, <span class="st">"star"</span>, <span class="st">"other"</span>, <span class="st">"other"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral_inv</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There are duplicates in the expectedly most detailed level</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     (last column). Please be sure columns are rightfully ordered.</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Because of the inverted order, everything is written backwards : planet is a</span></span></span>
<span class="r-in"><span><span class="co"># subtype of gasgiant, etc.</span></span></span>
<span class="r-in"><span><span class="co"># À cause de l'inversion des colonnes, tout est écrit à l'envers : planet est</span></span></span>
<span class="r-in"><span><span class="co"># devenu une sous-catégorie de gasgiant, par exemple.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Correction :</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral_inv</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2.1 Sparse case</span></span></span>
<span class="r-in"><span><span class="co"># Cas creux</span></span></span>
<span class="r-in"><span><span class="va">astral_sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"planet"</span>, <span class="cn">NA</span>, <span class="st">"star"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"other"</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  details   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"telluric"</span>, <span class="st">"gasgiant"</span>, <span class="st">"bluestar"</span>, <span class="st">"whitedwarf"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"reddwarf"</span>, <span class="st">"blackhole"</span>, <span class="st">"pulsar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># NAs in general are risky, but, in this case, the function works well.</span></span></span>
<span class="r-in"><span><span class="co"># Les valeurs manquantes causent un risque, mais, dans ce genre de cas,</span></span></span>
<span class="r-in"><span><span class="co"># la fonction a le comportement attendu.</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral_sparse</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Missing values in correspondence table will be filled in (see documentation).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>             If unintended, this can cause errors when using the .hrc file with tau-Argus.</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2.2 Non-uniform depth</span></span></span>
<span class="r-in"><span><span class="co"># Hiérarchie non-uniforme</span></span></span>
<span class="r-in"><span><span class="va">astral_nu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"planet"</span>, <span class="st">"planet"</span>, <span class="st">"star"</span>, <span class="st">"other"</span>, <span class="st">"other"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  details  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"telluric"</span>, <span class="st">"gasgiant"</span>, <span class="cn">NA</span>, <span class="st">"blackhole"</span>, <span class="st">"pulsar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The following code will generate an error</span></span></span>
<span class="r-in"><span><span class="co"># (see section Details about correspondence table &amp; .hrc)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral_nu</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">#To fix the issue, you have to fill in the NAs beforehand.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">astral_nu_fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"planet"</span>, <span class="st">"planet"</span>, <span class="st">"star"</span>, <span class="st">"other"</span>, <span class="st">"other"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  details  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"telluric"</span>, <span class="st">"gasgiant"</span>, <span class="st">"star"</span>, <span class="st">"blackhole"</span>, <span class="st">"pulsar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The following code will work</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">write_hrc2</span><span class="op">(</span><span class="va">astral_nu_fill</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Pierre-Yves Berrard, Julien Jamme, Nathanaël Rastout, Jeanne Pointet, Félix Beroud, André-Raymond Socard, Wistan Pomel.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

