<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tau-Argus depuis R - sur microdonnées • rtauargus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tau-Argus depuis R - sur microdonnées">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtauargus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Dernière version publiée">1.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/rtauargus.html">Prise en main</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>tabular-wise</h6></li>
    <li><a class="dropdown-item" href="../articles/rtauargus_fr.html">Tau-Argus depuis R - données tabulées</a></li>
    <li><a class="dropdown-item" href="../articles/protect_multi_tables.html">Protect several linked tables at once</a></li>
    <li><a class="dropdown-item" href="../articles/protect_multi_tables_fr.html">Protéger des tableaux liés</a></li>
    <li><a class="dropdown-item" href="../articles/options_safety_rules.html">Safety rules and Suppress Options</a></li>
    <li><a class="dropdown-item" href="../articles/options_safety_rules_fr.html">Les arguments Safety rules et Suppress</a></li>
    <li><a class="dropdown-item" href="../articles/split_tab_fr.html">Comment poser du secret sur des tableaux à 4 ou 5 dimensions avec `rtauargus`?</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>auto-analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/auto_metadata.html">Automatic analysis of metadata</a></li>
    <li><a class="dropdown-item" href="../articles/auto_metadata_fr.html">Analyse automatique des métadonnées</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>micro-wise</h6></li>
    <li><a class="dropdown-item" href="../articles/rtauargus_micro.html">&amp;tau;-Argus from R - microdata version</a></li>
    <li><a class="dropdown-item" href="../articles/rtauargus_micro_fr.html">Tau-Argus depuis R - sur microdonnées</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changements</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Rechercher sur le site" placeholder="Rechercher" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tau-Argus depuis R - sur microdonnées</h1>
            <h3 data-toc-skip class="subtitle"><h2>
<br><img src="R_logo_small.png" alt="logo R"><img src="TauBall2_small.png" alt="logo τ-Argus"><br>Package {rtauargus}<br>
</h2></h3>
            
      
      <small class="dont-index">Source : <a href="https://github.com/inseefrlab/rtauargus/blob/master/vignettes/rtauargus_micro_fr.Rmd" class="external-link"><code>vignettes/rtauargus_micro_fr.Rmd</code></a></small>
      <div class="d-none name"><code>rtauargus_micro_fr.Rmd</code></div>
    </div>

    
    
<!--
  NE JAMAIS MODIFIER DIRECTEMENT `rtauargus.Rmd`
  MODIFIER `rtauargus.Rmd.orig` ET EXECUTER `precompilation.R`
  Voir : https://ropensci.org/technotes/2019/12/08/precompute-vignettes
-->
<!-- ####################################################################### -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="présentation-du-package">Présentation du package<a class="anchor" aria-label="anchor" href="#pr%C3%A9sentation-du-package"></a>
</h3>
<p>Le package <em>rtauargus</em> offre une interface <strong>R</strong>
pour <strong>τ-Argus</strong>. Il permet de :</p>
<ul>
<li>créer les inputs (fichiers asc et rda) à partir de données au format
R ;</li>
<li>générer la séquence d’instructions à exécuter en mode batch (fichier
arb) ;</li>
<li>lancer un batch τ-Argus en ligne de commande ;</li>
<li>récupérer les résultats dans R.</li>
</ul>
<p>Ces différentes opérations peuvent être exécutées en une seule fois,
mais aussi de manière modulaire. Elles permettent d’intégrer les tâches
réalisées par τ-Argus dans une chaîne de traitement écrite en R.</p>
<p>La syntaxe de certains arguments colle au plus près à la syntaxe
<em>batch</em> de τ-Argus. Ceci permet d’utiliser un grand nombre de
fonctionnalités sans multiplier les arguments des fonctions. Le package
pourra en outre s’adapter plus facilement à d’éventuelles modifications
du logiciel (nouvelles méthodes disponibles, options supplémentaires…).
Les règles de syntaxe pour l’écriture de batch figurent dans le manuel
de référence de τ-Argus.</p>
<blockquote>
<p><em>Le package a été développé sur la base des versions open source
de τ -Argus (versions 4.1 et supérieures), en particulier la dernière
version disponible lors du développement (4.2.3).</em></p>
<p><em><strong>Il n’est pas compatible avec la version
3.5.</strong></em></p>
<p>Pour l’instant, <strong>seules les microdonnées sont
acceptées</strong> en entrée (pas les données déjà tabulées).</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="objectif-de-ce-document">Objectif de ce document<a class="anchor" aria-label="anchor" href="#objectif-de-ce-document"></a>
</h3>
<p>Ce document vise à montrer comment les fonctionnalités principales du
package peuvent être articulées, à partir d’exemples relativement
simples. Une documentation détaillée d’une fonction (liste exhaustive
des arguments, aspects techniques…) est disponible via la rubrique
d’aide dédiée.</p>
<p>Pour la démonstration qui va suivre, un jeu de microdonnées fictif
sera utilisé :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">donnees</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    V1    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>    V2    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"Z"</span><span class="op">)</span>,</span>
<span>    V3    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1"</span>, <span class="st">"T2"</span>, <span class="st">"T1"</span>, <span class="st">"S_"</span>, <span class="st">"T1"</span>, <span class="st">"T1"</span>, <span class="st">"T1"</span>, <span class="st">"S_"</span><span class="op">)</span>,</span>
<span>    VAL   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">25</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    POIDS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2.71</span>, <span class="fl">4.2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">donnees</span></span>
<span><span class="co">#&gt;   V1 V2 V3 VAL POIDS</span></span>
<span><span class="co">#&gt; 1  A  Y T1 100  1.00</span></span>
<span><span class="co">#&gt; 2  A  Z T2   0  2.71</span></span>
<span><span class="co">#&gt; 3  A  Y T1   7  4.20</span></span>
<span><span class="co">#&gt; 4  A  Z S_  25  1.00</span></span>
<span><span class="co">#&gt; 5  B  Y T1   0  1.00</span></span>
<span><span class="co">#&gt; 6  B  Z T1   4  2.71</span></span>
<span><span class="co">#&gt; 7  B  Y T1   0  4.20</span></span>
<span><span class="co">#&gt; 8  C  Z S_   5  1.00</span></span></code></pre></div>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Les installations suivantes sont à réaliser avant la première
utilisation (et plus par la suite).</p>
<div class="section level3">
<h3 id="τ-argus">τ-Argus<a class="anchor" aria-label="anchor" href="#%CF%84-argus"></a>
</h3>
<p>Les fonctions de <em>rtauargus</em> appelant τ-Argus nécessitent que
ce logiciel soit accessible depuis le poste de travail. Le
téléchargement de τ-Argus se fait sur la <a href="https://research.cbs.nl/casc/tau.htm" class="external-link">page dédiée</a> du site de
l’office néerlandais de statistiques.</p>
<p>Cependant, toutes les fonctions n’exécutent pas τ-Argus (création des
microdonnées…). Ne pas l’avoir sur son poste n’est donc pas
bloquant.</p>
</div>
<div class="section level3">
<h3 id="dépendances">Dépendances<a class="anchor" aria-label="anchor" href="#d%C3%A9pendances"></a>
</h3>
<p>Pour fonctionner, <em>rtauargus</em> dépend d’autres packages R.
Ceux-ci sont à installer au préalable (entre parenthèses les versions
minimales requises).</p>
<pre><code>• purrr (&gt;= 0.2)
• dplyr (&gt;= 0.7)
• tidyr
• data.table
• gdata,
• stringr
• rlang
• zoo
• sdcHierarchies
• igraph
• lifecycle</code></pre>
</div>
<div class="section level3">
<h3 id="package">Package<a class="anchor" aria-label="anchor" href="#package"></a>
</h3>
<p>Le package <em>rtauargus</em> est prêt à être installé.</p>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
<div class="section level2">
<h2 id="prise-en-main-rapide">Prise en main rapide<a class="anchor" aria-label="anchor" href="#prise-en-main-rapide"></a>
</h2>
<p>Cette partie explique comment effectuer une configuration minimale du
package et comment appliquer le secret statistique en une seule
instruction.</p>
<div class="section level3">
<h3 id="emplacement-de-τ-argus">Emplacement de τ-Argus<a class="anchor" aria-label="anchor" href="#emplacement-de-%CF%84-argus"></a>
</h3>
<p>Au chargement du package, la console affiche quelques informations
:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://inseefrlab.github.io/rtauargus">rtauargus</a></span><span class="op">)</span></span></code></pre></div>
<p>En particulier, un emplacement plausible pour le logiciel τ-Argus est
prédéfini. Il est possible de le changer pour toute la durée de la
session R. Un message indique que cet emplacement est inconnu, on le
modifie donc :</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">loc_tauargus</span> <span class="op">&lt;-</span> <span class="st">"Y:/Logiciels/TauArgus/TauArgus4.2.3/TauArgus.exe"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rtauargus.tauargus_exe <span class="op">=</span> <span class="va">loc_tauargus</span><span class="op">)</span></span></code></pre></div>
<p>Ce petit réglage effectué, le package est prêt à être utilisé.</p>
<blockquote>
<p><em>Pour une configuration plus personnalisée, consulter la section
<a href="#options-du-package">options du package</a>.</em></p>
</blockquote>
</div>
<div class="section level3">
<h3 id="fonction-rtauargus">Fonction <code>rtauargus</code><a class="anchor" aria-label="anchor" href="#fonction-rtauargus"></a>
</h3>
<p>La fonction éponyme <code>rtauargus</code> effectue un traitement et
récupère les résultats immédiatement dans R.</p>
<p>S’abstrayant totalement des rouages internes de τ-Argus, elle permet
de réaliser l’ensemble du traitement en une seule instruction
(concrètement, tous les fichiers intermédiaires sont créés dans un
répertoire temporaire qui est effacé à la fin de la session R).</p>
<p><code>rtauargus</code> prend comme arguments obligatoires :</p>
<ul>
<li>un data.frame contenant les microdonnées ;</li>
<li>une liste de 1 à 10 tabulations composées de variables du data.frame
(une seule dans l’exemple ci-après) ;</li>
<li>la (les) règle(s) à appliquer pour le secret primaire ;</li>
<li>la (les) méthode(s) pour la suppression des cases en secret
secondaire.</li>
</ul>
<p>Les deux derniers arguments utilisent la syntaxe batch τ-Argus.</p>
<div class="section level4">
<h4 id="exemple-minimaliste">Exemple minimaliste<a class="anchor" aria-label="anchor" href="#exemple-minimaliste"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rtauargus-package.html">rtauargus</a></span><span class="op">(</span></span>
<span>  microdata        <span class="op">=</span> <span class="va">donnees</span>,</span>
<span>  explanatory_vars <span class="op">=</span> <span class="st">"V1"</span>,</span>
<span>  safety_rules     <span class="op">=</span> <span class="st">"FREQ(3,10)"</span>,</span>
<span>  suppress         <span class="op">=</span> <span class="st">"GH(1,100)"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in rtauargus(microdata = donnees, explanatory_vars = "V1", safety_rules = "FREQ(3,10)", : impossible de trouver la fonction "rtauargus"</span></span></code></pre></div>
<p>Comme aucune variable de réponse n’est renseignée, un comptage est
effectué (“&lt;freq&gt;”).</p>
</div>
<div class="section level4">
<h4 id="exemple-élaboré">Exemple élaboré<a class="anchor" aria-label="anchor" href="#exemple-%C3%A9labor%C3%A9"></a>
</h4>
<p>D’autres paramètres sont disponibles. On peut par exemple compléter
l’instruction précédente avec :</p>
<ul>
<li>une deuxième tabulation (les deux tableaux seront traités
indépendamment) ;</li>
<li>un paramètre permettant de ne pas afficher le statut du secret pour
le premier tableau ;</li>
<li>un paramètre permettant de masquer le journal de τ-Argus dans la
console.</li>
</ul>
<p>De plus, les tables produites ne sont plus simplement envoyées dans
la console. Elles sont stockées dans un objet <code>secret1</code> (une
liste constituée de deux data.frame), que l’on pourra continuer de
manipuler.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">secret1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/rtauargus-package.html">rtauargus</a></span><span class="op">(</span></span>
<span>    microdata          <span class="op">=</span> <span class="va">donnees</span>,</span>
<span>    explanatory_vars   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="st">"V2"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 2 tabulations (V1, V1xV2)</span></span>
<span>    safety_rules       <span class="op">=</span> <span class="st">"FREQ(3,10)"</span>,</span>
<span>    suppress           <span class="op">=</span> <span class="st">"GH(.,100)"</span>,  <span class="co"># . remplace le numéro de tabulation</span></span>
<span>    output_options     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"AS+"</span><span class="op">)</span>, <span class="co"># pas de statut pour le 1er tableau</span></span>
<span>    show_batch_console <span class="op">=</span> <span class="cn">FALSE</span>         <span class="co"># pour masquer le journal</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Error in rtauargus(microdata = donnees, explanatory_vars = list("V1", : impossible de trouver la fonction "rtauargus"</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">secret1</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<blockquote>
<p><em>Note sur l’écriture <code>suppress = "GH(.,100)"</code>
:</em></p>
<p><em>Le premier paramètre attendu par τ-Argus est le numéro de la
tabulation. Ici, on souhaite appliquer la même méthode de suppression du
secret secondaire à chaque tableau. S’il n’y a qu’une méthode et
plusieurs tabulations, les caractères entre la parenthèse et la première
virgule sont ignorés et les numéros des tabulations calculés
automatiquement.</em></p>
</blockquote>
<p>L’aide de la fonction ne décrit que les 4 arguments obligatoires. Les
arguments optionnels disponibles sont documentés dans les fonctions
élémentaires la constituant (<code>micro_asc_rda</code>,
<code>micro_arb</code>, <code>run_arb</code>, <code>import</code>). Tout
argument de ces fonctions peut être utilisé dans <code>rtauargus</code>.
Leur fonctionnement est détaillé dans la section qui suit.</p>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
</div>
<div class="section level2">
<h2 id="décomposition-du-processus">Décomposition du processus<a class="anchor" aria-label="anchor" href="#d%C3%A9composition-du-processus"></a>
</h2>
<p>Utiliser la fonction <code>rtauargus</code> est pratique en terme de
lignes de code à saisir. Toutefois, cette manière de procéder peut
s’avérer assez lourde si les tableaux à secrétiser ont en commun un
certain nombre de caractéristiques.</p>
<p>On voudrait par exemple ne générer que les fichiers asc et rda, puis
lancer plusieurs batch utilisant ces mêmes fichiers. Ce n’était pas le
cas dans les exemples vus jusqu’à maintenant, où tous les fichiers
intermédiaires étaient systématiquement regénérés, même si leur contenu
était identique.</p>
<p>Pour cela, on peut utiliser les fonctions appelées successivement par
la fonction <code>rtauargus</code>, à savoir :</p>
<blockquote>
<p><strong><a href="#fonction-micro_asc_rda">micro_asc_rda()</a>   →  
<a href="#fonction-micro_arb">micro_arb()</a>   →   <a href="#fonction-run_arb">run_arb()</a>   →   <a href="#fonction-import">import()</a></strong></p>
</blockquote>
<div class="section level3">
<h3 id="fonction-micro_asc_rda">[1] Fonction <code>micro_asc_rda</code><a class="anchor" aria-label="anchor" href="#fonction-micro_asc_rda"></a>
</h3>
<p>τ-Argus n’accepte en entrée que des microdonnées sous une forme bien
spécifique :</p>
<ul>
<li>un fichier texte aux colonnes de longueur fixe, sans en-tête de
colonnes (fichier .asc) ;</li>
<li>un fichier de description des variables (fichier .rda).</li>
</ul>
<p>La fonction <code>micro_asc_rda</code> produit ces deux fichiers à
partir d’un data.frame.</p>
<div class="section level4">
<h4 id="exemple-minimaliste-1">Exemple minimaliste<a class="anchor" aria-label="anchor" href="#exemple-minimaliste-1"></a>
</h4>
<p>On ne renseigne ici que les données et le nom du fichier asc. Comme
le nom du fichier de métadonnées n’est pas spécifié, il prend le même
nom que le fichier asc, mais avec l’extension .rda.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/micro_asc_rda.html">micro_asc_rda</a></span><span class="op">(</span><span class="va">donnees</span>, asc_filename <span class="op">=</span> <span class="st">"Z:/donnees.asc"</span><span class="op">)</span></span></code></pre></div>
<p>Contenu des fichiers créés :</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="st">"Z:/donnees.asc"</span>, <span class="st">"Z:/donnees.rda"</span>, pager <span class="op">=</span> <span class="st">"internal"</span><span class="op">)</span></span></code></pre></div>
<pre><code> donnees.asc            donnees.rda        
                                           
 A Y T1 100 1.00        V1 1 1             
 A Z T2   0 2.71          &lt;RECODEABLE&gt;     
 A Y T1   7 4.20          &lt;TOTCODE&gt; "Total"
 A Z S_  25 1.00        V2 3 1             
 B Y T1   0 1.00          &lt;RECODEABLE&gt;     
 B Z T1   4 2.71          &lt;TOTCODE&gt; "Total"
 B Y T1   0 4.20        V3 5 2             
 C Z S_   5 1.00          &lt;RECODEABLE&gt;     
                          &lt;TOTCODE&gt; "Total"
                        VAL 8 3            
                          &lt;NUMERIC&gt;        
                          &lt;DECIMALS&gt; 0     
                        POIDS 12 4         
                          &lt;NUMERIC&gt;        
                          &lt;DECIMALS&gt; 2     </code></pre>
<blockquote>
<p><em>Les fonctions du package acceptent les emplacements de fichiers
sous forme de chemin relatif. Par exemple,
<code>asc_filename = "donnees.asc"</code> avec un répertoire de travail
sur <code>Z:/</code> est équivalent à
<code>asc_filename = "Z:/donnees.asc"</code>.</em></p>
</blockquote>
</div>
<div class="section level4">
<h4 id="exemple-élaboré-1">Exemple élaboré<a class="anchor" aria-label="anchor" href="#exemple-%C3%A9labor%C3%A9-1"></a>
</h4>
<p>On ajoute à l’exemple précédent :</p>
<ul>
<li>une variable de poids ;</li>
<li>les informations sur une variable hiérarchique ;</li>
<li>des codes différenciés pour les totaux ;</li>
<li>un nombre minimal de décimales à écrire pour les variables
numériques.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/micro_asc_rda.html">micro_asc_rda</a></span><span class="op">(</span></span>
<span>  microdata    <span class="op">=</span> <span class="va">donnees</span>,</span>
<span>  asc_filename <span class="op">=</span> <span class="st">"Z:/donnees.asc"</span>,</span>
<span>  weight_var   <span class="op">=</span> <span class="st">"POIDS"</span>,</span>
<span>  hrc          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>V3 <span class="op">=</span> <span class="st">"1 1"</span><span class="op">)</span>,</span>
<span>  totcode      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ensemble"</span>, V2 <span class="op">=</span> <span class="st">"TOTAL"</span><span class="op">)</span>,</span>
<span>  decimals     <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Contenu des fichiers créés :</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="st">"Z:/donnees.asc"</span>, <span class="st">"Z:/donnees.rda"</span>, pager <span class="op">=</span> <span class="st">"internal"</span><span class="op">)</span></span></code></pre></div>
<pre><code> donnees.asc              donnees.rda           
                                                
 A Y T1 100.0 1.00        V1 1 1                
 A Z T2   0.0 2.71          &lt;RECODEABLE&gt;        
 A Y T1   7.0 4.20          &lt;TOTCODE&gt; "Ensemble"
 A Z S_  25.0 1.00        V2 3 1                
 B Y T1   0.0 1.00          &lt;RECODEABLE&gt;        
 B Z T1   4.0 2.71          &lt;TOTCODE&gt; "TOTAL"   
 B Y T1   0.0 4.20        V3 5 2                
 C Z S_   5.0 1.00          &lt;RECODEABLE&gt;        
                            &lt;TOTCODE&gt; "Ensemble"
                            &lt;HIERARCHICAL&gt;      
                            &lt;HIERLEVELS&gt; 1 1    
                          VAL 8 5               
                            &lt;NUMERIC&gt;           
                            &lt;DECIMALS&gt; 1        
                          POIDS 14 4            
                            &lt;WEIGHT&gt;            
                            &lt;DECIMALS&gt; 2        </code></pre>
</div>
<div class="section level4">
<h4 id="fichiers-temporaires">Fichiers temporaires<a class="anchor" aria-label="anchor" href="#fichiers-temporaires"></a>
</h4>
<p>Pour tout paramètre <code>*_filename</code> non renseigné, les
fichiers générés sont placés dans un dossier temporaire. Il est possible
de récupérer l’emplacement et le nom (aléatoire) de ces fichiers dans la
valeur de retour de la fonction.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">noms_asc_rda</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/micro_asc_rda.html">micro_asc_rda</a></span><span class="op">(</span><span class="va">donnees</span><span class="op">)</span></span>
<span><span class="va">noms_asc_rda</span></span>
<span><span class="co">#&gt; $asc_filename</span></span>
<span><span class="co">#&gt; [1] "C:\\Users\\KQCFFL\\AppData\\Local\\Temp\\Rtmpm05wlj\\RTA_13aa860265f1f.asc"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rda_filename</span></span>
<span><span class="co">#&gt; [1] "C:\\Users\\KQCFFL\\AppData\\Local\\Temp\\Rtmpm05wlj\\RTA_13aa860265f1f.rda"</span></span></code></pre></div>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
</div>
</div>
<div class="section level3">
<h3 id="fonction-micro_arb">[2] Fonction <code>micro_arb</code><a class="anchor" aria-label="anchor" href="#fonction-micro_arb"></a>
</h3>
<p>Cette fonction construit un fichier batch exécutable par τ-Argus.
Elle prend comme arguments obligatoires :</p>
<ul>
<li>nom du fichier asc ;</li>
<li>tabulation(s) (jusqu’à 10, sous forme de liste) ;</li>
<li>règle(s) de secret primaire ;</li>
<li>méthode(s) de gestion du secret secondaire.</li>
</ul>
<p>La fonction a également besoin du nom du fichier rda. S’il n’est pas
spécifié, le même nom que le fichier asc avec l’extension .rda est
utilisé.</p>
<blockquote>
<p><em>La fonction ne vérifie pas l’existence des répertoires ou
fichiers spécifiés. Elle ne fait que générer un fichier d’instructions,
sans en évaluer la validité.</em></p>
</blockquote>
<div class="section level4">
<h4 id="exemple-minimaliste-2">Exemple minimaliste<a class="anchor" aria-label="anchor" href="#exemple-minimaliste-2"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/micro_arb.html">micro_arb</a></span><span class="op">(</span></span>
<span>  arb_filename     <span class="op">=</span> <span class="st">"Z:/donnees.arb"</span>,</span>
<span>  asc_filename     <span class="op">=</span> <span class="st">"Z:/donnees.asc"</span>,</span>
<span>  explanatory_vars <span class="op">=</span> <span class="st">"V1"</span>,</span>
<span>  safety_rules     <span class="op">=</span> <span class="st">"FREQ(3,10)"</span>,</span>
<span>  suppress         <span class="op">=</span> <span class="st">"GH(.,100)"</span>,</span>
<span>  output_names     <span class="op">=</span> <span class="st">"Z:/resultats/secretV1.csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Contenu du fichier créé :</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="st">"Z:/donnees.arb"</span>, pager <span class="op">=</span> <span class="st">"internal"</span><span class="op">)</span></span></code></pre></div>
<pre><code>// Batch generated by package *rtauargus*
// (2025-02-17 12:15:37 CET)
&lt;OPENMICRODATA&gt; "Z:\donnees.asc"
&lt;OPENMETADATA&gt; "Z:\donnees.rda"
&lt;SPECIFYTABLE&gt; "V1"|"&lt;freq&gt;"||
&lt;SAFETYRULE&gt; FREQ(3,10)
&lt;READMICRODATA&gt;
&lt;SUPPRESS&gt; GH(1,100)
&lt;WRITETABLE&gt; (1,4,AS+SE+,"Z:\resultats\secretV1.csv")</code></pre>
</div>
<div class="section level4">
<h4 id="exemple-élaboré-2">Exemple élaboré<a class="anchor" aria-label="anchor" href="#exemple-%C3%A9labor%C3%A9-2"></a>
</h4>
<p>On complète l’exemple précédent avec :</p>
<ul>
<li>une deuxième tabulation ;</li>
<li>une variable de réponse à sommer (au lieu d’un comptage) ;</li>
<li>l’ajout d’une dominance à 85 % pour le deuxième tableau ;</li>
<li>une pondération au premier tableau (mais pas au deuxième) ;</li>
<li>la suppression des croisements vides dans les deux tableaux
(SE+).</li>
</ul>
<p>Passer une seule valeur pour une option applique le même traitement à
chaque tabulation. Pour des options différenciées, il faut
impérativement passer un vecteur contenant autant de valeurs que de
tabulations.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/micro_arb.html">micro_arb</a></span><span class="op">(</span></span>
<span>  arb_filename     <span class="op">=</span> <span class="st">"Z:/donnees.arb"</span>,</span>
<span>  asc_filename     <span class="op">=</span> <span class="st">"Z:/donnees.asc"</span>,</span>
<span>  explanatory_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V2"</span>, <span class="st">"V3"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  response_var     <span class="op">=</span> <span class="st">"VAL"</span>,</span>
<span>  safety_rules     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FREQ(3,10)"</span>, <span class="st">"FREQ(3,10)|NK(1,85)"</span><span class="op">)</span>,</span>
<span>  weighted         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  suppress         <span class="op">=</span> <span class="st">"GH(.,100)"</span>,</span>
<span>  output_options   <span class="op">=</span> <span class="st">"AS+SE+"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="st">"Z:/donnees.arb"</span>, pager <span class="op">=</span> <span class="st">"internal"</span><span class="op">)</span></span></code></pre></div>
<pre><code>// Batch generated by package *rtauargus*
// (2025-02-17 12:15:37 CET)
&lt;OPENMICRODATA&gt; "Z:\donnees.asc"
&lt;OPENMETADATA&gt; "Z:\donnees.rda"
&lt;SPECIFYTABLE&gt; "V1"|"VAL"||
&lt;SAFETYRULE&gt; FREQ(3,10)|Wgt(1)
&lt;SPECIFYTABLE&gt; "V2""V3"|"VAL"||
&lt;SAFETYRULE&gt; FREQ(3,10)|NK(1,85)
&lt;READMICRODATA&gt;
&lt;SUPPRESS&gt; GH(1,100)
&lt;WRITETABLE&gt; (1,4,AS+SE+,"C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa84f670af.sbs")
&lt;SUPPRESS&gt; GH(2,100)
&lt;WRITETABLE&gt; (2,4,AS+SE+,"C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa836d5f26.sbs")</code></pre>
</div>
<div class="section level4">
<h4 id="fichiers-temporaires-1">Fichiers temporaires<a class="anchor" aria-label="anchor" href="#fichiers-temporaires-1"></a>
</h4>
<p>Dans l’exemple précédent, les noms des fichiers en sortie
(<code>output_names</code>) n’étaient pas précisés, ce qui a conduit à
la génération de noms de fichiers temporaires. Préciser le nom du
fichier .arb n’est pas obligatoire non plus. Ces informations sont
récupérables dans la valeur de retour de la fonction.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">infos_arb</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/micro_arb.html">micro_arb</a></span><span class="op">(</span></span>
<span>    asc_filename     <span class="op">=</span> <span class="st">"Z:/donnees.asc"</span>,</span>
<span>    explanatory_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V2"</span>, <span class="st">"V3"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    safety_rules     <span class="op">=</span> <span class="st">"FREQ(3,10)"</span>,</span>
<span>    suppress         <span class="op">=</span> <span class="st">"GH(.,100)"</span>,</span>
<span>    output_type      <span class="op">=</span> <span class="st">"4"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">infos_arb</span></span>
<span><span class="co">#&gt; $arb_filename</span></span>
<span><span class="co">#&gt; [1] "C:\\Users\\KQCFFL\\AppData\\Local\\Temp\\Rtmpm05wlj\\RTA_13aa810e14665.arb"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $output_names</span></span>
<span><span class="co">#&gt; [1] "C:\\Users\\KQCFFL\\AppData\\Local\\Temp\\Rtmpm05wlj\\RTA_13aa83f037ada.sbs"</span></span>
<span><span class="co">#&gt; [2] "C:\\Users\\KQCFFL\\AppData\\Local\\Temp\\Rtmpm05wlj\\RTA_13aa842b273bd.sbs"</span></span></code></pre></div>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
</div>
</div>
<div class="section level3">
<h3 id="fonction-run_arb">[3] Fonction <code>run_arb</code><a class="anchor" aria-label="anchor" href="#fonction-run_arb"></a>
</h3>
<p>Maintenant que les instructions ont été générées dans un fichier
.arb, on peut le soumettre à τ-Argus en mode batch. On récupère la liste
des tableaux secrétisés :</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">secret2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_arb.html">run_arb</a></span><span class="op">(</span><span class="st">"Z:/donnees.arb"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Start of batch procedure; file: Z:\donnees.arb</span></span>
<span><span class="co">#&gt; &lt;OPENMICRODATA&gt; "Z:\donnees.asc"</span></span>
<span><span class="co">#&gt; &lt;OPENMETADATA&gt; "Z:\donnees.rda"</span></span>
<span><span class="co">#&gt; &lt;SPECIFYTABLE&gt; "V1"|"VAL"||</span></span>
<span><span class="co">#&gt; &lt;SAFETYRULE&gt; FREQ(3,10)|Wgt(1)</span></span>
<span><span class="co">#&gt; &lt;SPECIFYTABLE&gt; "V2""V3"|"VAL"||</span></span>
<span><span class="co">#&gt; &lt;SAFETYRULE&gt; FREQ(3,10)|NK(1,85)</span></span>
<span><span class="co">#&gt; &lt;READMICRODATA&gt;</span></span>
<span><span class="co">#&gt; Start explore file: Z:\donnees.asc</span></span>
<span><span class="co">#&gt; Start computing tables</span></span>
<span><span class="co">#&gt; Table: V1 | VAL has been specified</span></span>
<span><span class="co">#&gt; Table: V2 x V3 | VAL has been specified</span></span>
<span><span class="co">#&gt; Tables have been computed</span></span>
<span><span class="co">#&gt; Micro data file read; processing time 0 seconds</span></span>
<span><span class="co">#&gt; Tables from microdata have been read</span></span>
<span><span class="co">#&gt; &lt;SUPPRESS&gt; GH(1,100)</span></span>
<span><span class="co">#&gt; Start of the hypercube protection for table V1 | VAL</span></span>
<span><span class="co">#&gt; End of hypercube protection. Time used 1 seconds</span></span>
<span><span class="co">#&gt;                    Number of suppressions: 1</span></span>
<span><span class="co">#&gt; The hypercube procedure has been applied</span></span>
<span><span class="co">#&gt;                    1 cells have been suppressed</span></span>
<span><span class="co">#&gt; &lt;WRITETABLE&gt; (1,4,AS+SE+,"C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa84f670af.sbs")</span></span>
<span><span class="co">#&gt; Table: V1 | VAL has been written</span></span>
<span><span class="co">#&gt;                    Output file name: C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa84f670af.sbs</span></span>
<span><span class="co">#&gt; &lt;SUPPRESS&gt; GH(2,100)</span></span>
<span><span class="co">#&gt; Start of the hypercube protection for table V2 x V3 | VAL</span></span>
<span><span class="co">#&gt; End of hypercube protection. Time used 1 seconds</span></span>
<span><span class="co">#&gt;                    Number of suppressions: 2</span></span>
<span><span class="co">#&gt; The hypercube procedure has been applied</span></span>
<span><span class="co">#&gt;                    2 cells have been suppressed</span></span>
<span><span class="co">#&gt; &lt;WRITETABLE&gt; (2,4,AS+SE+,"C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa836d5f26.sbs")</span></span>
<span><span class="co">#&gt; Table: V2 x V3 | VAL has been written</span></span>
<span><span class="co">#&gt;                    Output file name: C:\Users\KQCFFL\AppData\Local\Temp\Rtmpm05wlj\RTA_13aa836d5f26.sbs</span></span>
<span><span class="co">#&gt; End of TauArgus run</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">secret2</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p><code>run_arb</code> est la seule fonction du package qui exécute
τ-Argus. Elle nécessite donc que le logiciel soit accessible depuis le
poste de travail.</p>
<p>Seul l’argument <code>arb_filename</code> est obligatoire, car toutes
les informations nécessaires sont présentes dans le fichier .arb. Des
paramètres optionnels sont également disponibles :</p>
<ul>
<li>
<code>missing_dir</code> : action à effectuer si un dossier où sera
écrit le résultat n’existe pas (déclencher une erreur ou le créer)</li>
<li>
<code>tauargus_exe</code> : pour changer l’exécutable (surcharge
l’option <code>rtauargus.tauargus_exe</code> le temps de la fonction)
;</li>
<li>
<code>logbook</code> : emplacement et nom du fichier contenant le
journal d’erreurs ;</li>
<li>
<code>show_batch_on_console</code> : pour afficher ou non le
déroulement du batch dans la console ;</li>
<li>
<code>import</code> : si désactivé, la fonction ne fait que générer
les fichiers texte sans les importer dans R (voir section suivante pour
plus de détails).</li>
</ul>
<p>Si les tabulations ont reçu un nom dans <code>micro_arb</code>, ces
noms sont utilisés pour la liste de data.frames en sortie de
<code>run_arb</code> (pas de noms définis dans l’exemple ci-dessus).</p>
<blockquote>
<p><em>Des vérifications sont effectuées avant le lancement effectif de
τ-Argus : existence du logiciel sur le poste, des fichiers asc et rda,
des dossiers où écrire les résultats, des variables à utiliser
(croisements, variable de réponse, …) dans les métadonnées (fichier
rda).</em></p>
</blockquote>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
</div>
<div class="section level3">
<h3 id="fonction-import">[4] Fonction <code>import</code><a class="anchor" aria-label="anchor" href="#fonction-import"></a>
</h3>
<p>Cette fonction importe les résultats produits par τ-Argus (fichiers
texte) à partir des informations contenues dans un fichier arb. Elle
nécessite donc que le batch se soit déroulé sans erreur et que les
fichiers soient toujours présents.</p>
<p>Pour cette dernière raison, la fonction <code>import</code> est
typiquement appelée depuis <code>run_arb</code> en paramétrant
<code>import = TRUE</code>. Elle est aussi utilisable de manière
indépendante (par exemple si on ne souhaite pas relancer un batch qui a
mis beaucoup de temps à s’exécuter).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">secret2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"Z:/donnees.arb"</span><span class="op">)</span></span>
<span><span class="co">#  produit le même résultat que run_arb("Z:/donnees.arb", import = TRUE)</span></span></code></pre></div>
<div class="section level4">
<h4 id="formats-acceptés">Formats acceptés<a class="anchor" aria-label="anchor" href="#formats-accept%C3%A9s"></a>
</h4>
<p>Il n’est possible (à l’heure actuelle) que d’importer les résultats
de type :</p>
<ul>
<li>
<code>"2"</code> : csv for pivot-table</li>
<li>
<code>"4"</code> : sbs output format</li>
</ul>
<p>Si l’import est impossible pour une tabulation donnée, un data.frame
vide est retourné (avec un message d’avertissement).</p>
</div>
<div class="section level4">
<h4 id="attributs-des-tabulations">Attributs des tabulations<a class="anchor" aria-label="anchor" href="#attributs-des-tabulations"></a>
</h4>
<p>À chaque data.frame de la liste est associé un ensemble d’attributs,
des métadonnées gardant une trace des spécifications passées à
τ-Argus.</p>
<p>Par exemple, pour <code>secret2[[2]]</code> (le deuxième tableau de
<code>secret2</code>), on y retrouve les paramètres que l’on a transmis
à la fonction (les autres correspondent à des valeurs par défaut du
package).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">secret2</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  NULL</span></span></code></pre></div>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
</div>
<div class="section level2">
<h2 id="options-du-package">Options du package<a class="anchor" aria-label="anchor" href="#options-du-package"></a>
</h2>
<p>Les options du package définissent les comportements par défaut des
fonctions.</p>
<p>Ces options sont utilisées si un argument obligatoire d’une fonction
n’est pas renseigné. Elles permettent de ne pas répéter systématiquement
le même paramètre à chaque appel d’une fonction. Le nom de l’option est
le nom de l’argument d’une fonction précédé de <code>rtauargus.</code>
:</p>
<blockquote>
<p>Par exemple, <code>rtauargus.decimals</code> sera la valeur utilisée
si l’argument <code>decimals</code> de la fonction
<code>micro_asc_rda</code> n’est pas renseigné par l’utilisateur.</p>
</blockquote>
<p>Au chargement, le package attribue une valeur par défaut à toutes les
options de rtauargus qui ne sont pas encore déclarées. Les options déjà
définies par l’utilisateur gardent leurs valeurs.</p>
<p>Les options disponibles ainsi que leurs valeurs par défaut sont
listées ci-dessous :</p>
<table class="table">
<colgroup>
<col width="30%">
<col width="38%">
<col width="10%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Option</th>
<th align="left">Valeur par défaut</th>
<th align="left">Type</th>
<th align="right">Fonction concernée</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">rtauargus.decimals</td>
<td align="left">0</td>
<td align="left">integer</td>
<td align="right">tab_rda</td>
</tr>
<tr class="even">
<td align="left">rtauargus.decimals</td>
<td align="left">0</td>
<td align="left">integer</td>
<td align="right">micro_asc_rda</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.totcode</td>
<td align="left">“Total”</td>
<td align="left">character</td>
<td align="right">tab_rda</td>
</tr>
<tr class="even">
<td align="left">rtauargus.totcode</td>
<td align="left">“Total”</td>
<td align="left">character</td>
<td align="right">micro_asc_rda</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.missing</td>
<td align="left">“”</td>
<td align="left">character</td>
<td align="right">micro_asc_rda</td>
</tr>
<tr class="even">
<td align="left">rtauargus.hierleadstring</td>
<td align="left">“@”</td>
<td align="left">character</td>
<td align="right">micro_asc_rda</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.hierleadstring</td>
<td align="left">“@”</td>
<td align="left">character</td>
<td align="right">tab_rda</td>
</tr>
<tr class="even">
<td align="left">rtauargus.separator</td>
<td align="left">“,”</td>
<td align="left">character</td>
<td align="right">tab_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.separator</td>
<td align="left">“,”</td>
<td align="left">character</td>
<td align="right">tab_rda</td>
</tr>
<tr class="even">
<td align="left">rtauargus.response_var</td>
<td align="left">“&lt;freq&gt;”</td>
<td align="left">character</td>
<td align="right">micro_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.weighted</td>
<td align="left">FALSE</td>
<td align="left">logical</td>
<td align="right">micro_arb</td>
</tr>
<tr class="even">
<td align="left">rtauargus.linked</td>
<td align="left">FALSE</td>
<td align="left">logical</td>
<td align="right">micro_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.output_type</td>
<td align="left">“4”</td>
<td align="left">character</td>
<td align="right">tab_arb</td>
</tr>
<tr class="even">
<td align="left">rtauargus.output_type</td>
<td align="left">“4”</td>
<td align="left">character</td>
<td align="right">micro_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.output_options</td>
<td align="left">“”</td>
<td align="left">character</td>
<td align="right">micro_arb</td>
</tr>
<tr class="even">
<td align="left">rtauargus.output_options</td>
<td align="left">“”</td>
<td align="left">character</td>
<td align="right">tab_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.missing_dir</td>
<td align="left">“stop”</td>
<td align="left">character</td>
<td align="right">run_arb</td>
</tr>
<tr class="even">
<td align="left">rtauargus.tauargus_exe</td>
<td align="left">“Y:/Logiciels/TauArgus/TauArgus.exe”</td>
<td align="left">character</td>
<td align="right">run_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.show_batch_console</td>
<td align="left">FALSE</td>
<td align="left">logical</td>
<td align="right">run_arb</td>
</tr>
<tr class="even">
<td align="left">rtauargus.import</td>
<td align="left">FALSE</td>
<td align="left">logical</td>
<td align="right">run_arb</td>
</tr>
<tr class="odd">
<td align="left">rtauargus.is_tabular</td>
<td align="left">TRUE</td>
<td align="left">logical</td>
<td align="right">run_arb</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="affichage">Affichage<a class="anchor" aria-label="anchor" href="#affichage"></a>
</h3>
<p>Pour afficher les options définies pour la session en cours :</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rtauargus_options.html">rtauargus_options</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $rtauargus.decimals</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.hierleadstring</span></span>
<span><span class="co">#&gt; [1] "@"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.import</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.is_tabular</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.linked</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.missing</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.missing_dir</span></span>
<span><span class="co">#&gt; [1] "stop"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.output_options</span></span>
<span><span class="co">#&gt; [1] "AS+SE+"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.output_type</span></span>
<span><span class="co">#&gt; [1] "4"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.response_var</span></span>
<span><span class="co">#&gt; [1] "&lt;freq&gt;"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.separator</span></span>
<span><span class="co">#&gt; [1] ","</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.show_batch_console</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.tauargus_exe</span></span>
<span><span class="co">#&gt; [1] "Y:/Logiciels/TauArgus/TauArgus4.2.3/TauArgus.exe"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.totcode</span></span>
<span><span class="co">#&gt; [1] "Total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rtauargus.weighted</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Les valeurs sont identiques aux valeurs par défaut, hormis
l’emplacement de τ-Argus, qui a été préalablement modifié. Elles
apparaissent dans l’ordre alphabétique.</p>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
</div>
<div class="section level3">
<h3 id="modification-réinitialisation">Modification, réinitialisation<a class="anchor" aria-label="anchor" href="#modification-r%C3%A9initialisation"></a>
</h3>
<p>Pour modifier une ou plusieurs options, utiliser la syntaxe suivante
(la même que celle employée pour modifier l’emplacement de τ-Argus)
:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  rtauargus.show_batch_console <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rtauargus.output_options     <span class="op">=</span> <span class="st">"AS+SE+"</span>,</span>
<span>  rtauargus.output_type        <span class="op">=</span> <span class="st">"4"</span>,</span>
<span>  rtauargus.response_var       <span class="op">=</span> <span class="st">"VAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/rtauargus_options.html">rtauargus_options</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 15</span></span>
<span><span class="co">#&gt;  $ rtauargus.decimals          : int 0</span></span>
<span><span class="co">#&gt;  $ rtauargus.hierleadstring    : chr "@"</span></span>
<span><span class="co">#&gt;  $ rtauargus.import            : logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.is_tabular        : logi TRUE</span></span>
<span><span class="co">#&gt;  $ rtauargus.linked            : logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.missing           : chr ""</span></span>
<span><span class="co">#&gt;  $ rtauargus.missing_dir       : chr "stop"</span></span>
<span><span class="co">#&gt;  $ rtauargus.output_options    : chr "AS+SE+"</span></span>
<span><span class="co">#&gt;  $ rtauargus.output_type       : chr "4"</span></span>
<span><span class="co">#&gt;  $ rtauargus.response_var      : chr "VAL"</span></span>
<span><span class="co">#&gt;  $ rtauargus.separator         : chr ","</span></span>
<span><span class="co">#&gt;  $ rtauargus.show_batch_console: logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.tauargus_exe      : chr "Y:/Logiciels/TauArgus/TauArgus4.2.3/TauArgus.exe"</span></span>
<span><span class="co">#&gt;  $ rtauargus.totcode           : chr "Total"</span></span>
<span><span class="co">#&gt;  $ rtauargus.weighted          : logi FALSE</span></span></code></pre></div>
<p>Pour réinitialiser certaines options :</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rtauargus_options.html">reset_rtauargus_options</a></span><span class="op">(</span><span class="st">"rtauargus.response_var"</span>, <span class="st">"rtauargus.output_type"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Il est possible d'omettre le préfixe 'rtauargus.'</span></span>
<span><span class="co"># L'instruction suivante est équivalente :</span></span>
<span><span class="fu"><a href="../reference/rtauargus_options.html">reset_rtauargus_options</a></span><span class="op">(</span><span class="st">"response_var"</span>, <span class="st">"output_type"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/rtauargus_options.html">rtauargus_options</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 15</span></span>
<span><span class="co">#&gt;  $ rtauargus.decimals          : int 0</span></span>
<span><span class="co">#&gt;  $ rtauargus.hierleadstring    : chr "@"</span></span>
<span><span class="co">#&gt;  $ rtauargus.import            : logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.is_tabular        : logi TRUE</span></span>
<span><span class="co">#&gt;  $ rtauargus.linked            : logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.missing           : chr ""</span></span>
<span><span class="co">#&gt;  $ rtauargus.missing_dir       : chr "stop"</span></span>
<span><span class="co">#&gt;  $ rtauargus.output_options    : chr "AS+SE+"</span></span>
<span><span class="co">#&gt;  $ rtauargus.output_type       : chr "4"</span></span>
<span><span class="co">#&gt;  $ rtauargus.response_var      : chr "&lt;freq&gt;"</span></span>
<span><span class="co">#&gt;  $ rtauargus.separator         : chr ","</span></span>
<span><span class="co">#&gt;  $ rtauargus.show_batch_console: logi FALSE</span></span>
<span><span class="co">#&gt;  $ rtauargus.tauargus_exe      : chr "Y:/Logiciels/TauArgus/TauArgus4.2.3/TauArgus.exe"</span></span>
<span><span class="co">#&gt;  $ rtauargus.totcode           : chr "Total"</span></span>
<span><span class="co">#&gt;  $ rtauargus.weighted          : logi FALSE</span></span></code></pre></div>
<p>Pour remettre toutes les valeurs par défaut (y compris le chemin vers
τ-Argus modifié en début de démonstration), ne spécifier aucun argument
:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rtauargus_options.html">reset_rtauargus_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
</div>
<div class="section level3">
<h3 id="portée-locale-ou-globale">Portée locale ou globale<a class="anchor" aria-label="anchor" href="#port%C3%A9e-locale-ou-globale"></a>
</h3>
<p>Comme toute fonction R, le paramétrage s’effectue en spécifiant
chacun des arguments au moment de l’appel de la fonction (portée
locale).</p>
<p>Le système d’options du package permet par les instructions
<code>options(rtauargus.&lt;option&gt; = &lt;valeur&gt;)</code> de
définir des options de manière plus globale. Selon l’endroit où sont
écrites ces instructions, la configuration perdurera plus ou moins
longtemps :</p>
<ul>
<li>dans le script, pour un effet sur la session en cours uniquement
;</li>
<li>dans un fichier de configuration utilisateur (.Rprofile…), pour
permettre à un utilisateur de garder en mémoire ses préréglages d’une
session sur l’autre.</li>
</ul>
<p><em>Le deuxième façon de procéder est <strong>à déconseiller si la
chaîne de traitement se veut reproductible</strong>. En effet, un script
identique exécuté sur deux machines différentes pourrait produire deux
résultats différents.</em></p>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
<div class="section level2">
<h2 id="autres-informations">Autres informations<a class="anchor" aria-label="anchor" href="#autres-informations"></a>
</h2>
<div class="section level4">
<h4 id="autres-fonctionnalités">Autres fonctionnalités<a class="anchor" aria-label="anchor" href="#autres-fonctionnalit%C3%A9s"></a>
</h4>
<p>Certaines fonctionnalités du package ne sont pas évoquées dans ce
document de prise en main :</p>
<ul>
<li>gestion de tableaux liés (argument <code>linked</code> dans
<code>micro_arb</code>)</li>
<li>création de variables hiérarchiques à partir de microdonnées
(fonction <code>write_hrc</code>).</li>
<li>prise en compte de fichier apriori (argument <code>apriori</code>
dans <code>micro_arb</code>)</li>
<li>utilisation de la fonction <code>rtauargus</code> à partir de
microdonnées déjà sous forme de fichier texte (et non de
data.frame)</li>
<li>lancement optimisé d’un grand nombre de croisements ayant les mêmes
paramètres (règles de secret primaire, méthode de secret secondaire, …)
: fonction <code>rtauargus_plus</code>
</li>
</ul>
<p>Consulter l’aide de ces fonctions pour plus d’informations.</p>
</div>
<div class="section level4">
<h4 id="idées-pour-la-suite">Idées pour la suite<a class="anchor" aria-label="anchor" href="#id%C3%A9es-pour-la-suite"></a>
</h4>
<ul>
<li>implémenter paramètres <code>request</code>…</li>
<li>prendre en compte des données tabulées en entrée</li>
<li>…</li>
</ul>
</div>
<div class="section level4">
<h4 id="signaler-un-problème-suggérer-une-amélioration">Signaler un problème, suggérer une amélioration<a class="anchor" aria-label="anchor" href="#signaler-un-probl%C3%A8me-sugg%C3%A9rer-une-am%C3%A9lioration"></a>
</h4>
<p>Le package est en cours de construction. Toutes les fonctionnalités
de τ-Argus n’ont pas été intégrées (la finalité n’est pas de les
intégrer toutes, seulement les plus fréquemment utilisées).</p>
<p>Pour tout retour ou signalement d’erreur, utiliser de préférence <a href="https://gitlab.insee.fr/outilsconfidentialite/rtauargus/-/issues" class="external-link">ce
lien</a> (cliquer sur <strong>“New issue”</strong>). Nécessite d’être
connecté au gitlab-Insee.</p>
</div>
<div class="section level4">
<h4 id="à-propos-de-cette-vignette">À propos de cette vignette<a class="anchor" aria-label="anchor" href="#%C3%A0-propos-de-cette-vignette"></a>
</h4>
<ul>
<li>Auteur :
<strong><a href="mailto:pierre-yves.berrard@insee.fr">Pierre-Yves
Berrard</a></strong>
</li>
<li>Dernière mise à jour : <strong>17/02/2025</strong>
</li>
<li>Version de rtauargus utilisée : <strong>1.2.999</strong>
</li>
<li>Version de τ-Argus utilisée : <strong>TauArgus 4.2.3</strong>
</li>
<li>Version de R utilisée : <strong>4.3.3</strong>
</li>
</ul>
<p style="text-align: right">
<a href="#TOC" title="Retour sommaire">sommaire ↑</a>
</p>
<!-- ####################################################################### -->
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table des matières"><h2>Sur cette page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Développé par Pierre-Yves Berrard, Julien Jamme, Nathanaël Rastout, Jeanne Pointet, Félix Beroud, André-Raymond Socard, Wistan Pomel, Clara Baudry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
