[{"path":"https://inseefrlab.github.io/rtauargus/articles/options_safety_rules.html","id":"primary-suppression-with-the-safety_rules-options","dir":"Articles","previous_headings":"","what":"Primary suppression with the safety_rules options :","title":"Safety rules and Suppress Options","text":"tab_rtauargus() function, primary suppression options set safety_rules argument. default parameter set “MAN(10)”, useful using apriori Interval protection level 10%. want set rules primary suppression syntax : - “rule_number1|rule_number2|rule_number3|…” least one safety rule required. allowed rules according τ-Argus manual. common rules : n size coalition k max percentage n minimum frequency allowed p Frequency Safety Range maximum accuracy estimation percent n (optional, default = 1), size coalition p margin use percent ones : request rule REQ(p1,p2,SafetyMargin) zero safety range parameter ZERO(p) b = 0 (default) cells missing code unsafe safety rules ares violated b = 1 cells always safe rules can appear multiple times (P,NK) can get details τ-Argus manual sections : - 4.4.4 Specify Tables - 5.7 Batch command file","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/options_safety_rules.html","id":"the-suppress-options","dir":"Articles","previous_headings":"","what":"The suppress options :","title":"Safety rules and Suppress Options","text":"default options “MOD(1,5,1,0,0)” fits business statistics. following parameters, number table needed, case always 1. possible options : MOD(TabNo, MaxTimePerSubtable, SingleSingle,SingleMultiple, MinFreq) last 3 parameters singleton options. parameter can 0 1. 1 option activated. OPT(TabNo, MaxComputingTime) GH(TabNo, priori Bounds Percentage, ModelSize,ApplySingleton) ModelSize 0 = normal, 1 indicates large model. ApplySingleton: 1 = yes,0 = ; default = yes table frequency-information, . NET(TabNo) RND(TabNo, RoundingBase, Steps, MaxTime, Partitions, StopRule) Steps: number steps allowed, normally 0 (default) MaxTime: Max computing time (10 = default) Partitions: 0, 1 (0 = partitioning (default), 1 = apply partitioning procedure) StopRule: 1 = Rapid , 2 = First feasible solution, 3 = optimal solution (3 =default) CTA(TabNo) details available τ-Argus manual, especially section 4.2.3","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/options_safety_rules.html","id":"about-this-vignette","dir":"Articles","previous_headings":"The suppress options :","what":"About this vignette","title":"Safety rules and Suppress Options","text":"Authors: Nathanael Rastout Last update: 02/10/2022 Version rtauargus used: 1.1.0 Version τ-Argus used : TauArgus 4.2.2b1 R version used : 4.1.3 summary ↑","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Protect several linked tables at once","text":"rtauargus package, now possible protect set linked tables . function called tab_multi_manager(). simple algorithm implemented handle protection doesn’t depend number tables. Hence, function can theoretically deal indefinite number tables. course, practical use limited power computer. However, confident ability function treat cases. interested cases encounter function can’t handle. link two () tables describes common cells tables, cells appearing . function can handle types links tables: margin links: two tables share one () variables; links response variables, exists equations connecting variables; non-nested hierarchies: explanatory variable broken two () non-nested hierarchies. Actually, last two types can handled first one. challenge user properly define set tables. set correctly defined, function takes care everything. Firstly, vignette present function works, secondly, parameters quickly described. third part, examples developped show use diverse situations.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"how-does-tab_multi_manager-handle-the-protection-of-a-set-of-linked-tables","dir":"Articles","previous_headings":"Introduction","what":"How does tab_multi_manager() handle the protection of a set of linked tables ?","title":"Protect several linked tables at once","text":"Firstly, function merges tables set. resulted table, boolean variables added mention whether cell owns given table set. , many boolean variables number tables set. merged table effective way quickly detect common cells. Thus, report suppressions automatic. protection process sequential: one table time. handle protection tables forget one table links, implemented algorithm works two lists: todolist: list tables protected; remainlist: list original tables haven’t yet protected . lists initialized follows: todolist = first table original list; remainlist = original tables except firs one. , algorithm proceeds shown following figure:","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"results","dir":"Articles","previous_headings":"Introduction","what":"Results","title":"Protect several linked tables at once","text":"function returns original list tables variables boolean variables (TRUE cell masked, otherwise FALSE), describing steps suppression process. step takes previous one account last variable indicates final step. Final status cell easily computable last variable primary suppression status previously computed user. addition, function writes τ-Argus files created process. end, last process table available chosen directory. journal (journal.txt) also provided. describes step suppression process: table protected, many new common cells hit secondary suppression. end process, provides description common cells hit, mentionning iteration hit.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"some-details-on-the-parameters-of-tab_multi_manager","dir":"Articles","previous_headings":"Introduction","what":"Some details on the parameters of tab_multi_manager()","title":"Protect several linked tables at once","text":"dir_name directory contain created files, non existing created. example : dir_names = “my_directory” hrc named vector specifying path hrc file hierarchical variables. example : c(ACTIVITY = “path_to_file/act.hrc”, NUTS = “path_to_file/nuts.hrc” ) alt_hrc named list useful dealing non-nested hierachies. names list names tables alternative (non-nested general) hierarchies. example : T1 T2 one explanatory variable, called ACTIVITY, response variable, ACTIVITY variable hierarchy two tables. Let’s assume hierarchies (act1.hrc act2.hrc) nested. case, write two arguments follows: hrc = c(ACTIVITY = “path_to_file/act_1.hrc”): default, hierarchy used. alt_hrc = list(T2 = c(ACTIVITY = “path_to_file/act_2.hrc”)): table T2, alternative hierarchy used. totcode code total explanatory variables. recommanded use totcode variables. example code “Total” variables. syntax allowed : totcode = “Total” Otherwise expected input list specifying totcode explanatory vars. example : totcode = list(ACTIVITY = “Total”, NUTS = “FR”, SIZE =“Ensemble”, CJ = “Total”) Default : “Total” Warning : totals table, computed Tau-Argus, won’t eligible primary suppression. , , advise users provide totals tables. alt_totcode named list alternative total codes. See alt_hrc use. value colname response variable tables, MUST name tables. example : value = “turnover” Default : “value” frequency colname frequency variable tables, MUST name tables. example : freq = “frequency” Default : “freq” secret_var name boolean variable specifying primary suppression tables, MUST name tables. example : secret_var = “is_secret_prim” Default : “is_secret_prim” suppress algorithm required perform secondary suppression, explained safety_rules vignette. Modular approach chosen, first iteration given table, singleton, multi-singleton minFreq options deactivated. default : MOD(1,5,1,0,0)\" ip_start manual safety range first iteration table (integer) default : 10 ip_end manual safety range second iteration table (integer) default : 0 num_iter_max parameter ensure fact function stop. default : 10","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"some-examples","dir":"Articles","previous_headings":"","what":"Some examples","title":"Protect several linked tables at once","text":"Let’s specify location TauArgus.exe file computer:","code":"options(   rtauargus.tauargus_exe =     \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"about-protecting-4-linked-tables-at-once","dir":"Articles","previous_headings":"Some examples","what":"About protecting 4 linked tables at once","title":"Protect several linked tables at once","text":"following example going protect set 4 linked tables sharing response variable, turnover.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"preparing-the-data","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Preparing the data","title":"Protect several linked tables at once","text":"ACTIVITY X SIZE named turnover_act_size ACTIVITY X CJ named turnover_act_cj NUTS X SIZE named turnover_nuts_size NUTS X CJ turnover_nuts_cj first step create list containing four tables, advised give name tables. easier tack secondary suppression.","code":"data(\"turnover_act_size\") data(\"turnover_act_cj\") data (\"turnover_nuts_size\") data(\"turnover_nuts_cj\") str(turnover_act_size) #> tibble [414 x 5] (S3: tbl_df/tbl/data.frame) #>  $ ACTIVITY: chr [1:414] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>  $ SIZE    : chr [1:414] \"Total\" \"Total\" \"Total\" \"Total\" ... #>  $ N_OBS   : int [1:414] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>  $ TOT     : num [1:414] 44475 24827613 8907311 26962063 8584917 ... #>  $ MAX     : num [1:414] 6212 1442029 1065833 3084242 3957364 ... str(turnover_nuts_cj) #> tibble [452 x 5] (S3: tbl_df/tbl/data.frame) #>  $ NUTS : chr [1:452] \"FR10\" \"FR21\" \"FR22\" \"FR23\" ... #>  $ CJ   : chr [1:452] \"Total\" \"Total\" \"Total\" \"Total\" ... #>  $ N_OBS: int [1:452] 38462 6769 4561 5090 8611 7811 5643 10411 8179 5163 ... #>  $ TOT  : num [1:452] 33026385 2947560 1917663 3701935 5089279 ... #>  $ MAX  : num [1:452] 3084242 544763 651848 298134 1165019 ... list_data_4_tabs <- list(   act_size = turnover_act_size,   act_cj = turnover_act_cj,   nuts_size = turnover_nuts_size,   nuts_cj = turnover_nuts_cj ) str(list_data_4_tabs) #> List of 4 #>  $ act_size : tibble [414 x 5] (S3: tbl_df/tbl/data.frame) #>   ..$ ACTIVITY: chr [1:414] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>   ..$ SIZE    : chr [1:414] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS   : int [1:414] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>   ..$ TOT     : num [1:414] 44475 24827613 8907311 26962063 8584917 ... #>   ..$ MAX     : num [1:414] 6212 1442029 1065833 3084242 3957364 ... #>  $ act_cj   : tibble [406 x 5] (S3: tbl_df/tbl/data.frame) #>   ..$ ACTIVITY: chr [1:406] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>   ..$ CJ      : chr [1:406] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS   : int [1:406] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>   ..$ TOT     : num [1:406] 44475 24827613 8907311 26962063 8584917 ... #>   ..$ MAX     : num [1:406] 6212 1442029 1065833 3084242 3957364 ... #>  $ nuts_size: tibble [460 x 5] (S3: tbl_df/tbl/data.frame) #>   ..$ NUTS : chr [1:460] \"FR10\" \"FR21\" \"FR22\" \"FR23\" ... #>   ..$ SIZE : chr [1:460] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS: int [1:460] 38462 6769 4561 5090 8611 7811 5643 10411 8179 5163 ... #>   ..$ TOT  : num [1:460] 33026385 2947560 1917663 3701935 5089279 ... #>   ..$ MAX  : num [1:460] 3084242 544763 651848 298134 1165019 ... #>  $ nuts_cj  : tibble [452 x 5] (S3: tbl_df/tbl/data.frame) #>   ..$ NUTS : chr [1:452] \"FR10\" \"FR21\" \"FR22\" \"FR23\" ... #>   ..$ CJ   : chr [1:452] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS: int [1:452] 38462 6769 4561 5090 8611 7811 5643 10411 8179 5163 ... #>   ..$ TOT  : num [1:452] 33026385 2947560 1917663 3701935 5089279 ... #>   ..$ MAX  : num [1:452] 3084242 544763 651848 298134 1165019 ..."},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"applying-primary-suppression-rules","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Applying primary suppression rules","title":"Protect several linked tables at once","text":"need apply primary suppression table. apply 2 rules : dominance rule NK(1,85) frequency rule threshold set 3. Three variables added table. last one used protection process. two others useful state final status cells.","code":"list_data_4_tabs <- list_data_4_tabs %>%   purrr::map(     function(df){       df %>%         mutate(           is_secret_freq = N_OBS > 0 & N_OBS < 3,           is_secret_dom = ifelse(MAX == 0, FALSE, MAX/TOT>0.85),           is_secret_prim = is_secret_freq | is_secret_dom         )     }   ) str(list_data_4_tabs) #> List of 4 #>  $ act_size : tibble [414 x 8] (S3: tbl_df/tbl/data.frame) #>   ..$ ACTIVITY      : chr [1:414] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>   ..$ SIZE          : chr [1:414] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS         : int [1:414] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>   ..$ TOT           : num [1:414] 44475 24827613 8907311 26962063 8584917 ... #>   ..$ MAX           : num [1:414] 6212 1442029 1065833 3084242 3957364 ... #>   ..$ is_secret_freq: logi [1:414] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_dom : logi [1:414] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_prim: logi [1:414] FALSE FALSE FALSE FALSE FALSE FALSE ... #>  $ act_cj   : tibble [406 x 8] (S3: tbl_df/tbl/data.frame) #>   ..$ ACTIVITY      : chr [1:406] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>   ..$ CJ            : chr [1:406] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS         : int [1:406] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>   ..$ TOT           : num [1:406] 44475 24827613 8907311 26962063 8584917 ... #>   ..$ MAX           : num [1:406] 6212 1442029 1065833 3084242 3957364 ... #>   ..$ is_secret_freq: logi [1:406] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_dom : logi [1:406] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_prim: logi [1:406] FALSE FALSE FALSE FALSE FALSE FALSE ... #>  $ nuts_size: tibble [460 x 8] (S3: tbl_df/tbl/data.frame) #>   ..$ NUTS          : chr [1:460] \"FR10\" \"FR21\" \"FR22\" \"FR23\" ... #>   ..$ SIZE          : chr [1:460] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS         : int [1:460] 38462 6769 4561 5090 8611 7811 5643 10411 8179 5163 ... #>   ..$ TOT           : num [1:460] 33026385 2947560 1917663 3701935 5089279 ... #>   ..$ MAX           : num [1:460] 3084242 544763 651848 298134 1165019 ... #>   ..$ is_secret_freq: logi [1:460] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_dom : logi [1:460] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_prim: logi [1:460] FALSE FALSE FALSE FALSE FALSE FALSE ... #>  $ nuts_cj  : tibble [452 x 8] (S3: tbl_df/tbl/data.frame) #>   ..$ NUTS          : chr [1:452] \"FR10\" \"FR21\" \"FR22\" \"FR23\" ... #>   ..$ CJ            : chr [1:452] \"Total\" \"Total\" \"Total\" \"Total\" ... #>   ..$ N_OBS         : int [1:452] 38462 6769 4561 5090 8611 7811 5643 10411 8179 5163 ... #>   ..$ TOT           : num [1:452] 33026385 2947560 1917663 3701935 5089279 ... #>   ..$ MAX           : num [1:452] 3084242 544763 651848 298134 1165019 ... #>   ..$ is_secret_freq: logi [1:452] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_dom : logi [1:452] FALSE FALSE FALSE FALSE FALSE FALSE ... #>   ..$ is_secret_prim: logi [1:452] FALSE FALSE FALSE FALSE FALSE FALSE ..."},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"preparing-the-list-of-explanatory-variables","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Preparing the list of explanatory variables","title":"Protect several linked tables at once","text":"going create list explanatory variables tables. case, explanatory variables 2 first columns table. names list names corresponding tables list_tables argument.","code":"nom_var_list <- purrr::map(   list_data_4_tabs,   function(data) colnames(data)[1:2] ) nom_var_list #> $act_size #> [1] \"ACTIVITY\" \"SIZE\"     #>  #> $act_cj #> [1] \"ACTIVITY\" \"CJ\"       #>  #> $nuts_size #> [1] \"NUTS\" \"SIZE\" #>  #> $nuts_cj #> [1] \"NUTS\" \"CJ\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"preparing-the-list-of-total-codes","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Preparing the list of total codes","title":"Protect several linked tables at once","text":"labels used mention total variable declared user, nmaed list. However, variables label refer total, information can mentionned follows:","code":"total_codes <- \"Total\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"making-the-hierarchical-files","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Making the hierarchical files","title":"Protect several linked tables at once","text":"ACTIVITY NUTS two hierarchical variables. use correspondance table create .hrc files tau-Argus need. mention names hrc files, create named vector (list) follows: names vector names corresponding hierarchical variables.","code":"data(activity_corr_table) data(nuts23_fr_corr_table) hrc_file_activity <- write_hrc2(   corr_table = activity_corr_table,   file_name = \"hrc/activity.hrc\" ) hrc_file_nuts <- write_hrc2(   corr_table = nuts23_fr_corr_table,   file_name = \"hrc/nuts.hrc\" ) hrc_files <- list(   ACTIVITY = hrc_file_activity,   NUTS = hrc_file_nuts )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"running-the-protection-of-all-the-tables-at-once","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Running the protection of all the tables at once","title":"Protect several linked tables at once","text":"","code":"res <- tab_multi_manager(     list_tables = list_data_4_tabs,     list_explanatory_vars = nom_var_list,     dir_name = \"tauargus_files/ex4\",     hrc = hrc_files,     totcode = total_codes,     value = \"TOT\",     freq = \"N_OBS\",     secret_var = \"is_secret_prim\" ) #> --- Current table to treat:  act_size --- #> --- Current table to treat:  act_cj --- #> --- Current table to treat:  act_size --- #> --- Current table to treat:  nuts_size --- #> --- Current table to treat:  nuts_cj ---"},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"results-1","dir":"Articles","previous_headings":"Some examples > About protecting 4 linked tables at once","what":"Results","title":"Protect several linked tables at once","text":"","code":"list_with_status <- res %>%   purrr::map(     function(df){       df %>%         rename_with(~\"final_suppress\", last_col()) %>%         mutate(           status = case_when(             is_secret_freq ~ \"A\",             is_secret_dom ~ \"B\",             final_suppress ~ \"D\",             TRUE ~\"V\"           )         ) %>%         select(1:2, TOT, N_OBS, status)     }   ) str(list_with_status$act_size) #> 'data.frame':    414 obs. of  5 variables: #>  $ ACTIVITY: chr  \"01\" \"01\" \"02\" \"02\" ... #>  $ SIZE    : chr  \"Total\" \"tr1\" \"Total\" \"tr1\" ... #>  $ TOT     : num  853 853 43623 35503 8120 ... #>  $ N_OBS   : int  18 18 387 381 6 1 1 4 4 84 ... #>  $ status  : chr  \"V\" \"V\" \"V\" \"V\" ... list_with_status %>%   purrr::iwalk(     function(df,name){       cat(name, \"\\n\")       df %>% count(status) %>% print()     }   ) #> act_size  #>   status   n #> 1      A  52 #> 2      B  25 #> 3      D  83 #> 4      V 254 #> act_cj  #>   status   n #> 1      A  35 #> 2      B  25 #> 3      D  90 #> 4      V 256 #> nuts_size  #>   status   n #> 1      A  55 #> 2      B  17 #> 3      D  82 #> 4      V 306 #> nuts_cj  #>   status   n #> 1      A  45 #> 2      B  20 #> 3      D 101 #> 4      V 286"},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"dealing-with-non-nested-hierarchies","dir":"Articles","previous_headings":"Some examples","what":"Dealing with non-nested hierarchies","title":"Protect several linked tables at once","text":"Let’s assume ’d like protect two tables crossing ACTIVITY SIZE one hand ACTIVITY CJ hand. ACTIVITY variable hierarchical one. Moreover, case, ’d like release subtotal, called D_TO_M, addition activity_corr_table. subtotal sum D M labels A21 level. subtotal can’t inserted main hierarchy, leads us case non-nested hierarchies. confirm non-nesting two hierachies, let’s display extract . Extract main hierarchy: Extract alternative hierarchy: handle case, preferred approach create third table crossing ACTIVITY SIZE D M labels subtotal D_TO_M: Let’s create alternative hierarchy file. , let’s build list tables apply primary suppression rules . hrc alt_hrc arguments used mention hierarchies ACTIVITY variable: hrc used int previous example (named vector names different hierarchical variables appearingin tables values files names). Hence, hierarchy file taken vector default. alt_hrc used mention alternative hierarchies. argument named list names tables alternative hierarchies applied. rationale used fill alt_totcode argument.","code":"sdcHierarchies::hier_create(   root=\"Total\",   nodes = activity_corr_table$A10 %>% unique() ) %>%   sdcHierarchies::hier_display() #> Total #> +-AZ #> +-BE #> +-FZ #> +-GI #> +-JZ #> +-KZ #> +-LZ #> +-MN #> +-OQ #> \\-RU sdcHierarchies::hier_create(   root=\"D_TO_M\",   nodes = activity_corr_table_D_TO_M$A21 ) %>%   sdcHierarchies::hier_display() #> D_TO_M #> +-D #> +-E #> +-F #> +-G #> +-H #> +-I #> +-J #> +-K #> +-L #> \\-M turnover_act_size_D_TO_M <- turnover_act_size %>%   filter(     ACTIVITY %in% LETTERS[4:13]   ) %>%   bind_rows(     turnover_act_size %>%       filter(         ACTIVITY %in% LETTERS[4:13]       ) %>%       group_by(SIZE) %>%       summarise(N_OBS = sum(N_OBS), TOT = sum(TOT), MAX = max(MAX)) %>%       mutate(ACTIVITY = \"D_TO_M\")   ) str(turnover_act_size_D_TO_M) #> tibble [44 x 5] (S3: tbl_df/tbl/data.frame) #>  $ ACTIVITY: chr [1:44] \"D\" \"E\" \"F\" \"G\" ... #>  $ SIZE    : chr [1:44] \"Total\" \"Total\" \"Total\" \"Total\" ... #>  $ N_OBS   : int [1:44] 1411 828 28043 41624 6524 13905 8135 8140 11961 28221 ... #>  $ TOT     : num [1:44] 2438454 2264393 8907311 18244309 6273334 ... #>  $ MAX     : num [1:44] 981369 306905 1065833 765244 3084242 ... activity_corr_table_D_TO_M <- activity_corr_table %>%   filter(A21 %in% LETTERS[4:13]) %>%   select(-A88) %>%   mutate(A10 = \"D_TO_M\") %>%   unique()  hrc_file_activity_D_TO_M <- activity_corr_table_D_TO_M %>%   select(-1) %>%   write_hrc2(file_name = \"hrc/activity_D_TO_M\") list_data_3_tabs_nn <- list(   act_size = turnover_act_size,   act_size_D_TO_M = turnover_act_size_D_TO_M,   act_cj = turnover_act_cj ) %>%   purrr::map(     function(df){       df %>%         mutate(           is_secret_freq = N_OBS > 0 & N_OBS < 3,           is_secret_dom = ifelse(MAX == 0, FALSE, MAX/TOT>0.85),           is_secret_prim = is_secret_freq | is_secret_dom         )     }   ) res <- tab_multi_manager(   list_tables = list_data_3_tabs_nn,   list_explanatory_vars = list(     act_size = c(\"ACTIVITY\", \"SIZE\"),     act_size_D_TO_M = c(\"ACTIVITY\", \"SIZE\"),     act_cj = c(\"ACTIVITY\", \"CJ\")   ),   hrc = c(ACTIVITY = hrc_file_activity),   alt_hrc = list(     act_size_D_TO_M = c(ACTIVITY = hrc_file_activity_D_TO_M)   ),   dir_name = \"tauargus_files/ex5\",   value = \"TOT\",   freq = \"N_OBS\",   secret_var = \"is_secret_prim\",   totcode =  \"Total\",   alt_totcode = list(     act_size_D_TO_M = c(ACTIVITY = \"D_TO_M\")   ) ) #> --- Current table to treat:  act_size --- #> --- Current table to treat:  act_size_D_TO_M --- #> --- Current table to treat:  act_cj --- #> --- Current table to treat:  act_size --- #> --- Current table to treat:  act_size_D_TO_M --- #> --- Current table to treat:  act_size --- #> --- Current table to treat:  act_cj ---"},{"path":"https://inseefrlab.github.io/rtauargus/articles/protect_multi_tables.html","id":"about-this-vignette","dir":"Articles","previous_headings":"Some examples > Dealing with non-nested hierarchies","what":"About this vignette","title":"Protect several linked tables at once","text":"Authors: Julien Jamme & Nathanael Rastout Last update: 02/10/2022 Version rtauargus used: 1.1.0 Version τ-Argus used : TauArgus 4.2.2b1 R version used : 4.1.3 summary ↑","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"presentation-of-the-package","dir":"Articles","previous_headings":"Introduction","what":"Presentation of the package","title":"τ-Argus from R - tabular version","text":"rtauargus package offers R interface τ-Argus. allows : create inputs (asc, tab rda files) R data; generate sequence instructions executed batch mode (arb file); launch batch τ-Argus ; retrieve results R. syntax arguments closely matches batch syntax τ-Argus. allows large number functions used without multiplying arguments functions. package also able adapt easily possible modifications software (new methods available, additional options…). syntax rules writing batch given τ-Argus reference manual specified dedicated help section. package developed basis open source versions τ-Argus (versions 4.2 ), particular latest version available time development (4.2.2b1). compatible version 3.5.**_","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"purpose-of-this-document","dir":"Articles","previous_headings":"Introduction","what":"Purpose of this document","title":"τ-Argus from R - tabular version","text":"document aims explain main functionalities package, using relatively simple examples. detailed documentation function (exhaustive list arguments, technical aspects…) available via dedicated help section. summary ↑","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"τ-Argus from R - tabular version","text":"following setup made first use (longer afterwards)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"τ-argus","dir":"Articles","previous_headings":"Setup","what":"τ-Argus","title":"τ-Argus from R - tabular version","text":"rtauargus fonctions using τ-Argus requires software can used workstation. github repository τ-Argus : https://github.com/sdcTools/tauargus. latest releases can downloaded : https://github.com/sdcTools/tauargus/releases.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"dependencies","dir":"Articles","previous_headings":"Setup","what":"Dependencies","title":"τ-Argus from R - tabular version","text":"rtauargus requires R packages.dependencies install. package rtauargus can installed now. sommaire ↑","code":"• purrr (>= 0.2), • dplyr (>= 0.7), • gdata, • stringr, • rlang, • zoo"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick Start","title":"τ-Argus from R - tabular version","text":"section explains perform minimal configuration package apply suppressive methods single instruction.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"location-of-τ-argus","dir":"Articles","previous_headings":"Quick Start","what":"Location of τ-Argus","title":"τ-Argus from R - tabular version","text":"loading package, console displays information: particular, plausible location τ-Argus software predefined. can changed duration R session, follows: small adjustment done, package ready used. customized configuration, see specific vignettes","code":"library(rtauargus) loc_tauargus <- \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\"  options(rtauargus.tauargus_exe = loc_tauargus)"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"protecting-a-single-tabular-data-with-tab_rtauargus-function","dir":"Articles","previous_headings":"Quick Start","what":"Protecting a single tabular data with tab_rtauargus() function","title":"τ-Argus from R - tabular version","text":"tab_rtauargus() function performs full processing protect table retrieves results immediately R. Completely abstracting inner workings τ-Argus, allows entire processing made single instruction. intermediate files created local directory. tab_rtauargus() requires following arguments : tabular: data.frame containing table ; dir_name: directory outputs; files_name: τ-Argus files named (different extensions); explanatory_vars: name explanatory variables tabular; secret_var safety_rules: way apply primary suppression (explain later) totcode: code total explanatory variable tabular arguments default options detailed ( ?).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"minimal-example","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function","what":"Minimal example","title":"τ-Argus from R - tabular version","text":"following demonstration, fictitious table used: primary rules, use two following ones: n-k dominance rule n=1 k = 85 minimum frequency rule n = 3 safety range 10. get results dominance rule, need specify largest contributor cell, corresponding MAX variable tabular data. default, function displays console logbook content user can read steps run τ-Argus. can retrieved logbook.txt file. verbose = FALSE, function can silenced. default, function returns original dataset one variable , called Status, directly resulting τ-Argus describing status cell follows: -: primary secret cell frequency rule; -B: primary secret cell dominance rule (1st contributor); -C: primary secret cell frequency rule (contributors case n>1); -D: secondary secret cell; -V: valid cells - need mask. files generated function written specified directory (dir_name argument). default format protected table csv can changed. τ-Argus files (.tab, .rda, .arb .txt) written directory, . go , can consult latest version τ-Argus manual downloadable : https://research.cbs.nl/casc/Software/TauManualV4.1.pdf.","code":"act_size <-   data.frame(     ACTIVITY = c(\"01\",\"01\",\"01\",\"02\",\"02\",\"02\",\"06\",\"06\",\"06\",\"Total\",\"Total\",\"Total\"),     SIZE = c(\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\"),     VAL = c(100,50,150,30,20,50,60,40,100,190,110,300),     N_OBS = c(10,5,15,2,5,7,8,6,14,20,16,36),     MAX = c(20,15,20,20,10,20,16,38,38,20,38,38)   ) act_size #>    ACTIVITY  SIZE VAL N_OBS MAX #> 1        01   tr1 100    10  20 #> 2        01   tr2  50     5  15 #> 3        01 Total 150    15  20 #> 4        02   tr1  30     2  20 #> 5        02   tr2  20     5  10 #> 6        02 Total  50     7  20 #> 7        06   tr1  60     8  16 #> 8        06   tr2  40     6  38 #> 9        06 Total 100    14  38 #> 10    Total   tr1 190    20  20 #> 11    Total   tr2 110    16  38 #> 12    Total Total 300    36  38 ex1 <- tab_rtauargus(   act_size,   dir_name = \"tauargus_files/ex1\",   files_name = \"ex1\",   explanatory_vars = c(\"ACTIVITY\",\"SIZE\"),   safety_rules = \"FREQ(3,10)|NK(1,85)\",   value = \"VAL\",   freq = \"N_OBS\",   maxscore = \"MAX\",   totcode = c(ACTIVITY=\"Total\",SIZE=\"Total\") ) #> Start of batch procedure; file: Z:\\SDC\\OutilsConfidentialite\\rtauargus\\vignettes\\tauargus_files\\ex1\\ex1.arb #> <OPENTABLEDATA> \"Z:\\SDC\\OutilsConfidentialite\\rtauargus\\vignettes\\tauargus_files\\ex1\\ex1.tab\" #> <OPENMETADATA> \"Z:\\SDC\\OutilsConfidentialite\\rtauargus\\vignettes\\tauargus_files\\ex1\\ex1.rda\" #> <SPECIFYTABLE> \"ACTIVITY\"\"SIZE\"|\"VAL\"|| #> <SAFETYRULE> FREQ(3,10)|NK(1,85) #> <READTABLE> 1 #> Tables have been read #> <SUPPRESS> MOD(1,5,1,0,0) #> Start of the modular protection for table ACTIVITY x SIZE | VAL #> End of modular protection. Time used 0 seconds #>                    Number of suppressions: 2 #> <WRITETABLE> (1,4,,\"Z:\\SDC\\OutilsConfidentialite\\rtauargus\\vignettes\\tauargus_files\\ex1\\ex1.csv\") #> Table: ACTIVITY x SIZE | VAL has been written #>                    Output file name: Z:\\SDC\\OutilsConfidentialite\\rtauargus\\vignettes\\tauargus_files\\ex1\\ex1.csv #> End of TauArgus run ex1 #>    ACTIVITY  SIZE VAL N_OBS MAX Status #> 1        01 Total 150    15  20      V #> 2        01   tr1 100    10  20      V #> 3        01   tr2  50     5  15      V #> 4        02 Total  50     7  20      V #> 5        02   tr1  30     2  20      A #> 6        02   tr2  20     5  10      D #> 7        06 Total 100    14  38      V #> 8        06   tr1  60     8  16      D #> 9        06   tr2  40     6  38      B #> 10    Total Total 300    36  38      V #> 11    Total   tr1 190    20  20      V #> 12    Total   tr2 110    16  38      V"},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"data","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function > Example with hierarchy and primary secret already done","what":"Data","title":"τ-Argus from R - tabular version","text":"example, ’d like protect table companies’ turnover broken business sectors size. load data, : meaning variable : -ACTIVITY: business sector, hierarchical variables three levels described activity_corr_table dataset. root noted “Total”; -SIZE: size companies (Number employees three categories + overall category “Total”); -N_OBS: Frequency, number companies; -TOT: turnover value euros; -MAX: turnover company contributes cell.","code":"data(\"turnover_act_size\") head(turnover_act_size) #> # A tibble: 6 x 5 #>   ACTIVITY SIZE  N_OBS       TOT       MAX #>   <chr>    <chr> <int>     <dbl>     <dbl> #> 1 AZ       Total   405    44475.     6212. #> 2 BE       Total 12878 24827613.  1442029. #> 3 FZ       Total 28043  8907311.  1065833. #> 4 GI       Total 62053 26962063.  3084242. #> 5 JZ       Total  8135  8584917.  3957364. #> 6 KZ       Total  8140 62556596. 10018017."},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"hierarchys-file","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function > Example with hierarchy and primary secret already done","what":"Hierarchy’s file","title":"τ-Argus from R - tabular version","text":"performing tab_rtauargus() function, prepare hierarchical information appropriate format τ-Argus, ..e. .hrc file. correspondence table, write_hrc2() function job . , correspondence table describes nesting three levels business sectors, aggregated least one:","code":"data(activity_corr_table) head(activity_corr_table) #>   A10 A21 A88 #> 1  AZ   A  01 #> 2  AZ   A  02 #> 3  AZ   X   X #> 4  BE   B  06 #> 5  BE   B  07 #> 6  BE   B  08 hrc_file_activity <- write_hrc2(   corr_table = activity_corr_table,   file_name = \"hrc/activity.hrc\" )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"primary-secret","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function > Example with hierarchy and primary secret already done","what":"Primary secret","title":"τ-Argus from R - tabular version","text":"example, ’ll apply primary secret , .e. help τ-Argus. idea use τ-Argus apriori file. purpose, create boolean variable specify cells don’t comply primary secret rules. Using rules , get:","code":"turnover_act_size <- turnover_act_size %>%   mutate(     is_secret_freq = N_OBS > 0 & N_OBS < 3,     is_secret_dom = MAX > TOT*0.85,     is_secret_prim = is_secret_freq | is_secret_dom   )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"running-τ-argus","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function > Example with hierarchy and primary secret already done","what":"Running τ-Argus","title":"τ-Argus from R - tabular version","text":"Two arguments added tab_rtauargus() function: -secret_var, indicating name variable tabular containing primary secret (apriori) information; -hrc, indicating name hierarchy file use ACTIVITY variable. Since primary suppression already specified, need use arguments, safety_rules maxscore. first one set default “MAN(10)”, say 10% Interval Protection applied. default, tab_rtauargus() runs Modular method perform secondary secret. , choose use Optimal method changing suppress argument.","code":"ex2 <- tab_rtauargus(   turnover_act_size,   dir_name = \"tauargus_files/ex2\",   files_name = \"ex2\",   explanatory_vars = c(\"ACTIVITY\",\"SIZE\"),   value = \"TOT\",   freq = \"N_OBS\",   secret_var = \"is_secret_prim\",   hrc = c(ACTIVITY = hrc_file_activity),   totcode = c(ACTIVITY=\"Total\",SIZE=\"Total\"),   suppress = \"OPT(1,5)\",   verbose=FALSE )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"result","dir":"Articles","previous_headings":"Quick Start > Protecting a single tabular data with tab_rtauargus() function > Example with hierarchy and primary secret already done","what":"Result","title":"τ-Argus from R - tabular version","text":"can see table() results, primary secret status “B” output produced τ-Argus. adjust , can :","code":"str(ex2) #> 'data.frame':    414 obs. of  9 variables: #>  $ ACTIVITY      : chr  \"01\" \"01\" \"02\" \"02\" ... #>  $ SIZE          : chr  \"Total\" \"tr1\" \"Total\" \"tr1\" ... #>  $ N_OBS         : int  18 18 387 381 6 1 1 4 4 84 ... #>  $ TOT           : num  853 853 43623 35503 8120 ... #>  $ MAX           : num  303 303 6212 6212 4812 ... #>  $ is_secret_freq: logi  FALSE FALSE FALSE FALSE FALSE TRUE ... #>  $ is_secret_dom : logi  FALSE FALSE FALSE FALSE FALSE TRUE ... #>  $ is_secret_prim: logi  FALSE FALSE FALSE FALSE FALSE TRUE ... #>  $ Status        : chr  \"V\" \"V\" \"V\" \"V\" ... table(ex2$Status) #>  #>   B   D   V  #>  77  64 273 ex2 %>%   mutate(     Status = dplyr::case_when(       is_secret_freq ~ \"A\",       TRUE ~ Status     )   ) %>%   dplyr::count(Status) #>   Status   n #> 1      A  52 #> 2      B  25 #> 3      D  64 #> 4      V 273"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"protecting-several-tables-at-the-same-time-with-tab_muli_manager-function","dir":"Articles","previous_headings":"Quick Start","what":"Protecting several tables at the same time, with tab_muli_manager() function","title":"τ-Argus from R - tabular version","text":"function tab_multi_manager() can deal whole set (linked ) tables. iterating process, performing secondary suppression one table time ensures common cells status. common cell concerned secondary suppression, reverberates secret table shares common cell. process ends secondary secret consistent every tables. See details vignettes Manage protection linked tables","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"data-1","dir":"Articles","previous_headings":"Quick Start > Protecting several tables at the same time, with tab_muli_manager() function","what":"Data","title":"τ-Argus from R - tabular version","text":"example, two tables used : second tabular dataset provides turnover companies broken business sectors (ACTIVITY) type company (CJ). latter three categories overall category noted “Total”. Since two tables share one common explanatory variable (ACTIVITY), can’t treated separately without risk inconsistent protection.","code":"data(\"turnover_act_size\") data(\"turnover_act_cj\") str(turnover_act_cj) #> tibble [406 x 5] (S3: tbl_df/tbl/data.frame) #>  $ ACTIVITY: chr [1:406] \"AZ\" \"BE\" \"FZ\" \"GI\" ... #>  $ CJ      : chr [1:406] \"Total\" \"Total\" \"Total\" \"Total\" ... #>  $ N_OBS   : int [1:406] 405 12878 28043 62053 8135 8140 11961 41359 26686 25108 ... #>  $ TOT     : num [1:406] 44475 24827613 8907311 26962063 8584917 ... #>  $ MAX     : num [1:406] 6212 1442029 1065833 3084242 3957364 ..."},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"primary-secret-1","dir":"Articles","previous_headings":"Quick Start > Protecting several tables at the same time, with tab_muli_manager() function","what":"Primary secret","title":"τ-Argus from R - tabular version","text":"first step consists indicating whether cell complies primary rules, . boolean variable created, equal TRUE cell doesn’t comply. , use rules previously.","code":"list_data_2_tabs <- list(   act_size = turnover_act_size,   act_cj = turnover_act_cj ) %>%   purrr::map(     function(df){       df %>%         mutate(           is_secret_freq = N_OBS > 0 & N_OBS < 3,           is_secret_dom = MAX > TOT*0.85,           is_secret_prim = is_secret_freq | is_secret_dom         )     }   )"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"running-τ-argus-1","dir":"Articles","previous_headings":"Quick Start > Protecting several tables at the same time, with tab_muli_manager() function","what":"Running τ-Argus","title":"τ-Argus from R - tabular version","text":"Now primary secret specified tables, can run process. default, function uses wrapper tab_rtauargus() function, called tab_rtauargus2(), apply secondary secret τ-Argus. Many default parameters set. particular: Interval Protection fixed 10; Suppress method set \"MOD(1,5,1,0,0); Output. running, function displays iteration table treated. vignette Manage protection linked tables provides full presentation tab_multi_manager() function.","code":"ex3 <- tab_multi_manager(   list_tables = list_data_2_tabs,   list_explanatory_vars = list(     act_size = c(\"ACTIVITY\", \"SIZE\"),     act_cj = c(\"ACTIVITY\", \"CJ\")   ),   hrc = c(ACTIVITY = hrc_file_activity),   dir_name = \"tauargus_files/ex3\",   value = \"TOT\",   freq = \"N_OBS\",   secret_var = \"is_secret_prim\",   totcode =  \"Total\" ) #> --- Current table to treat:  act_size --- #> --- Current table to treat:  act_cj --- #> --- Current table to treat:  act_size ---"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus.html","id":"about-this-vignette","dir":"Articles","previous_headings":"Quick Start > Protecting several tables at the same time, with tab_muli_manager() function","what":"About this vignette","title":"τ-Argus from R - tabular version","text":"Authors: Julien Jamme & Nathanael Rastout Last update: 02/10/2022 Version rtauargus used: 1.1.0 Version τ-Argus used : TauArgus 4.2.2b1 R version used : 4.1.3 summary ↑","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"presentation-of-the-package","dir":"Articles","previous_headings":"Introduction","what":"Presentation of the package","title":"τ-Argus from R","text":"rtauargus package provides R interface τ-Argus. allows : create inputs (asc rda files) data R format; generate sequence instructions executed batch mode (arb file) ; launch batch τ-Argus command line; retrieve results R. different operations can performed , also modular way. allow integration tasks performed τ-Argus processing chain written R. syntax arguments closely matches batch syntax τ-Argus. allows use large number features without multiply arguments functions. package can also adapted easily possible modifications software (new available methods, additional options…). Syntax rules batch writing reference manual τ-Argus. package developed basis open source versions τ Argus (versions 4.1 higher), especially latest version available development (4.1.7)._ compatible version 3.5.**_ moment, microdata accepted input (data already tabulated).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"purpose-of-this-document","dir":"Articles","previous_headings":"Introduction","what":"Purpose of this document","title":"τ-Argus from R","text":"document aims show main features can articulated, based relatively simple examples. detailed documentation function (exhaustive list arguments, technical aspects…) available via dedicated help section. following demonstration, fictitious microdata set used : summary ↑","code":"microdata <-   data.frame(     V1    = c(\"A\", \"A\", \"A\", \"A\", \"B\", \"B\", \"B\", \"C\"),     V2    = c(\"Y\", \"Z\"),     V3    = c(\"T1\", \"T2\", \"T1\", \"S_\", \"T1\", \"T1\", \"T1\", \"S_\"),     VAL   = c(100, 0, 7, 25, 0, 4, 0, 5),     WEIGHT = c(1, 2.71, 4.2, 1)   ) microdata #>   V1 V2 V3 VAL WEIGHT #> 1  A  Y T1 100   1.00 #> 2  A  Z T2   0   2.71 #> 3  A  Y T1   7   4.20 #> 4  A  Z S_  25   1.00 #> 5  B  Y T1   0   1.00 #> 6  B  Z T1   4   2.71 #> 7  B  Y T1   0   4.20 #> 8  C  Z S_   5   1.00"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"τ-Argus from R","text":"following installations must carried first use (later).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"τ-argus","dir":"Articles","previous_headings":"Installation","what":"τ-Argus","title":"τ-Argus from R","text":"functions rtauargus calling τ-Argus require software accessible workstation. download τ-Argus can found dedicated page Dutch statistical office. However, functions execute τ-Argus (creation microdata…). computer problem.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"dependencies","dir":"Articles","previous_headings":"Installation","what":"Dependencies","title":"τ-Argus from R","text":"work, rtauargus depends R packages. installed beforehand (brackets minimum versions required).","code":"- purrr (>= 0.2), - dplyr (>= 0.7), - gdata, - stringr, - rlang, - zoo"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"package","dir":"Articles","previous_headings":"Installation","what":"Package","title":"τ-Argus from R","text":"rtauargus package ready installed. summary ↑","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"τ-Argus from R","text":"part explains perform minimal configuration package apply statistical confidentiality single instruction.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"location-of-τ-argus","dir":"Articles","previous_headings":"Quick start","what":"Location of τ-Argus","title":"τ-Argus from R","text":"package loaded, console displays information: particular, plausible location τ-Argus software predefined. possible change duration R session. message indicates location unknown, modify : small adjustment, package ready used. customized configuration, see section package-options._","code":"library(rtauargus) loc_tauargus <- \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\"  options(rtauargus.tauargus_exe = loc_tauargus)"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"function-rtauargus-","dir":"Articles","previous_headings":"Quick start","what":"Function rtauargus.","title":"τ-Argus from R","text":"eponymous function rtauargus performs processing retrieves results immediately R. Completely abstaining internal workings τ-Argus, allows perform entire process single instruction (specifically, intermediate files created temporary directory deleted end R session). rtauargus takes mandatory arguments : data.frame containing microdata ; list 1 10 tabs composed data.frame variables (alone example ); rule(s) applied primary secrecy ; method(s) deleting secondary secret boxes. last two arguments use batch syntax τ-Argus.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"minimalist-example","dir":"Articles","previous_headings":"Quick start > Function rtauargus.","what":"Minimalist example","title":"τ-Argus from R","text":"response variable given, count made (“<freq>”).","code":"rtauargus(   microdata = microdata,   explanatory_vars = \"V1\",   safety_rules = \"FREQ(3,10)\",   suppress = \"GH(1,100)\" ) #> Start of batch procedure; file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac38694520.arb #> <OPENMICRODATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac371a1bda.asc\" #> <OPENMETADATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac371a1bda.rda\" #> <SPECIFYTABLE> \"V1\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <READMICRODATA> #> Start explore file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac371a1bda.asc #> Start computing tables #> Table: V1 | <freq> has been specified #> Tables have been computed #> Micro data file read; processing time 0 seconds #> Tables from microdata have been read #> <SUPPRESS> GH(1,100) #> Start of the hypercube protection for table V1 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 1 #> The hypercube procedure has been applied #>                    1 cells have been suppressed #> <WRITETABLE> (1,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac14df1072.sbs\") #> Table: V1 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac14df1072.sbs #> End of TauArgus run #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"elaborate-example","dir":"Articles","previous_headings":"Quick start > Function rtauargus.","what":"Elaborate example","title":"τ-Argus from R","text":"parameters available. example, can add previous instruction : second tabulation (two tables treated independently) ; parameter allowing display status secret FIRST TABLE; parameter hide log τ-Argus console. addition, tables produced longer simply sent console. stored secret1 object (list consisting two data.frame), can continue manipulate. Note writing suppress = \"GH(.,100)\" :_ first parameter expected τ-Argus tab number. , want apply method deleting secondary secret table. one method several tabs, characters parenthesis first comma ignored automatically calculated tabulation numbers. function help describes 4 mandatory arguments. arguments available documented basic functions constituent (micro_asc_rda, micro_arb, run_arb, import). argument functions can used rtauargus. following section provides details operation system. summary ↑","code":"secret1 <-   rtauargus(     microdata = microdata,     explanatory_vars = list(\"V1\", c(\"V1\", \"V2\")), # 2 tabs (V1, V1xV2)     safety_rules = \"FREQ(3,10)\",     suppress = \"GH(.,100)\", # . replaces the tab number     output_options = c(\"\", \"AS+\"), # no status for the 1st array     show_batch_console = FALSE # to hide the log   ) #> Start of batch procedure; file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac2c40c9f.arb #> <OPENMICRODATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d114f19.asc\" #> <OPENMETADATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d114f19.rda\" #> <SPECIFYTABLE> \"V1\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <SPECIFYTABLE> \"V1\"\"V2\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <READMICRODATA> #> Start explore file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d114f19.asc #> Start computing tables #> Table: V1 | <freq> has been specified #> Table: V1 x V2 | <freq> has been specified #> Tables have been computed #> Micro data file read; processing time 0 seconds #> Tables from microdata have been read #> <SUPPRESS> GH(1,100) #> Start of the hypercube protection for table V1 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 1 #> The hypercube procedure has been applied #>                    1 cells have been suppressed #> <WRITETABLE> (1,4,,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adaceb526d.sbs\") #> Table: V1 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adaceb526d.sbs #> <SUPPRESS> GH(2,100) #> Start of the hypercube protection for table V1 x V2 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 2 #> The hypercube procedure has been applied #>                    2 cells have been suppressed #> <WRITETABLE> (2,4,AS+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4bae41d1.sbs\") #> Table: V1 x V2 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4bae41d1.sbs #> End of TauArgus run  secret1 #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"process-decomposition","dir":"Articles","previous_headings":"","what":"Process decomposition","title":"τ-Argus from R","text":"Using rtauargus function convenient terms lines code enter. However, approach can quite cumbersome tables secreted common certain number characteristics. example, like generate asc rda files, run several batches using files. case examples seen far, intermediate files systematically regenerated, even content identical. , can use functions called successively function rtauargus, namely : micro_asc_rda()   →  micro_arb()   →  run_arb()   →   import()","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"function-micro_asc_rda-","dir":"Articles","previous_headings":"Process decomposition","what":"[1] Function micro_asc_rda.","title":"τ-Argus from R","text":"Argus accepts microdata input well-defined form: text file fixed length columns, without column headers (.asc file) ; variable description file (.rda file). function micro_asc_rda produces two files data.frame.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"minimalist-example-1","dir":"Articles","previous_headings":"Process decomposition > [1] Function micro_asc_rda.","what":"Minimalist example","title":"τ-Argus from R","text":"data name asc file entered . name metadata file specified, takes name asc, extension .rda. Content files created : package functions accept file locations form relative path. example, asc_filename = \"microdata.asc\" working directory Z:/ equivalent asc_filename = \"Z:/microdata.asc\"._","code":"micro_asc_rda(microdata, asc_filename = \"Z:/microdata.asc\") file.show(\"Z:/microdata.asc\", \"Z:/microdata.rda\", pager = \"internal\") microdata.asc     microdata.rda                                               A Y T1 100 1.00   V1 1 1               A Z T2   0 2.71     <RECODEABLE>       A Y T1   7 4.20     <TOTCODE> \"Total\"  A Z S_  25 1.00   V2 3 1               B Y T1   0 1.00     <RECODEABLE>       B Z T1   4 2.71     <TOTCODE> \"Total\"  B Y T1   0 4.20   V3 5 2               C Z S_   5 1.00     <RECODEABLE>                           <TOTCODE> \"Total\"                    VAL 8 3                                  <NUMERIC>                              <DECIMALS> 0                         WEIGHT 12 4                              <NUMERIC>                              <DECIMALS> 2"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"elaborate-example-1","dir":"Articles","previous_headings":"Process decomposition > [1] Function micro_asc_rda.","what":"Elaborate example","title":"τ-Argus from R","text":"add previous example : weight variable ; information hierarchical variable ; differentiated codes totals; minimum number decimal places written numerical variables. Content files created :","code":"micro_asc_rda(   microdata = microdata,   asc_filename = \"Z:/microdata.asc\",   weight_var = \"WEIGHT\",   hrc = c(V3 = \"1 1\"),   totcode = c(\"Ensemble\", V2 = \"TOTAL\"),   decimals = 1 ) file.show(\"Z:/microdata.asc\", \"Z:/microdata.rda\", pager = \"internal\") microdata.asc       microdata.rda                                                       A Y T1 100.0 1.00   V1 1 1                  A Z T2   0.0 2.71     <RECODEABLE>          A Y T1   7.0 4.20     <TOTCODE> \"Ensemble\"  A Z S_  25.0 1.00   V2 3 1                  B Y T1   0.0 1.00     <RECODEABLE>          B Z T1   4.0 2.71     <TOTCODE> \"TOTAL\"     B Y T1   0.0 4.20   V3 5 2                  C Z S_   5.0 1.00     <RECODEABLE>                                <TOTCODE> \"Ensemble\"                        <HIERARCHICAL>                              <HIERLEVELS> 1 1                          VAL 8 5                                       <NUMERIC>                                   <DECIMALS> 1                              WEIGHT 14 4                                   <WEIGHT>                                    <DECIMALS> 2"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"temporary-files","dir":"Articles","previous_headings":"Process decomposition > [1] Function micro_asc_rda.","what":"Temporary files","title":"τ-Argus from R","text":"parameter *_filename filled, generated files placed temporary folder. possible retrieve location name (random) files return value function. summary ↑","code":"names_asc_rda <- micro_asc_rda(microdata) names_asc_rda #> $asc_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac46ca2126.asc\" #>  #> $rda_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac46ca2126.rda\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"function-micro_arb-","dir":"Articles","previous_headings":"Process decomposition","what":"[2] Function micro_arb.","title":"τ-Argus from R","text":"function builds batch file executable τ-Argus. takes mandatory arguments: asc file name ; tab(s) (10, list) ; primary secrecy rule(s); method(s) managing secondary secrecy. function also needs name rda file. specified, name asc file .rda extension used. function check existence specified directories files. generates file instructions, without evaluating validity._","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"minimalist-example-2","dir":"Articles","previous_headings":"Process decomposition > [2] Function micro_arb.","what":"Minimalist example","title":"τ-Argus from R","text":"Content file created :","code":"micro_arb(   arb_filename = \"Z:/microdata.arb\",   asc_filename = \"Z:/microdata.asc\",   explanatory_vars = \"V1\",   safety_rules = \"FREQ(3,10)\",   suppress = \"GH(.,100)\",   output_names = \"Z:/results/secretV1.csv\" ) file.show(\"Z:/microdata.arb\", pager = \"internal\") ```` // Batch generated by package *rtauargus* // (2022-10-02 01:12:18 CEST) <OPENMICRODATA> \"Z:\\microdata.asc\" <OPENMETADATA> \"Z:\\microdata.rda\" <SPECIFYTABLE> \"V1\"|\"<freq>\"|| <SAFETYRULE> FREQ(3,10) <READMICRODATA> <SUPPRESS> GH(1,100) <WRITETABLE> (1,4,AS+SE+,\"Z:\\results\\secretV1.csv\")"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"elaborate-example-2","dir":"Articles","previous_headings":"Process decomposition > [2] Function micro_arb.","what":"Elaborate example","title":"τ-Argus from R","text":"previous example completed : second tab ; response variable summed (instead count) ; addition 85% dominance second table; weighting first table (second); deletion empty crossovers tables (SE+). Passing single value option applies treatment tab. differentiated options, necessary pass vector containing many values tabs. ``{r arb2} micro_arb( arb_filename = “Z:/microdata.arb”, asc_filename = “Z:/microdata.asc”, explanatory_vars = list(“V1”, c(“V2”, “V3”)), response_var = “VAL”, safety_rules = c(“FREQ(3,10)”, “FREQ(3,10)|NK(1,85)”), weighted = c(TRUE, FALSE), suppress = “GH(.,100)”, output_options = “+SE+” ) `````","code":"`````r file.show(\"Z:/microdata.arb\", pager = \"internal\") // Batch generated by package *rtauargus* // (2022-10-02 01:12:18 CEST) <OPENMICRODATA> \"Z:\\microdata.asc\" <OPENMETADATA> \"Z:\\microdata.rda\" <SPECIFYTABLE> \"V1\"|\"<freq>\"|| <SAFETYRULE> FREQ(3,10) <READMICRODATA> <SUPPRESS> GH(1,100) <WRITETABLE> (1,4,AS+SE+,\"Z:\\results\\secretV1.csv\")"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"temporary-files-1","dir":"Articles","previous_headings":"Process decomposition > [2] Function micro_arb.","what":"Temporary files","title":"τ-Argus from R","text":"previous example, output file names (output_names) specified, led generation file names temporary. Specifying name .arb file mandatory either. information can retrieved return value function. summary ↑","code":"infos_arb <-   micro_arb(     asc_filename = \"Z:/microdata.asc\",     explanatory_vars = list(\"V1\", c(\"V2\", \"V3\")),     safety_rules = \"FREQ(3,10)\",     suppress = \"GH(.,100)\",     output_type = \"4\"   ) infos_arb #> $arb_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac21db5b9d.arb\" #>  #> $output_names #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac3284b7f.sbs\" #> [2] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adace48162.sbs\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"function-run_arb","dir":"Articles","previous_headings":"Process decomposition","what":"[3] Function run_arb","title":"τ-Argus from R","text":"Now instructions generated .arb file, can submit τ-Argus batch mode. get list tables secreted : run_arb function package runs τ-Argus. requires software accessible workstation. arb_filename argument mandatory, information present .arb file. Optional parameters also available: missing_dir : action perform folder result written exist (trigger error create ) tauargus_exe : change executable (override rtauargus.tauargus_exe time function) ; logbook : location name file containing error log; show_batch_on_console` : display batch progress console ; import : disabled, function generates text files without importing R (see next section details). tabs given name micro_arb, names used list data.frames output run_arb (names defined example ). Checks made actual launch τ-Argus : existence software workstation, asc rda files, folders write results, variables used (crosses, variable response, …) metadata (rda file)._ summary ↑","code":"secret2 <- run_arb(\"Z:/microdata.arb\") #> Error in run_arb(\"Z:/microdata.arb\"):  #> Directory cannot be found : #>   Z:/results #> (use missing_dir = \"create\" ?)  secret2 #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"import-function","dir":"Articles","previous_headings":"Process decomposition","what":"[4] Import function","title":"τ-Argus from R","text":"function imports results produced τ-Argus (text files) information contained arb file. therefore requires batch completed without error files still present. last reason, import function typically called run_arb setting import = TRUE. can also used independently (e.g. don’t want restart batch took long time execute).","code":"secret2 <- import(\"Z:/microdata.arb\") # produces the same result as run_arb(\"Z:/microdata.arb\", import = TRUE)"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"accepted-formats","dir":"Articles","previous_headings":"Process decomposition > [4] Import function","what":"Accepted formats","title":"τ-Argus from R","text":"possible (moment) import results type : 2: csv pivot-table 4: sbs output format import impossible given tab, empty data.frame returned (warning message).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"tab-attributes","dir":"Articles","previous_headings":"Process decomposition > [4] Import function","what":"Tab attributes","title":"τ-Argus from R","text":"data.frame list associated set attributes, metadata keeping track specifications passed τ-Argus. example, secret2[[2]] (second array secret2), parameters passed function (correspond default values package). summary ↑","code":"str(secret2[[2]]) #>  NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"package-options","dir":"Articles","previous_headings":"","what":"Package options","title":"τ-Argus from R","text":"package options define default behavior functions. options used mandatory argument function filled . allow repeat systematically parameter call function. option name name argument function preceded rtauargus. : example, rtauargus.decimals value used argument decimals micro_asc_rda function filled user. loading, package assigns default value options rtauargus yet declared. options already defined user keep values. available options default values listed :","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"display","dir":"Articles","previous_headings":"Package options","what":"Display","title":"τ-Argus from R","text":"view options set current session: values identical default values, except location τ-Argus, previously modified. appear order alphabetical. summary ↑","code":"rtauargus_options() #> $rtauargus.decimals #> [1] 0 #>  #> $rtauargus.hierleadstring #> [1] \"@\" #>  #> $rtauargus.import #> [1] FALSE #>  #> $rtauargus.is_tabular #> [1] TRUE #>  #> $rtauargus.linked #> [1] FALSE #>  #> $rtauargus.missing #> [1] \"\" #>  #> $rtauargus.missing_dir #> [1] \"stop\" #>  #> $rtauargus.output_options #> [1] \"AS+SE+\" #>  #> $rtauargus.output_type #> [1] \"4\" #>  #> $rtauargus.response_var #> [1] \"<freq>\" #>  #> $rtauargus.separator #> [1] \",\" #>  #> $rtauargus.show_batch_console #> [1] FALSE #>  #> $rtauargus.tauargus_exe #> [1] \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  #> $rtauargus.totcode #> [1] \"Total\" #>  #> $rtauargus.weighted #> [1] FALSE"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"modification-reset","dir":"Articles","previous_headings":"Package options","what":"Modification, reset","title":"τ-Argus from R","text":"modify one options, use following syntax () one used modify location τ-Argus) : reset certain options: reset values default (including path τ-Argus modified beginning demonstration), specify argument: summary ↑","code":"options(   rtauargus.show_batch_console = FALSE,   rtauargus.output_options = \"AS+SE+\",   rtauargus.output_type = \"4\",   rtauargus.response_var = \"VAL\" )  str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"AS+SE+\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"VAL\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi FALSE reset_rtauargus_options(\"rtauargus.response_var\", \"rtauargus.output_type\")  # It is possible to omit the prefix 'rtauargus. # The following instruction is equivalent: reset_rtauargus_options(\"response_var\", \"output_type\")  str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"AS+SE+\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"<freq>\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi FALSE reset_rtauargus_options()"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"local-or-global-reach","dir":"Articles","previous_headings":"Package options","what":"Local or global reach","title":"τ-Argus from R","text":"Like R function, parameterization done specifying arguments function called (local scope). option system package allows instructions options(rtauargus.<option> = <value>) define options global. Depending instructions written, configuration last less long: script, effect current session ; user configuration file (.Rprofile…), allow user keep track presets session . second way recommended chain treatment intended reproducible. Indeed, identical script executed two different machines produce two results different._ summary ↑","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"other-features","dir":"Articles","previous_headings":"Other information","what":"Other features","title":"τ-Argus from R","text":"features package mentioned getting started: management linked arrays (argument linked micro_arb) creation hierarchical variables microdata (function write_hrc). taking account apriori file (argument apriori micro_arb) use rtauargus function microdata already text file (data.frame) optimized launch large number crosses parameters (primary secrecy rules, secondary secrecy method, …) : function rtauargus_plus See help functions information.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"ideas-for-the-future","dir":"Articles","previous_headings":"Other information","what":"Ideas for the future","title":"τ-Argus from R","text":"implement request parameters… take account tabulated input data …","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"report-a-problem-suggest-an-improvement","dir":"Articles","previous_headings":"Other information","what":"Report a problem, suggest an improvement","title":"τ-Argus from R","text":"package construction. features τ-Argus integrated (purpose integrate , frequently used). return error report, please use link (click “New issue”). Requires connected gitlab-Insee.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro.html","id":"about-this-vignette","dir":"Articles","previous_headings":"Other information","what":"About this vignette","title":"τ-Argus from R","text":"Author: Pierre-Yves Berrard Updated : Julien Jamme Last update: 02/10/2022 Version rtauargus used: 1.1.0 Version τ-Argus used : TauArgus 4.2.2b1 R version used : 4.1.3 summary ↑","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"présentation-du-package","dir":"Articles","previous_headings":"Introduction","what":"Présentation du package","title":"τ-Argus depuis R","text":"Le package rtauargus offre une interface R pour τ-Argus. Il permet de : créer les inputs (fichiers asc et rda) à partir de données au format R ; générer la séquence d’instructions à exécuter en mode batch (fichier arb) ; lancer un batch τ-Argus en ligne de commande ; récupérer les résultats dans R. Ces différentes opérations peuvent être exécutées en une seule fois, mais aussi de manière modulaire. Elles permettent d’intégrer les tâches réalisées par τ-Argus dans une chaîne de traitement écrite en R. La syntaxe de certains arguments colle au plus près à la syntaxe batch de τ-Argus. Ceci permet d’utiliser un grand nombre de fonctionnalités sans multiplier les arguments des fonctions. Le package pourra en outre s’adapter plus facilement à d’éventuelles modifications du logiciel (nouvelles méthodes disponibles, options supplémentaires…). Les règles de syntaxe pour l’écriture de batch figurent dans le manuel de référence de τ-Argus. Le package été développé sur la base des versions open source de τ -Argus (versions 4.1 et supérieures), en particulier la dernière version disponible lors du développement (4.1.7). Il n’est pas compatible avec la version 3.5. Pour l’instant, seules les microdonnées sont acceptées en entrée (pas les données déjà tabulées).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"objectif-de-ce-document","dir":"Articles","previous_headings":"Introduction","what":"Objectif de ce document","title":"τ-Argus depuis R","text":"Ce document vise à montrer comment les fonctionnalités principales du package peuvent être articulées, à partir d’exemples relativement simples. Une documentation détaillée d’une fonction (liste exhaustive des arguments, aspects techniques…) est disponible via la rubrique d’aide dédiée. Pour la démonstration qui va suivre, un jeu de microdonnées fictif sera utilisé : sommaire ↑","code":"donnees <-   data.frame(     V1    = c(\"A\", \"A\", \"A\", \"A\", \"B\", \"B\", \"B\", \"C\"),     V2    = c(\"Y\", \"Z\"),     V3    = c(\"T1\", \"T2\", \"T1\", \"S_\", \"T1\", \"T1\", \"T1\", \"S_\"),     VAL   = c(100, 0, 7, 25, 0, 4, 0, 5),     POIDS = c(1, 2.71, 4.2, 1)   ) donnees #>   V1 V2 V3 VAL POIDS #> 1  A  Y T1 100  1.00 #> 2  A  Z T2   0  2.71 #> 3  A  Y T1   7  4.20 #> 4  A  Z S_  25  1.00 #> 5  B  Y T1   0  1.00 #> 6  B  Z T1   4  2.71 #> 7  B  Y T1   0  4.20 #> 8  C  Z S_   5  1.00"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"τ-Argus depuis R","text":"Les installations suivantes sont à réaliser avant la première utilisation (et plus par la suite).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"τ-argus","dir":"Articles","previous_headings":"Installation","what":"τ-Argus","title":"τ-Argus depuis R","text":"Les fonctions de rtauargus appelant τ-Argus nécessitent que ce logiciel soit accessible depuis le poste de travail. Le téléchargement de τ-Argus se fait sur la page dédiée du site de l’office néerlandais de statistiques. Cependant, toutes les fonctions n’exécutent pas τ-Argus (création des microdonnées…). Ne pas l’avoir sur son poste n’est donc pas bloquant.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"dépendances","dir":"Articles","previous_headings":"Installation","what":"Dépendances","title":"τ-Argus depuis R","text":"Pour fonctionner, rtauargus dépend d’autres packages R. Ceux-ci sont à installer au préalable (entre parenthèses les versions minimales requises).","code":"• purrr (>= 0.2), • dplyr (>= 0.7), • gdata, • stringr, • rlang, • zoo"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"package","dir":"Articles","previous_headings":"Installation","what":"Package","title":"τ-Argus depuis R","text":"Le package rtauargus est prêt à être installé. sommaire ↑","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"prise-en-main-rapide","dir":"Articles","previous_headings":"","what":"Prise en main rapide","title":"τ-Argus depuis R","text":"Cette partie explique comment effectuer une configuration minimale du package et comment appliquer le secret statistique en une seule instruction.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"emplacement-de-τ-argus","dir":"Articles","previous_headings":"Prise en main rapide","what":"Emplacement de τ-Argus","title":"τ-Argus depuis R","text":"Au chargement du package, la console affiche quelques informations : En particulier, un emplacement plausible pour le logiciel τ-Argus est prédéfini. Il est possible de le changer pour toute la durée de la session R. Un message indique que cet emplacement est inconnu, le modifie donc : Ce petit réglage effectué, le package est prêt à être utilisé. Pour une configuration plus personnalisée, consulter la section options du package.","code":"library(rtauargus) loc_tauargus <- \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\"  options(rtauargus.tauargus_exe = loc_tauargus)"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fonction-rtauargus","dir":"Articles","previous_headings":"Prise en main rapide","what":"Fonction rtauargus","title":"τ-Argus depuis R","text":"La fonction éponyme rtauargus effectue un traitement et récupère les résultats immédiatement dans R. S’abstrayant totalement des rouages internes de τ-Argus, elle permet de réaliser l’ensemble du traitement en une seule instruction (concrètement, tous les fichiers intermédiaires sont créés dans un répertoire temporaire qui est effacé à la fin de la session R). rtauargus prend comme arguments obligatoires : un data.frame contenant les microdonnées ; une liste de 1 à 10 tabulations composées de variables du data.frame (une seule dans l’exemple ci-après) ; la (les) règle(s) à appliquer pour le secret primaire ; la (les) méthode(s) pour la suppression des cases en secret secondaire. Les deux derniers arguments utilisent la syntaxe batch τ-Argus.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-minimaliste","dir":"Articles","previous_headings":"Prise en main rapide > Fonction rtauargus","what":"Exemple minimaliste","title":"τ-Argus depuis R","text":"Comme aucune variable de réponse n’est renseignée, un comptage est effectué (“<freq>”).","code":"rtauargus(   microdata        = donnees,   explanatory_vars = \"V1\",   safety_rules     = \"FREQ(3,10)\",   suppress         = \"GH(1,100)\" ) #> Start of batch procedure; file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac13d12703.arb #> <OPENMICRODATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4a5b2bb2.asc\" #> <OPENMETADATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4a5b2bb2.rda\" #> <SPECIFYTABLE> \"V1\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <READMICRODATA> #> Start explore file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4a5b2bb2.asc #> Start computing tables #> Table: V1 | <freq> has been specified #> Tables have been computed #> Micro data file read; processing time 0 seconds #> Tables from microdata have been read #> <SUPPRESS> GH(1,100) #> Start of the hypercube protection for table V1 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 1 #> The hypercube procedure has been applied #>                    1 cells have been suppressed #> <WRITETABLE> (1,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3ab77f07.sbs\") #> Table: V1 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3ab77f07.sbs #> End of TauArgus run #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-élaboré","dir":"Articles","previous_headings":"Prise en main rapide > Fonction rtauargus","what":"Exemple élaboré","title":"τ-Argus depuis R","text":"D’autres paramètres sont disponibles. peut par exemple compléter l’instruction précédente avec : une deuxième tabulation (les deux tableaux seront traités indépendamment) ; un paramètre permettant de ne pas afficher le statut du secret pour le premier tableau ; un paramètre permettant de masquer le journal de τ-Argus dans la console. De plus, les tables produites ne sont plus simplement envoyées dans la console. Elles sont stockées dans un objet secret1 (une liste constituée de deux data.frame), que l’pourra continuer de manipuler. Note sur l’écriture suppress = \"GH(.,100)\" : Le premier paramètre attendu par τ-Argus est le numéro de la tabulation. Ici, souhaite appliquer la même méthode de suppression du secret secondaire à chaque tableau. S’il n’y qu’une méthode et plusieurs tabulations, les caractères entre la parenthèse et la première virgule sont ignorés et les numéros des tabulations calculés automatiquement. L’aide de la fonction ne décrit que les 4 arguments obligatoires. Les arguments optionnels disponibles sont documentés dans les fonctions élémentaires la constituant (micro_asc_rda, micro_arb, run_arb, import). Tout argument de ces fonctions peut être utilisé dans rtauargus. Leur fonctionnement est détaillé dans la section qui suit. sommaire ↑","code":"secret1 <-   rtauargus(     microdata          = donnees,     explanatory_vars   = list(\"V1\", c(\"V1\", \"V2\")), # 2 tabulations (V1, V1xV2)     safety_rules       = \"FREQ(3,10)\",     suppress           = \"GH(.,100)\",  # . remplace le numéro de tabulation     output_options     = c(\"\", \"AS+\"), # pas de statut pour le 1er tableau     show_batch_console = FALSE         # pour masquer le journal   ) #> Start of batch procedure; file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac414f572b.arb #> <OPENMICRODATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac42477e0.asc\" #> <OPENMETADATA> \"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac42477e0.rda\" #> <SPECIFYTABLE> \"V1\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <SPECIFYTABLE> \"V1\"\"V2\"|\"<freq>\"|| #> <SAFETYRULE> FREQ(3,10) #> <READMICRODATA> #> Start explore file: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac42477e0.asc #> Start computing tables #> Table: V1 | <freq> has been specified #> Table: V1 x V2 | <freq> has been specified #> Tables have been computed #> Micro data file read; processing time 0 seconds #> Tables from microdata have been read #> <SUPPRESS> GH(1,100) #> Start of the hypercube protection for table V1 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 1 #> The hypercube procedure has been applied #>                    1 cells have been suppressed #> <WRITETABLE> (1,4,,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4ee1392e.sbs\") #> Table: V1 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac4ee1392e.sbs #> <SUPPRESS> GH(2,100) #> Start of the hypercube protection for table V1 x V2 | <freq> #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 2 #> The hypercube procedure has been applied #>                    2 cells have been suppressed #> <WRITETABLE> (2,4,AS+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac6d507546.sbs\") #> Table: V1 x V2 | <freq> has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac6d507546.sbs #> End of TauArgus run  secret1 #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"décomposition-du-processus","dir":"Articles","previous_headings":"","what":"Décomposition du processus","title":"τ-Argus depuis R","text":"Utiliser la fonction rtauargus est pratique en terme de lignes de code à saisir. Toutefois, cette manière de procéder peut s’avérer assez lourde si les tableaux à secrétiser ont en commun un certain nombre de caractéristiques. voudrait par exemple ne générer que les fichiers asc et rda, puis lancer plusieurs batch utilisant ces mêmes fichiers. Ce n’était pas le cas dans les exemples vus jusqu’à maintenant, où tous les fichiers intermédiaires étaient systématiquement regénérés, même si leur contenu était identique. Pour cela, peut utiliser les fonctions appelées successivement par la fonction rtauargus, à savoir : micro_asc_rda()   →   micro_arb()   →   run_arb()   →   import()","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fonction-micro_asc_rda","dir":"Articles","previous_headings":"Décomposition du processus","what":"[1] Fonction micro_asc_rda","title":"τ-Argus depuis R","text":"τ-Argus n’accepte en entrée que des microdonnées sous une forme bien spécifique : un fichier texte aux colonnes de longueur fixe, sans en-tête de colonnes (fichier .asc) ; un fichier de description des variables (fichier .rda). La fonction micro_asc_rda produit ces deux fichiers à partir d’un data.frame.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-minimaliste-1","dir":"Articles","previous_headings":"Décomposition du processus > [1] Fonction micro_asc_rda","what":"Exemple minimaliste","title":"τ-Argus depuis R","text":"ne renseigne ici que les données et le nom du fichier asc. Comme le nom du fichier de métadonnées n’est pas spécifié, il prend le même nom que le fichier asc, mais avec l’extension .rda. Contenu des fichiers créés : Les fonctions du package acceptent les emplacements de fichiers sous forme de chemin relatif. Par exemple, asc_filename = \"donnees.asc\" avec un répertoire de travail sur Z:/ est équivalent à asc_filename = \"Z:/donnees.asc\".","code":"micro_asc_rda(donnees, asc_filename = \"Z:/donnees.asc\") file.show(\"Z:/donnees.asc\", \"Z:/donnees.rda\", pager = \"internal\") donnees.asc            donnees.rda                                                      A Y T1 100 1.00        V1 1 1               A Z T2   0 2.71          <RECODEABLE>       A Y T1   7 4.20          <TOTCODE> \"Total\"  A Z S_  25 1.00        V2 3 1               B Y T1   0 1.00          <RECODEABLE>       B Z T1   4 2.71          <TOTCODE> \"Total\"  B Y T1   0 4.20        V3 5 2               C Z S_   5 1.00          <RECODEABLE>                                <TOTCODE> \"Total\"                         VAL 8 3                                       <NUMERIC>                                   <DECIMALS> 0                              POIDS 12 4                                    <NUMERIC>                                   <DECIMALS> 2"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-élaboré-1","dir":"Articles","previous_headings":"Décomposition du processus > [1] Fonction micro_asc_rda","what":"Exemple élaboré","title":"τ-Argus depuis R","text":"ajoute à l’exemple précédent : une variable de poids ; les informations sur une variable hiérarchique ; des codes différenciés pour les totaux ; un nombre minimal de décimales à écrire pour les variables numériques. Contenu des fichiers créés :","code":"micro_asc_rda(   microdata    = donnees,   asc_filename = \"Z:/donnees.asc\",   weight_var   = \"POIDS\",   hrc          = c(V3 = \"1 1\"),   totcode      = c(\"Ensemble\", V2 = \"TOTAL\"),   decimals     = 1 ) file.show(\"Z:/donnees.asc\", \"Z:/donnees.rda\", pager = \"internal\") donnees.asc              donnees.rda                                                              A Y T1 100.0 1.00        V1 1 1                  A Z T2   0.0 2.71          <RECODEABLE>          A Y T1   7.0 4.20          <TOTCODE> \"Ensemble\"  A Z S_  25.0 1.00        V2 3 1                  B Y T1   0.0 1.00          <RECODEABLE>          B Z T1   4.0 2.71          <TOTCODE> \"TOTAL\"     B Y T1   0.0 4.20        V3 5 2                  C Z S_   5.0 1.00          <RECODEABLE>                                     <TOTCODE> \"Ensemble\"                             <HIERARCHICAL>                                   <HIERLEVELS> 1 1                               VAL 8 5                                            <NUMERIC>                                        <DECIMALS> 1                                   POIDS 14 4                                         <WEIGHT>                                         <DECIMALS> 2"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fichiers-temporaires","dir":"Articles","previous_headings":"Décomposition du processus > [1] Fonction micro_asc_rda","what":"Fichiers temporaires","title":"τ-Argus depuis R","text":"Pour tout paramètre *_filename non renseigné, les fichiers générés sont placés dans un dossier temporaire. Il est possible de récupérer l’emplacement et le nom (aléatoire) de ces fichiers dans la valeur de retour de la fonction. sommaire ↑","code":"noms_asc_rda <- micro_asc_rda(donnees) noms_asc_rda #> $asc_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac68155c78.asc\" #>  #> $rda_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac68155c78.rda\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fonction-micro_arb","dir":"Articles","previous_headings":"Décomposition du processus","what":"[2] Fonction micro_arb","title":"τ-Argus depuis R","text":"Cette fonction construit un fichier batch exécutable par τ-Argus. Elle prend comme arguments obligatoires : nom du fichier asc ; tabulation(s) (jusqu’à 10, sous forme de liste) ; règle(s) de secret primaire ; méthode(s) de gestion du secret secondaire. La fonction également besoin du nom du fichier rda. S’il n’est pas spécifié, le même nom que le fichier asc avec l’extension .rda est utilisé. La fonction ne vérifie pas l’existence des répertoires ou fichiers spécifiés. Elle ne fait que générer un fichier d’instructions, sans en évaluer la validité.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-minimaliste-2","dir":"Articles","previous_headings":"Décomposition du processus > [2] Fonction micro_arb","what":"Exemple minimaliste","title":"τ-Argus depuis R","text":"Contenu du fichier créé :","code":"micro_arb(   arb_filename     = \"Z:/donnees.arb\",   asc_filename     = \"Z:/donnees.asc\",   explanatory_vars = \"V1\",   safety_rules     = \"FREQ(3,10)\",   suppress         = \"GH(.,100)\",   output_names     = \"Z:/resultats/secretV1.csv\" ) file.show(\"Z:/donnees.arb\", pager = \"internal\") ```` // Batch generated by package *rtauargus* // (2022-10-02 00:14:30 CEST) <OPENMICRODATA> \"Z:\\donnees.asc\" <OPENMETADATA> \"Z:\\donnees.rda\" <SPECIFYTABLE> \"V1\"|\"<freq>\"|| <SAFETYRULE> FREQ(3,10) <READMICRODATA> <SUPPRESS> GH(1,100) <WRITETABLE> (1,4,AS+SE+,\"Z:\\resultats\\secretV1.csv\")"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"exemple-élaboré-2","dir":"Articles","previous_headings":"Décomposition du processus > [2] Fonction micro_arb","what":"Exemple élaboré","title":"τ-Argus depuis R","text":"complète l’exemple précédent avec : une deuxième tabulation ; une variable de réponse à sommer (au lieu d’un comptage) ; l’ajout d’une dominance à 85 % pour le deuxième tableau ; une pondération au premier tableau (mais pas au deuxième) ; la suppression des croisements vides dans les deux tableaux (SE+). Passer une seule valeur pour une option applique le même traitement à chaque tabulation. Pour des options différenciées, il faut impérativement passer un vecteur contenant autant de valeurs que de tabulations.","code":"micro_arb(   arb_filename     = \"Z:/donnees.arb\",   asc_filename     = \"Z:/donnees.asc\",   explanatory_vars = list(\"V1\", c(\"V2\", \"V3\")),   response_var     = \"VAL\",   safety_rules     = c(\"FREQ(3,10)\", \"FREQ(3,10)|NK(1,85)\"),   weighted         = c(TRUE, FALSE),   suppress         = \"GH(.,100)\",   output_options   = \"AS+SE+\" ) file.show(\"Z:/donnees.arb\", pager = \"internal\") ```` // Batch generated by package *rtauargus* // (2022-10-02 00:14:30 CEST) <OPENMICRODATA> \"Z:\\donnees.asc\" <OPENMETADATA> \"Z:\\donnees.rda\" <SPECIFYTABLE> \"V1\"|\"VAL\"|| <SAFETYRULE> FREQ(3,10)|Wgt(1) <SPECIFYTABLE> \"V2\"\"V3\"|\"VAL\"|| <SAFETYRULE> FREQ(3,10)|NK(1,85) <READMICRODATA> <SUPPRESS> GH(1,100) <WRITETABLE> (1,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac745d4e40.sbs\") <SUPPRESS> GH(2,100) <WRITETABLE> (2,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d842e78.sbs\")"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fichiers-temporaires-1","dir":"Articles","previous_headings":"Décomposition du processus > [2] Fonction micro_arb","what":"Fichiers temporaires","title":"τ-Argus depuis R","text":"Dans l’exemple précédent, les noms des fichiers en sortie (output_names) n’étaient pas précisés, ce qui conduit à la génération de noms de fichiers temporaires. Préciser le nom du fichier .arb n’est pas obligatoire non plus. Ces informations sont récupérables dans la valeur de retour de la fonction. sommaire ↑","code":"infos_arb <-   micro_arb(     asc_filename     = \"Z:/donnees.asc\",     explanatory_vars = list(\"V1\", c(\"V2\", \"V3\")),     safety_rules     = \"FREQ(3,10)\",     suppress         = \"GH(.,100)\",     output_type      = \"4\"   ) infos_arb #> $arb_filename #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac3b365bc5.arb\" #>  #> $output_names #> [1] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac104552d8.sbs\" #> [2] \"C:\\\\Users\\\\TMM7AN\\\\AppData\\\\Local\\\\Temp\\\\Rtmpq6q240\\\\RTA_adac164a1870.sbs\""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fonction-run_arb","dir":"Articles","previous_headings":"Décomposition du processus","what":"[3] Fonction run_arb","title":"τ-Argus depuis R","text":"Maintenant que les instructions ont été générées dans un fichier .arb, peut le soumettre à τ-Argus en mode batch. récupère la liste des tableaux secrétisés : run_arb est la seule fonction du package qui exécute τ-Argus. Elle nécessite donc que le logiciel soit accessible depuis le poste de travail. Seul l’argument arb_filename est obligatoire, car toutes les informations nécessaires sont présentes dans le fichier .arb. Des paramètres optionnels sont également disponibles : missing_dir : action à effectuer si un dossier où sera écrit le résultat n’existe pas (déclencher une erreur ou le créer) tauargus_exe : pour changer l’exécutable (surcharge l’option rtauargus.tauargus_exe le temps de la fonction) ; logbook : emplacement et nom du fichier contenant le journal d’erreurs ; show_batch_on_console : pour afficher ou non le déroulement du batch dans la console ; import : si désactivé, la fonction ne fait que générer les fichiers texte sans les importer dans R (voir section suivante pour plus de détails). Si les tabulations ont reçu un nom dans micro_arb, ces noms sont utilisés pour la liste de data.frames en sortie de run_arb (pas de noms définis dans l’exemple ci-dessus). Des vérifications sont effectuées avant le lancement effectif de τ-Argus : existence du logiciel sur le poste, des fichiers asc et rda, des dossiers où écrire les résultats, des variables à utiliser (croisements, variable de réponse, …) dans les métadonnées (fichier rda). sommaire ↑","code":"secret2 <- run_arb(\"Z:/donnees.arb\") #> Start of batch procedure; file: Z:\\donnees.arb #> <OPENMICRODATA> \"Z:\\donnees.asc\" #> <OPENMETADATA> \"Z:\\donnees.rda\" #> <SPECIFYTABLE> \"V1\"|\"VAL\"|| #> <SAFETYRULE> FREQ(3,10)|Wgt(1) #> <SPECIFYTABLE> \"V2\"\"V3\"|\"VAL\"|| #> <SAFETYRULE> FREQ(3,10)|NK(1,85) #> <READMICRODATA> #> Start explore file: Z:\\donnees.asc #> Start computing tables #> Table: V1 | VAL has been specified #> Table: V2 x V3 | VAL has been specified #> Tables have been computed #> Micro data file read; processing time 0 seconds #> Tables from microdata have been read #> <SUPPRESS> GH(1,100) #> Start of the hypercube protection for table V1 | VAL #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 1 #> The hypercube procedure has been applied #>                    1 cells have been suppressed #> <WRITETABLE> (1,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac745d4e40.sbs\") #> Table: V1 | VAL has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac745d4e40.sbs #> <SUPPRESS> GH(2,100) #> Start of the hypercube protection for table V2 x V3 | VAL #> End of hypercube protection. Time used 1 seconds #>                    Number of suppressions: 2 #> The hypercube procedure has been applied #>                    2 cells have been suppressed #> <WRITETABLE> (2,4,AS+SE+,\"C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d842e78.sbs\") #> Table: V2 x V3 | VAL has been written #>                    Output file name: C:\\Users\\TMM7AN\\AppData\\Local\\Temp\\Rtmpq6q240\\RTA_adac3d842e78.sbs #> End of TauArgus run  secret2 #> NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"fonction-import","dir":"Articles","previous_headings":"Décomposition du processus","what":"[4] Fonction import","title":"τ-Argus depuis R","text":"Cette fonction importe les résultats produits par τ-Argus (fichiers texte) à partir des informations contenues dans un fichier arb. Elle nécessite donc que le batch se soit déroulé sans erreur et que les fichiers soient toujours présents. Pour cette dernière raison, la fonction import est typiquement appelée depuis run_arb en paramétrant import = TRUE. Elle est aussi utilisable de manière indépendante (par exemple si ne souhaite pas relancer un batch qui mis beaucoup de temps à s’exécuter).","code":"secret2 <- import(\"Z:/donnees.arb\") #  produit le même résultat que run_arb(\"Z:/donnees.arb\", import = TRUE)"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"formats-acceptés","dir":"Articles","previous_headings":"Décomposition du processus > [4] Fonction import","what":"Formats acceptés","title":"τ-Argus depuis R","text":"Il n’est possible (à l’heure actuelle) que d’importer les résultats de type : \"2\" : csv pivot-table \"4\" : sbs output format Si l’import est impossible pour une tabulation donnée, un data.frame vide est retourné (avec un message d’avertissement).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"attributs-des-tabulations","dir":"Articles","previous_headings":"Décomposition du processus > [4] Fonction import","what":"Attributs des tabulations","title":"τ-Argus depuis R","text":"À chaque data.frame de la liste est associé un ensemble d’attributs, des métadonnées gardant une trace des spécifications passées à τ-Argus. Par exemple, pour secret2[[2]] (le deuxième tableau de secret2), y retrouve les paramètres que l’transmis à la fonction (les autres correspondent à des valeurs par défaut du package). sommaire ↑","code":"str(secret2[[2]]) #>  NULL"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"options-du-package","dir":"Articles","previous_headings":"","what":"Options du package","title":"τ-Argus depuis R","text":"Les options du package définissent les comportements par défaut des fonctions. Ces options sont utilisées si un argument obligatoire d’une fonction n’est pas renseigné. Elles permettent de ne pas répéter systématiquement le même paramètre à chaque appel d’une fonction. Le nom de l’option est le nom de l’argument d’une fonction précédé de rtauargus. : Par exemple, rtauargus.decimals sera la valeur utilisée si l’argument decimals de la fonction micro_asc_rda n’est pas renseigné par l’utilisateur. Au chargement, le package attribue une valeur par défaut à toutes les options de rtauargus qui ne sont pas encore déclarées. Les options déjà définies par l’utilisateur gardent leurs valeurs. Les options disponibles ainsi que leurs valeurs par défaut sont listées ci-dessous :","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"affichage","dir":"Articles","previous_headings":"Options du package","what":"Affichage","title":"τ-Argus depuis R","text":"Pour afficher les options définies pour la session en cours : Les valeurs sont identiques aux valeurs par défaut, hormis l’emplacement de τ-Argus, qui été préalablement modifié. Elles apparaissent dans l’ordre alphabétique. sommaire ↑","code":"rtauargus_options() #> $rtauargus.decimals #> [1] 0 #>  #> $rtauargus.hierleadstring #> [1] \"@\" #>  #> $rtauargus.import #> [1] FALSE #>  #> $rtauargus.is_tabular #> [1] TRUE #>  #> $rtauargus.linked #> [1] FALSE #>  #> $rtauargus.missing #> [1] \"\" #>  #> $rtauargus.missing_dir #> [1] \"stop\" #>  #> $rtauargus.output_options #> [1] \"AS+SE+\" #>  #> $rtauargus.output_type #> [1] \"4\" #>  #> $rtauargus.response_var #> [1] \"<freq>\" #>  #> $rtauargus.separator #> [1] \",\" #>  #> $rtauargus.show_batch_console #> [1] FALSE #>  #> $rtauargus.tauargus_exe #> [1] \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  #> $rtauargus.totcode #> [1] \"Total\" #>  #> $rtauargus.weighted #> [1] FALSE"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"modification-réinitialisation","dir":"Articles","previous_headings":"Options du package","what":"Modification, réinitialisation","title":"τ-Argus depuis R","text":"Pour modifier une ou plusieurs options, utiliser la syntaxe suivante (la même que celle employée pour modifier l’emplacement de τ-Argus) : Pour réinitialiser certaines options : Pour remettre toutes les valeurs par défaut (y compris le chemin vers τ-Argus modifié en début de démonstration), ne spécifier aucun argument : sommaire ↑","code":"options(   rtauargus.show_batch_console = FALSE,   rtauargus.output_options     = \"AS+SE+\",   rtauargus.output_type        = \"4\",   rtauargus.response_var       = \"VAL\" )  str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"AS+SE+\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"VAL\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi FALSE reset_rtauargus_options(\"rtauargus.response_var\", \"rtauargus.output_type\")  # Il est possible d'omettre le préfixe 'rtauargus.' # L'instruction suivante est équivalente : reset_rtauargus_options(\"response_var\", \"output_type\")  str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"AS+SE+\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"<freq>\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi FALSE reset_rtauargus_options()"},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"portée-locale-ou-globale","dir":"Articles","previous_headings":"Options du package","what":"Portée locale ou globale","title":"τ-Argus depuis R","text":"Comme toute fonction R, le paramétrage s’effectue en spécifiant chacun des arguments au moment de l’appel de la fonction (portée locale). Le système d’options du package permet par les instructions options(rtauargus.<option> = <valeur>) de définir des options de manière plus globale. Selon l’endroit où sont écrites ces instructions, la configuration perdurera plus ou moins longtemps : dans le script, pour un effet sur la session en cours uniquement ; dans un fichier de configuration utilisateur (.Rprofile…), pour permettre à un utilisateur de garder en mémoire ses préréglages d’une session sur l’autre. Le deuxième façon de procéder est à déconseiller si la chaîne de traitement se veut reproductible. En effet, un script identique exécuté sur deux machines différentes pourrait produire deux résultats différents. sommaire ↑","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"autres-fonctionnalités","dir":"Articles","previous_headings":"Autres informations","what":"Autres fonctionnalités","title":"τ-Argus depuis R","text":"Certaines fonctionnalités du package ne sont pas évoquées dans ce document de prise en main : gestion de tableaux liés (argument linked dans micro_arb) création de variables hiérarchiques à partir de microdonnées (fonction write_hrc). prise en compte de fichier apriori (argument apriori dans micro_arb) utilisation de la fonction rtauargus à partir de microdonnées déjà sous forme de fichier texte (et non de data.frame) lancement optimisé d’un grand nombre de croisements ayant les mêmes paramètres (règles de secret primaire, méthode de secret secondaire, …) : fonction rtauargus_plus Consulter l’aide de ces fonctions pour plus d’informations.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"idées-pour-la-suite","dir":"Articles","previous_headings":"Autres informations","what":"Idées pour la suite","title":"τ-Argus depuis R","text":"implémenter paramètres request… prendre en compte des données tabulées en entrée …","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"signaler-un-problème-suggérer-une-amélioration","dir":"Articles","previous_headings":"Autres informations","what":"Signaler un problème, suggérer une amélioration","title":"τ-Argus depuis R","text":"Le package est en cours de construction. Toutes les fonctionnalités de τ-Argus n’ont pas été intégrées (la finalité n’est pas de les intégrer toutes, seulement les plus fréquemment utilisées). Pour tout retour ou signalement d’erreur, utiliser de préférence ce lien (cliquer sur “New issue”). Nécessite d’être connecté au gitlab-Insee.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/articles/rtauargus_micro_fr.html","id":"à-propos-de-cette-vignette","dir":"Articles","previous_headings":"Autres informations","what":"À propos de cette vignette","title":"τ-Argus depuis R","text":"Auteur : Pierre-Yves Berrard Dernière mise à jour : 02/10/2022 Version de rtauargus utilisée : 1.1.0 Version de τ-Argus utilisée : TauArgus 4.2.2b1 Version de R utilisée : 4.1.3 sommaire ↑","code":""},{"path":"https://inseefrlab.github.io/rtauargus/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pierre-Yves Berrard. Author. Julien Jamme. Author, maintainer. Nathanaël Rastout. Author. Jeanne Pointet. Author. Félix Beroud. Author. Institut National de la Statistique et des Études Économiques. Copyright holder.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Berrard P, Jamme J, Rastout N, Pointet J, Beroud F (2022). rtauargus: Using Tau-Argus R. https://inseefrlab.github.io/rtauargus, https://github.com/inseefrlab/rtauargus, https://inseefrlab.github.io/rtauargus/.","code":"@Manual{,   title = {rtauargus: Using Tau-Argus from R},   author = {Pierre-Yves Berrard and Julien Jamme and Nathanaël Rastout and Jeanne Pointet and Félix Beroud},   year = {2022},   note = {https://inseefrlab.github.io/rtauargus, https://github.com/inseefrlab/rtauargus, https://inseefrlab.github.io/rtauargus/}, }"},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/index.html","id":"τ-argus-from-r","dir":"","previous_headings":"","what":"τ-Argus from R","title":"Using Tau-Argus from R","text":"rtauargus package provides R interface τ-Argus. allows : create inputs (rda, arb, hst tab files) data R format ; generate sequence instructions executed batch mode (arb file); launch τ-Argus batch command line; retrieve results R. different operations can executed one go, also modular way. allow integrate tasks performed τ-Argus processing chain written R. package presents additional functionalities, : managing protection several tables ; creating hierarchical variable correspondence table. ’s possible choose tabular microdata approach, tabular one , now , encouraged.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Using Tau-Argus from R","text":"recent stable version (recommended) Insee agents: Elsewhere: version development install specific version, add directory reference (commit tag), example \"inseefrlab/rtauargus@v-0.4.1\".","code":"install.packages(   \"rtauargus\",   repos = \"https://nexus.insee.fr/repository/r-public\" ) install.packages(\"remotes\") remotes::install_github(   \"InseeFrLab/rtauargus\",   build_vignettes = FALSE,   upgrade = \"never\" )"},{"path":"https://inseefrlab.github.io/rtauargus/index.html","id":"simple-example","dir":"","previous_headings":"","what":"Simple example","title":"Using Tau-Argus from R","text":"loading package, console displays information: particular, plausible location τ-Argus software predefined. can changed duration R session, follows: small adjustment done, package ready used. following demonstration, fictitious table used: primary rules, use two following ones: n-k dominance rule n=1 k = 85 minimum frequency rule n = 3 safety range 10. get results dominance rule, need specify largest contributor cell, corresponding MAX variable tabular data. default, function displays console logbook content user can read steps run τ-Argus. can retrieved logbook.txt file. verbose = FALSE, function can silenced. default, function returns original dataset one variable , called Status, directly resulting τ-Argus describing status cell follows: -: primary secret cell frequency rule; -B: primary secret cell dominance rule (1st contributor); -C: primary secret cell frequency rule (contributors case n>1); -D: secondary secret cell; -V: valid cells - need mask. files generated function written specified directory (dir_name argument). default format protected table csv can changed. τ-Argus files (.tab, .rda, .arb .txt) written directory, . go , can consult latest version τ-Argus manual downloadable : https://research.cbs.nl/casc/Software/TauManualV4.1.pdf. detailed overview available via vignette(\"rtauargus\").","code":"library(rtauargus) loc_tauargus <- \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" options(rtauargus.tauargus_exe = loc_tauargus) act_size <-   data.frame(     ACTIVITY = c(\"01\",\"01\",\"01\",\"02\",\"02\",\"02\",\"06\",\"06\",\"06\",\"Total\",\"Total\",\"Total\"),     SIZE = c(\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\",\"tr1\",\"tr2\",\"Total\"),     VAL = c(100,50,150,30,20,50,60,40,100,190,110,300),     N_OBS = c(10,5,15,2,5,7,8,6,14,20,16,36),     MAX = c(20,15,20,20,10,20,16,38,38,20,38,38)   ) ex1 <- tab_rtauargus(   act_size,   dir_name = \"tauargus_files\",   files_name = \"ex1\",   explanatory_vars = c(\"ACTIVITY\",\"SIZE\"),   safety_rules = \"FREQ(3,10)|NK(1,85)\",   value = \"VAL\",   freq = \"N_OBS\",   maxscore = \"MAX\",   totcode = c(ACTIVITY=\"Total\",SIZE=\"Total\") ) ex1 #>    ACTIVITY  SIZE VAL N_OBS MAX Status #> 1        01 Total 150    15  20      V #> 2        01   tr1 100    10  20      V #> 3        01   tr2  50     5  15      V #> 4        02 Total  50     7  20      V #> 5        02   tr1  30     2  20      A #> 6        02   tr2  20     5  10      D #> 7        06 Total 100    14  38      V #> 8        06   tr1  60     8  16      D #> 9        06   tr2  40     6  38      B #> 10    Total Total 300    36  38      V #> 11    Total   tr1 190    20  20      V #> 12    Total   tr2 110    16  38      V"},{"path":"https://inseefrlab.github.io/rtauargus/index.html","id":"important-notes","dir":"","previous_headings":"","what":"Important notes","title":"Using Tau-Argus from R","text":"functions rtauargus calling τ-Argus require software accessible workstation. download τ-Argus done dedicated page sdcTools git repository. _The package developed basis open source versions τ-Argus (versions 4.2 ), particular latest version available time development (4.2.2b1). compatible version 3.5.**_","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/activity_corr_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Correspondence table describing the business sectors hierarchy. — activity_corr_table","title":"Correspondence table describing the business sectors hierarchy. — activity_corr_table","text":"dataset describing nesting three levels business sectors, useful working ACTIVITY variables turnover_ datasets.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/activity_corr_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Correspondence table describing the business sectors hierarchy. — activity_corr_table","text":"","code":"activity_corr_table"},{"path":"https://inseefrlab.github.io/rtauargus/reference/activity_corr_table.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Correspondence table describing the business sectors hierarchy. — activity_corr_table","text":"data frame 92 rows 3 variables: A10 business sectors 10 categories A21 business sectors 21 categories A88 business sectors 88 categories","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/activity_corr_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Correspondence table describing the business sectors hierarchy. — activity_corr_table","text":"Use write_hrc2 function create .hrc file correspondence table.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":null,"dir":"Reference","previous_headings":"","what":"Imports results from Tau-Argus — import","title":"Imports results from Tau-Argus — import","text":"Imports R results generated Tau-Argus information contained arb file.  (Importe dans R les résultats générés par Tau-Argus à partir des informations contenues dans un fichier arb.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Imports results from Tau-Argus — import","text":"","code":"import(arb_filename)"},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Imports results from Tau-Argus — import","text":"arb_filename name arb file (extension) containing information needed import.  (nom du fichier arb (avec extension) contenant les   informations nécessaires à l'import.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Imports results from Tau-Argus — import","text":"list one data.frames. data.frame corresponds result tabulation. names tables filled lines batch form // <TABLE_ID> \"...\" recovered. (Une liste d'un ou plusieurs data.frames. Chaque data.frame correspond   au résultat d'une tabulation. Les noms des tableaux renseignés dans les   lignes du batch de la forme // <TABLE_ID> \"...\" sont récupérés.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Imports results from Tau-Argus — import","text":"Requires batch executed finished without error. order import immediately batch executed, function often called via link{run_arb} (setting import = TRUE). possible (moment) import results type \"2\" (csv pivot-table) \"4\" (sbs). possible import given tabulation, empty data.frame returned (message). (Nécessite que le batch ait été exécuté et se soit terminé sans erreur. Afin d'importer immédiatement après exécution du batch, cette fonction sera ainsi le plus souvent appelée via run_arb (en paramétrant import = TRUE). Il n'est possible (pour l'instant) que d'importer les résultats de type \"2\" (csv pivot-table) et \"4\" (sbs). En cas d'impossibilité de l'import pour une tabulation donnée, un data.frame vide est retourné (avec un message d'avertissement).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"attributes","dir":"Reference","previous_headings":"","what":"Attributes","title":"Imports results from Tau-Argus — import","text":"data.frame associated set attributes (metadata) allowing keep trace specifications passed Tau-Argus. Attributes systematically present : explanatory_vars, response_var, safetyrule, suppress, linked, output_type. Attributes present corresponding option filled user: shadow_var, cost_var, output_options. (À chaque data.frame est associé un ensemble d'attributs (métadonnées) permettant de conserver une trace des spécifications passées à Tau-Argus. Attributs systématiquement présents : explanatory_vars, response_var, safetyrule, suppress, linked, output_type. Attributs présents uniquement si l'option correspondante été renseignée par l'utilisateur : shadow_var, cost_var, output_options.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/import.html","id":"see-also","dir":"Reference","previous_headings":"","what":"See also","title":"Imports results from Tau-Argus — import","text":"function rtauargus, uses function inherits parameters.  (La fonction rtauargus, qui utilise cette fonction et hérite de ses paramètres.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a batch file (.arb) for microdata — micro_arb","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"Creates batch file microdata, executable Tau-Argus command line.  (Crée un fichier batch pour microdonnées, exécutable par Tau-Argus en ligne de commande.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"","code":"micro_arb(   arb_filename = NULL,   asc_filename,   rda_filename = NULL,   explanatory_vars,   response_var = getOption(\"rtauargus.response_var\"),   shadow_var = NULL,   cost_var = NULL,   safety_rules,   weighted = getOption(\"rtauargus.weighted\"),   suppress,   linked = getOption(\"rtauargus.linked\"),   output_names = NULL,   output_type = getOption(\"rtauargus.output_type\"),   output_options = getOption(\"rtauargus.output_options\"),   apriori = NULL,   gointeractive = FALSE )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"arb_filename name generated arb file (extension). specified, temporary file.  (nom du fichier arb généré (avec extension). Si non renseigné, un fichier temporaire.) asc_filename [required] name asc file (extension).  ([obligatoire] nom du fichier asc (avec extension).) rda_filename name rda file (extension). filled , asc_filename extension \"rda\" instead \"asc\".  (nom du fichier rda (avec extension). Si non renseigné, asc_filename avec l'extension \"rda\" à la place de \"asc\".) explanatory_vars [required] categorical variables, form list vectors. element list vector variable names forming tab. Example: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) first table crossing CJ x A21 second table crossing SEXE x REGION. single tabulation, simple vector variables crossed accepted (need list(...)).  ([obligatoire] variables catégorielles, sous forme de liste de vecteurs. Chaque élément de la liste est un vecteur des noms des variables formant une tabulation. Exemple: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) pour la première table croisant CJ x A21 et la seconde croisant SEXE x REGION Si une seule tabulation, un simple vecteur des variables à croiser est accepté (pas besoin de list(...)).) response_var response variable summed, counted \"<freq>\". single value many values tabs.  (variable de réponse à sommer, ou comptage si \"<freq>\". Une seule valeur ou autant de valeurs que de tabulations.) shadow_var variable(s) applying primary secret. filled , response_var used Tau-Argus.  (variable(s) pour l'application du secret primaire. Si non renseigné, response_var sera utilisé par Tau-Argus.) cost_var cost variable(s) secondary secret.  (variable(s) de coût pour le secret secondaire.) safety_rules [required] primary secret rule(s). String Tau-Argus batch syntax. weighting treated separate parameter (specify WGT , use weighted).  ([obligatoire] règle(s) de secret primaire. Chaîne de caractères en syntaxe batch Tau-Argus. La pondération est traitée dans un paramètre à part (ne pas spécifier WGT ici, utiliser le paramètre weighted).) weighted indicator(s) (boolean).  (indicatrice(s) de pondération (booléen).) suppress [required] secret management method(s) secondary (Tau-Argus batch syntax). method tabulation, first parameter (table number) ignored renumbered automatically (see section 'Syntax').  ([obligatoire] méthode(s) de gestion du secret secondaire (syntaxe batch de Tau-Argus). Si la méthode est la même pour chaque tabulation, le premier paramètre (numéro du tableau) sera ignoré et renuméroté automatiquement (voir la section 'Syntax').) linked process secondary secret jointly tabs. one delete command allowed case (applied tables).  (pour traiter le secret secondaire conjointement sur toutes les tabulations. Une seule commande suppress autorisée dans ce cas (appliquée à tous les tableaux).) output_names names output files. filled , number file names must number tabs. left empty, many temporary file names tabs generated.  (noms des fichiers en sortie. Si renseigné, obligatoirement autant de noms de fichiers que de tabulations. Si laissé vide, autant de noms de fichiers temporaires que de tabulations seront générés.) output_type format output files (Tau-Argus codification). Default value package: \"2\" (csv pivot-table).  (format des fichiers en sortie (codification Tau-Argus). Valeur par défaut du package : \"2\" (csv pivot-table).) output_options additional options output files. default value package: \"+\" (status display). specify option, \"\".  (options supplémentaires des fichiers en sortie. Valeur par défaut du package : \"+\" (affichage du statut). Pour ne spécifier aucune option, \"\".) apriori information file(s) priori. See syntax.  (fichier(s) d'informations priori. Voir ci-dessous pour la syntaxe.) gointeractive possibility launch batch menu Tau-Argus.  (pour avoir la possibilité de lancer le batch depuis le menu de Tau-Argus (FALSE par défaut).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"list two elements: arb filename names output files (useful get back randomly generated names) (Une liste de deux éléments : le nom du fichier arb, les noms des fichiers en sortie (utile pour récupérer les noms générés aléatoirement).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"function check asc rda files exist.  (La fonction ne vérifie pas si les fichiers asc et rda existent.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"syntax","dir":"Reference","previous_headings":"","what":"Syntax","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"Tau-Argus can handle multiple tabs set microdata. Passing single value option apply processing tab. differentiated options, passing vector containing many values tabs. lengths match (recommended), recycling performed. Unless otherwise stated, use syntax mentioned documentation Tau-Argus. Special syntax suppress : first parameter Tau-Argus syntax tab number. method identical tabs, first parameter ignored numbers automatically recalculated batch. writing suppress = \"GH(n,100)\", n thus transformed 1 first tab, 2 second tab, etc. (Tau-Argus peut traiter plusieurs tabulations pour un même jeu de microdonnées. Passer une seule valeur pour une option appliquera le même traitement à chaque tabulation. Pour des options différenciées, passer un vecteur contenant autant de valeurs que de tabulations. Si les longueurs ne correspondent pas (déconseillé), un recyclage est effectué. Sauf mention contraire, utiliser la syntaxe mentionnée dans la documentation de Tau-Argus. Syntaxe spéciale pour suppress : le premier paramètre dans la syntaxe Tau-Argus est le numéro de la tabulation. Si la méthode est identique pour toutes les tabulations, ce premier paramètre sera ignoré et les numéros recalculés automatiquement pour le batch. Dans l'écriture suppress = \"GH(n,100)\", n sera ainsi transformé en 1 pour la première tabulation, en 2 pour la deuxième tabulation, etc.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"table-identifiers","dir":"Reference","previous_headings":"","what":"Table identifiers","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"list explanatory_vars names, used batch give identifier table, form comment line (// <TABLE_ID> \"...\"). reused import function name R format arrays tables output. (Si la liste explanatory_vars comporte des noms, ceux-ci seront utilisés dans le batch pour donner un identifiant au tableau, sous la forme d'une ligne de commentaire (// <TABLE_ID> \"...\"). Ils seront réutilisés par la fonction import pour nommer les tableaux formats R en sortie.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"use-an-apriori-file","dir":"Reference","previous_headings":"","what":"Use an apriori file","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"possible provide apriori file (.hst) tabulation. easiest way pass vector containing many hst files tabs. file tabs, specify name file (used tabs). additional options optional. change default values, pass list hst file(s) first item complete elements names sep separator, ignore_err IgnoreError exp_triv ExpandTrivial. filenames, specify one value per parameter many values tabs. (Il est possible de fournir un fichier apriori (.hst) pour chaque tabulation. La manière la plus simple est de passer un vecteur contenant autant de noms de fichiers hst que de tabulations. Si le fichier est le même pour toutes les tabulations, spécifier le nom de ce fichier (il sera utilisé pour toutes les tabulations). Les options supplémentaires sont facultatives. Pour modifier les valeurs par défaut, passer une liste ayant comme premier élément le(s) fichier(s) hst et compléter avec les éléments portant les noms sep pour le séparateur, ignore_err pour IgnoreError et exp_triv pour ExpandTrivial. Comme pour les noms de fichiers, spécifier une seule valeur par paramètre ou autant de valeurs que de tabulations.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"see-also","dir":"Reference","previous_headings":"","what":"See also","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"function rtauargus, uses function inherits parameters.  (La fonction rtauargus, qui utilise cette fonction et hérite de ses paramètres.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_arb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a batch file (.arb) for microdata — micro_arb","text":"","code":"# creation of the .arb file infos_arb <- micro_arb(   asc_filename = \"donnees.asc\",   explanatory_vars = list(c(\"REGION\", \"CJ\"), c(\"REGION\")),   response_var = c(\"CA\", \"<freq>\"),   safety_rules = c(\"NK(1,85)|FREQ(3,10)\", \"FREQ(3,10)\"),   suppress = \"GH(.,100)\",   output_names = c(\"tab1.csv\", \"~/tab2.csv\"),   output_options = c(\"AS+SE+\", \"SE+\"),   output_type = \"2\" )  # Content of the created file visible in the R console # (Visualisation du contenu du fichier dans la console) file.show(infos_arb$arb_filename, pager = \"console\") #> Warning: error in running command"},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates asc and rda files from microdata — micro_asc_rda","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"Creates fixed length text file (asc) metadata file (rda) microdata additional information.  (Crée un fichier texte de longueur fixe (asc) et un fichier de métadonnées (rda) à partir de microdonnées et d'informations additionnelles.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"","code":"micro_asc_rda(   microdata,   asc_filename = NULL,   rda_filename = NULL,   weight_var = NULL,   holding_var = NULL,   decimals = getOption(\"rtauargus.decimals\"),   hrc = NULL,   hierleadstring = getOption(\"rtauargus.hierleadstring\"),   totcode = getOption(\"rtauargus.totcode\"),   missing = getOption(\"rtauargus.missing\"),   codelist = NULL,   request = NULL )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"microdata [required] data.frame containing microdata.  ([obligatoire] data.frame contenant les microdonnées.) asc_filename name asc file (extension). filled , temporary file.  (nom du fichier asc (avec extension). Si non renseigné, un fichier temporaire.) rda_filename name rda file (extension). filled , asc_filename extension \"rda\" instead \"asc\".  (nom du fichier rda (avec extension). Si non renseigné, asc_filename avec l'extension \"rda\" à la place de \"asc\".) weight_var name weight variable.  (nom de la variable de poids.) holding_var nom de la variable de holding. (name holding variable.) decimals minimum number decimals display (see section 'Number decimals'). (nombre minimal de décimales à afficher (voir section 'Number decimals').) hrc information hierarchical variables (see section section 'Hierarchical variables').  (informations sur les variables hiérarchiques (voir section 'Hierarchical variables').) hierleadstring character , repeated n times, indicates value n levels deep hierarchy.  (caractère qui, répété n fois, indique que la valeur est à n niveaux de profondeur dans la hiérarchie.) totcode code(s) total categorical variable (see section 'Specific parameters' syntax parameter). variables specified (neither default explicitly) assigned value rtauargus.totcode.  (code(s) pour le total d'une variable catégorielle (voir section 'Specific parameters' pour la syntaxe de ce paramètre). Les variables non spécifiées (ni par défaut, ni explicitement) se verront attribuer la valeur de rtauargus.totcode.) missing code(s) missing value (see section 'Specific parameters' syntax parameter).  (code(s) pour une valeur manquante (voir section   'Specific parameters' pour la syntaxe de ce paramètre).) codelist file(s) containing labels categorical variables (see section 'Specific parameters' syntax parameter).  (fichier(s) contenant les libellés des variables catégorielles   (voir section 'Specific parameters' pour la syntaxe de ce paramètre).) request (yet implemented - pas encore implémenté)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"Returns names asc rda files list (invisibly). invisibly). Empty columns (filled NA empty strings) strings) exported asc file. warning message list affected columns. (Renvoie les noms des fichiers asc et rda sous forme de liste (de   manière invisible). Les colonnes vides (remplies de NA ou de chaînes   de caractères vides) ne seront pas exportées dans le fichier asc. Un   message d'avertissement listera les colonnes concernées.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"specific-parameters","dir":"Reference","previous_headings":"","what":"Specific parameters","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"parameters totcode, missing codelist filled vector indicating value take variable. names elements vector give variable concerned, elements vector give value parameter Tau-Argus. unnamed element element default value, assigned variables can take parameter. example : totcode = \"\" : écrit <TOTCODE> \"\"   categorical variables totcode = c(\"\", GEO = \"France\") : idem, except     GEO variable (Les paramètres totcode, missing et codelist sont à renseigner sous la forme d'un vecteur indiquant la valeur à prendre pour chaque variable. Les noms des éléments du vecteur donnent la variable concernée, les éléments du vecteur donnent la valeur du paramètre pour Tau-Argus. Un élément non nommé constituera la valeur par défaut, qui sera attribuée à toutes les variables pouvant prendre ce paramètre. Par exemple : totcode = \"Ensemble\" : écrit <TOTCODE> \"Ensemble\" pour     toutes les variables catégorielles totcode = c(\"Ensemble\", GEO = \"France\") : idem, sauf pour la     variable GEO )","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"hierarchical-variables","dir":"Reference","previous_headings":"","what":"Hierarchical variables","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"parameter hrc follows syntax rules totcode, missing codelist (named vector containing many elements variables describe). also particularity accept several ways specifying values associated hierarchical variables. define hierarchy based positions characters (hierierlevels), pass sequence integers separated spaces. Example : c(CODECOM = \"2 3 0 0 0\") hierarchy defined separate hrc file (hiercodelist), function expects location file (possible hiercodelist differs default option package). case, can write explicitly path existing file file (c(A38 = \"a38.hrc\")), also make call write_hrc generate hrc file microdata. Example : c(A38 = write_hrc(microdata, c(\"A38\", \"A21\", \"A10\"))) shortcut call write variables constituting hierarchy separated \">\". case, microdata hierleadstring write_hrc uses declared micro_asc_rda. Example : c(A38 = \"A38 > A21 > A10\") (number spaces \">\") last two methods require creation temporary file. reusable hrc file, necessary create beforehand using write_hrc. three methods require elements vector parameter named (name variable), even one element. (Le paramètre hrc obéit aux mêmes règles de syntaxe que totcode, missing et codelist (vecteur nommé contenant autant d'éléments que de variables à décrire). Il présente de plus la particularité d'accepter plusieurs façons de spécifier les valeurs associées aux variables hiérarchiques. Pour définir une hiérarchie basée sur les positions des caractères (hierlevels), passer une suite de nombre entiers séparés par des espaces. Si la hiérarchie est définie dans un fichier hrc à part (hiercodelist), la fonction attend l'emplacement de ce fichier (et un éventuel hierleadstring s'il diffère de l'option par défaut du package). Dans ce cas, peut écrire explicitement le chemin vers un fichier existant (c(A38 = \"a38.hrc\")), mais aussi passer un appel à write_hrc qui génèrera un fichier hrc à partir de microdonnées. Un raccourci pour cet appel est d'écrire les variables constituant la hiérarchie séparées par des \">\". Dans ce cas, les microdonnées et hierleadstring qu'utilise write_hrc sont ceux déclarés dans micro_asc_rda. Exemple : c(A38 = \"A38 > A21 > A10\") (nombre d'espaces quelconque avant et après les \">\") Les deux dernières méthodes passent par la création d'un fichier temporaire. Pour un fichier hrc réutilisable, il est nécessaire de le créer au préalable à l'aide de write_hrc. Les trois méthodes nécessitent que les éléments du vecteur en paramètre soient nommés (avec le nom de la variable), même s'il n'y qu'un seul élément.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"number-of-decimals","dir":"Reference","previous_headings":"","what":"Number of decimals","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"parameter decimals indicates minimum number decimals appear output file (whatever number decimals actually present microdata). applies real variables (double) integer variables (integer). add zeros integer variable, convert .double beforehand. digits decimal point may incorrect asc file total number digits (decimal separator) greater 15. See write.fwf (function used writing asc file) details. (Le paramètre decimals indique le nombre minimal de décimales à faire figurer dans le fichier en sortie (quel que soit le nombre de décimales effectivement présent dans microdata). Il s'applique à toutes les variables réelles (double) mais pas aux variables entières (integer). Pour ajouter des zéros à une variable entière, la convertir avec .double au préalable. Les chiffres après la virgule peuvent être incorrects dans le fichier asc si le nombre total de chiffres (avant ou après le séparateur décimal) est supérieur à 15. Voir write.fwf (fonction utilisée pour écrire le fichier asc) pour plus de détails.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"see-also","dir":"Reference","previous_headings":"","what":"See also","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"function rtauargus, uses function inherits parameters.  (La fonction rtauargus, qui utilise cette fonction et hérite de ses paramètres.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/micro_asc_rda.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates asc and rda files from microdata — micro_asc_rda","text":"","code":"# dummy data/donnees fictives micro_df <-   data.frame(     GEO   = c(\"443\", \"541\", \"543\"),     A10   = c( \"AZ\",  \"BE\",  \"BE\"),     A21   = c(  \"A\",   \"B\",   \"C\"),     DIPL  = c( \"01\",  \"??\",  \"02\"),     CA    = c(  100,     0,     7),     POIDS = c(    1,  2.71,   4.2)   )  # creation asc + rda res <-   micro_asc_rda(     microdata  = micro_df,     weight_var = \"POIDS\",     decimals   = 1,     hrc        = c(A21 = \"A21>A10\", GEO = \"2 1 0\", DIPL = \"dipl.hrc\"),     totcode    = c(GEO = \"France\"),     missing    = c(DIPL = \"??\")   )  # Content of output files/visualisation des fichiers produits file.show(   res$asc_filename, res$rda_filename,   header = unlist(res),   pager = \"internal\" ) #> Warning: error in running command"},{"path":"https://inseefrlab.github.io/rtauargus/reference/nuts23_fr_corr_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Correspondence table describing the NUTS hierarchy. — nuts23_fr_corr_table","title":"Correspondence table describing the NUTS hierarchy. — nuts23_fr_corr_table","text":"dataset describing nesting NUTS2 NUTS3 levels Metropolitan France, useful working NUTS variables turnover_ datasets.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/nuts23_fr_corr_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Correspondence table describing the NUTS hierarchy. — nuts23_fr_corr_table","text":"","code":"nuts23_fr_corr_table"},{"path":"https://inseefrlab.github.io/rtauargus/reference/nuts23_fr_corr_table.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Correspondence table describing the NUTS hierarchy. — nuts23_fr_corr_table","text":"data frame 92 rows 3 variables: NUTS2 NUTS2 levels France - equivalent French \"Régions\" NUTS3 NUTS3 levels France - equivalent French \"Départements\"","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/nuts23_fr_corr_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Correspondence table describing the NUTS hierarchy. — nuts23_fr_corr_table","text":"Use write_hrc2 function create .hrc file correspondence table.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","title":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","text":"rtauargus provides R interface Tau-Argus.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","text":"allows : create inputs (rda, arb, hst tab files) data R format ; generate sequence instructions executed batch mode (arb file); launch τ-Argus batch command line; retrieve results R. different operations can executed one go, also modular way. allow integrate tasks performed τ-Argus processing chain written R. package presents additional functionalities, : - managing protection several tables ; - creating hierarchical variable correspondence table. possible choose tabular microdata approach, tabular  one , now , encouraged. syntax arguments close batch syntax Tau-Argus batch syntax. allows use large number functions without multiplying arguments functions. Moreover, package can adapted easily possible modifications software (new available methods, additional options...). syntax rules writing batch can found  Tau-Argus reference manual.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus-package.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","text":"package developped Tau-Argus software v.4.2. compatible  v.3.5 Tau-Argus earlier.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus-package.html","id":"localisation-of-tauargus-exe","dir":"Reference","previous_headings":"","what":"Localisation of TauArgus.exe","title":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","text":"function tab_rtauargus, via run_arb, needs know TauArgus.exe file located disk.  option rtauargus.tauargus_exe contains information  location filled just loading package. code modify default location : options(rtauargus.tauargus_exe = \"path//TauArgus.exe\") persists current R session. instruction can placed specific program file persist  session. also possible keep information permanently  writing .Rprofile example.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus-package.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Package 'rtauargus' : Tau-Argus depuis R — rtauargus-package","text":"Tau-Argus : source code,    last release download, support(sdcTools github repository) manual   (CBS website)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":null,"dir":"Reference","previous_headings":"","what":"Protects tables from microdata — rtauargus","title":"Protects tables from microdata — rtauargus","text":"Protects tables built microdata specifications crossings. function allows perform complete process, namely creation asc rda files, construction arb file, effective launching Tau-Argus eventual recovery results R.  (Secrétise des tableaux construits à partir de microdonnées et des spécifications des croisements. La fonction permet d'effectuer le processus complet, à savoir la création des fichiers asc et rda, la construction du fichier arb, le lancement effectif de Tau-Argus et la récupération éventuelle des résultats dans R.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Protects tables from microdata — rtauargus","text":"","code":"rtauargus(microdata, explanatory_vars, safety_rules, suppress, ...)"},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Protects tables from microdata — rtauargus","text":"microdata [required] data.frame containing microdata (path text files already present: see section Microdata already text files).  ([obligatoire] data.frame contenant les microdonnées   (ou chemin vers des fichiers texte déjà présents : voir section   Microdata already text files).) explanatory_vars [required] categorical variables, form list vectors. element list vector variable names forming tab. Example: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) first table crossing CJ x A21 second table crossing SEXE x REGION. single tabulation, simple vector variables crossed accepted (need list(...)).  ([obligatoire] variables catégorielles, sous forme de liste de vecteurs. Chaque élément de la liste est un vecteur des noms des variables formant une tabulation. Exemple: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) pour la première table croisant CJ x A21 et la seconde croisant SEXE x REGION Si une seule tabulation, un simple vecteur des variables à croiser est accepté (pas besoin de list(...)).) safety_rules [required] primary secret rule(s). String Tau-Argus batch syntax. weighting treated separate parameter (specify WGT , use weighted).  ([obligatoire] règle(s) de secret primaire. Chaîne de caractères en syntaxe batch Tau-Argus. La pondération est traitée dans un paramètre à part (ne pas spécifier WGT ici, utiliser le paramètre weighted).) suppress [required] secret management method(s) secondary (Tau-Argus batch syntax). method tabulation, first parameter (table number) ignored renumbered automatically (see section 'Syntax').  ([obligatoire] méthode(s) de gestion du secret secondaire (syntaxe batch de Tau-Argus). Si la méthode est la même pour chaque tabulation, le premier paramètre (numéro du tableau) sera ignoré et renuméroté automatiquement (voir la section 'Syntax').) ... optional parameters micro_asc_rda, micro_arb run_arb. See help functions.  (paramètres optionnels pour micro_asc_rda, micro_arb    et run_arb. Voir l'aide de ces fonctions.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Protects tables from microdata — rtauargus","text":"import = TRUE, list data.frames (protected tables), NULL otherwise. (Si import = TRUE, une liste de data.frames (tableaux   secrétisés), NULL sinon.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Protects tables from microdata — rtauargus","text":"function executes sequentially functions: micro_asc_rda -> micro_arb -> run_arb Intermediate files without name entered (asc_filename...) created temporary folder, randomly generated names. mechanism allows user abstract preparation preparation data maintain entire chain processing R. (La fonction exécute séquentiellement les fonctions : micro_asc_rda ->     micro_arb ->     run_arb Les fichiers intermédiaires sans nom renseigné (asc_filename...) seront créés dans un dossier temporaire, avec des noms générés aléatoirement. Ce mécanisme permet à l'utilisateur de s'abstraire de la préparation des données propre à Tau-Argus et de maintenir l'intégralité de la chaîne de traitements dans R.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"microdata-already-as-text-files","dir":"Reference","previous_headings":"","what":"Microdata already as text files","title":"Protects tables from microdata — rtauargus","text":"use existing asc rda files already existing, possible provide, instead data.frame, character vector indicating path files. first element vector asc file, second element rda file. rda file can omitted name asc file (except extension). Use option start whole process without generation text data. specify asc_filename rda_filename (used name text files created, irrelevant ). Pour utiliser des fichiers asc et rda existant déjà, il est possible de fournir à la place du data.frame un vecteur caractère indiquant le chemin de ces fichiers. Le premier élément de ce vecteur est le fichier asc, le deuxième élément le fichier rda. Le fichier rda peut être omis s'il porte le même nom que le fichier asc (à l'extension près). Utiliser cette option pour lancer le processus complet sans la génération  des données en texte. Ne pas spécifier asc_filename ou  rda_filename (sert à nommer les fichiers texte à créer, ce qui est  sans objet ici).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"syntax","dir":"Reference","previous_headings":"","what":"Syntax","title":"Protects tables from microdata — rtauargus","text":"Tau-Argus can handle multiple tabs set microdata. Passing single value option apply processing tab. differentiated options, passing vector containing many values tabs. lengths match (recommended), recycling performed. Unless otherwise stated, use syntax mentioned documentation Tau-Argus. Special syntax suppress : first parameter Tau-Argus syntax tab number. method identical tabs, first parameter ignored numbers automatically recalculated batch. writing suppress = \"GH(n,100)\", n thus transformed 1 first tab, 2 second tab, etc. (Tau-Argus peut traiter plusieurs tabulations pour un même jeu de microdonnées. Passer une seule valeur pour une option appliquera le même traitement à chaque tabulation. Pour des options différenciées, passer un vecteur contenant autant de valeurs que de tabulations. Si les longueurs ne correspondent pas (déconseillé), un recyclage est effectué. Sauf mention contraire, utiliser la syntaxe mentionnée dans la documentation de Tau-Argus. Syntaxe spéciale pour suppress : le premier paramètre dans la syntaxe Tau-Argus est le numéro de la tabulation. Si la méthode est identique pour toutes les tabulations, ce premier paramètre sera ignoré et les numéros recalculés automatiquement pour le batch. Dans l'écriture suppress = \"GH(n,100)\", n sera ainsi transformé en 1 pour la première tabulation, en 2 pour la deuxième tabulation, etc.)","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Protects tables from microdata — rtauargus","text":"","code":"if (FALSE) { rtauargus(   microdata = data.frame(V1 = c(\"A\", \"A\", \"B\", \"C\", \"A\"), V2 = \"Z\"),   explanatory_vars = c(\"V1\", \"V2\"),   safety_rules = \"FREQ(3,10)\",   suppress = \"GH(.,100)\",   output_options = \"AS+\" # (example of optional parameter for micro_arb) )}"},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_options.html","id":null,"dir":"Reference","previous_headings":"","what":"Manages options of rtauargus package — rtauargus_options","title":"Manages options of rtauargus package — rtauargus_options","text":"Manages (displays, modifies, resets) options rtauargus package.  Gère les options du package (affiche, modifie, réinitialise).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_options.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Manages options of rtauargus package — rtauargus_options","text":"","code":"rtauargus_options()  # options(rtauargus.<opt> = <val>)  reset_rtauargus_options(...)"},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_options.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Manages options of rtauargus package — rtauargus_options","text":"... names options reset, separated commas. name specified, options reset. prefix \"rtauargus.\" required.  noms des options à réinitialiser, séparés par des virgules. Si   aucun nom n'est spécifié, toutes les options du package seront   réinitialisées. Le préfixe \"rtauargus.\" est facultatif.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_options.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Manages options of rtauargus package — rtauargus_options","text":"options package define default behaviour functions. options used mandatory argument function set user. let systematically repeat parameter call function. name option name function prefixed rtauargus. : example, rtauargus.decimals used argument decimals micro_asc_rda function set user. loading package, rtauargus options, already set user, set default values (see table ). already defined options keep values set user. options can set session following instruction options(rtauargus.... = ...), configuration file user written options instructions, latter proper way reproducibility sought. Les options du package définissent les comportements par défaut des fonctions. user inadvertently removes options, functions use default values package. (Ces options sont utilisées si un argument obligatoire d’une fonction n’est pas renseigné. Elles permettent de ne pas répéter systématiquement le même paramètre à chaque appel d'une fonction. Le nom de l’option est le nom de l’argument d’une fonction précédé de rtauargus. : Par exemple, rtauargus.decimals sera la valeur utilisée si l’argument decimals de la fonction micro_asc_rda n’est pas renseigné par l’utilisateur. Au chargement, le package attribue une valeur par défaut à toutes les options de rtauargus qui ne sont pas encore déclarées (cf. tableau ci-dessous). Les options déjà définies par l'utilisateur gardent leurs valeurs. Elles peuvent être redéfinies pour une session par une instruction options(rtauargus.... = ...), ou de manière globale si de telles instructions sont placées dans un fichier de configuration propre à l'utilisateur (fortement déconseillé si le programme vocation à être reproductible). En cas d'effacement accidentel d'une option par l'utilisateur, les fonctions utiliseront les valeurs par défaut du package.)","code":""},{"path":[]},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_options.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Manages options of rtauargus package — rtauargus_options","text":"","code":"rtauargus_options() #> $rtauargus.decimals #> [1] 0 #>  #> $rtauargus.hierleadstring #> [1] \"@\" #>  #> $rtauargus.import #> [1] FALSE #>  #> $rtauargus.is_tabular #> [1] TRUE #>  #> $rtauargus.linked #> [1] FALSE #>  #> $rtauargus.missing #> [1] \"\" #>  #> $rtauargus.missing_dir #> [1] \"stop\" #>  #> $rtauargus.output_options #> [1] \"\" #>  #> $rtauargus.output_type #> [1] \"4\" #>  #> $rtauargus.response_var #> [1] \"<freq>\" #>  #> $rtauargus.separator #> [1] \",\" #>  #> $rtauargus.show_batch_console #> [1] FALSE #>  #> $rtauargus.tauargus_exe #> [1] \"Y:/Logiciels/TauArgus/TauArgus.exe\" #>  #> $rtauargus.totcode #> [1] \"Total\" #>  #> $rtauargus.weighted #> [1] FALSE #>   # modifies some options options(   rtauargus.tauargus_exe = \"Z:/tmp/TauArgus.exe\",   rtauargus.output_type = \"4\",   rtauargus.weighted = TRUE ) str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"<freq>\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Z:/tmp/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi TRUE  # resets some options (prefix \"rtauargus.\" facultatif) reset_rtauargus_options(\"output_type\", \"rtauargus.tauargus_exe\") str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"<freq>\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi TRUE  # resets everything reset_rtauargus_options() str(rtauargus_options()) #> List of 15 #>  $ rtauargus.decimals          : int 0 #>  $ rtauargus.hierleadstring    : chr \"@\" #>  $ rtauargus.import            : logi FALSE #>  $ rtauargus.is_tabular        : logi TRUE #>  $ rtauargus.linked            : logi FALSE #>  $ rtauargus.missing           : chr \"\" #>  $ rtauargus.missing_dir       : chr \"stop\" #>  $ rtauargus.output_options    : chr \"\" #>  $ rtauargus.output_type       : chr \"4\" #>  $ rtauargus.response_var      : chr \"<freq>\" #>  $ rtauargus.separator         : chr \",\" #>  $ rtauargus.show_batch_console: logi FALSE #>  $ rtauargus.tauargus_exe      : chr \"Y:/Logiciels/TauArgus/TauArgus.exe\" #>  $ rtauargus.totcode           : chr \"Total\" #>  $ rtauargus.weighted          : logi FALSE"},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":null,"dir":"Reference","previous_headings":"","what":"Mass protection — rtauargus_plus","title":"Mass protection — rtauargus_plus","text":"Optimization function link{rtauargus} large number crossovers (parameters).  (Optimisation de la fonction rtauargus pour un grand nombre de croisements (ayant tous les mêmes paramètres).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mass protection — rtauargus_plus","text":"","code":"rtauargus_plus(   grp_size = 5,   microdata,   explanatory_vars,   safety_rules,   suppress,   ... )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mass protection — rtauargus_plus","text":"grp_size number tables per Tau-Argus call (integer 1 10).  (nombre de tableaux par appel de Tau-Argus (un entier compris   entre 1 et 10).) microdata [required] data.frame containing microdata.  ([obligatoire] data.frame contenant les microdonnées.) explanatory_vars [required] categorical variables, form list vectors. element list vector variable names forming tab. Example: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) first table crossing CJ x A21 second table crossing SEXE x REGION. single tabulation, simple vector variables crossed accepted (need list(...)).  ([obligatoire] variables catégorielles, sous forme de liste de vecteurs. Chaque élément de la liste est un vecteur des noms des variables formant une tabulation. Exemple: list(c(\"CJ\", \"A21\"), c(\"SEX\", \"REGION\")) pour la première table croisant CJ x A21 et la seconde croisant SEXE x REGION Si une seule tabulation, un simple vecteur des variables à croiser est accepté (pas besoin de list(...)).) safety_rules [required] primary secret rule(s). String Tau-Argus batch syntax. weighting treated separate parameter (specify WGT , use weighted).  ([obligatoire] règle(s) de secret primaire. Chaîne de caractères en syntaxe batch Tau-Argus. La pondération est traitée dans un paramètre à part (ne pas spécifier WGT ici, utiliser le paramètre weighted).) suppress [required] secondary secret management method (Tau-Argus batch syntax). one method allowed tables. Example : \"GH(.,100)\" (dot playing role tabulation number).  [obligatoire] méthode de gestion du secret   secondaire (syntaxe batch de Tau-Argus). Une seule méthode autorisée pour   tous les tableaux. Exemple \"GH(.,100)\" (le point jouant le rôle du   numéro de tabulation). ... optional parameters micro_asc_rda, micro_arb run_arb. See help functions.  (paramètres optionnels pour micro_asc_rda, micro_arb    et run_arb. Voir l'aide de ces fonctions.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mass protection — rtauargus_plus","text":"list data.frames (secret arrays). (Une liste de data.frames (tableaux secrétisés).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mass protection — rtauargus_plus","text":"interactive mode, Tau-Argus can process 10 tabs simultaneously microdata set. batch mode, larger number crossings can specified. However, can particularly time consuming, Tau-Argus takes lot time read large text files microdata. rtauargus_plus helps improve speed execution. function splits list tabs groups size grp_size makes call rtauargus group. writes asc file restricted variables actually used within group. results aggregated single list, Tau-Argus called . Modifying grp_size change result, time execution time. value around 5 (default) seems good compromise reading large asc files calling Tau-Argus often. Tau-Argus much. can adjusted according number common variables within tab group. (En mode interactif, Tau-Argus peut traiter jusqu'à 10 tabulations simultanément pour un même jeu de microdonnées. En mode batch, un nombre plus important de croisements peut être spécifié. Cependant, procéder de la sorte peut être particulièrement long, car Tau-Argus prend beaucoup de temps pour lire des fichiers texte volumineux de microdonnées. rtauargus_plus permet d'améliorer la vitesse d'exécution. La fonction découpe la liste des tabulations en groupes de taille grp_size et effectue un appel à rtauargus pour chaque groupe. Elle écrit un fichier asc restreint aux seules variables effectivement utilisées au sein d'un groupe. Les résultats sont ensuite agrégés en une unique liste, comme si Tau-Argus n'avait été appelé qu'une seule fois. Modifier grp_size ne changera pas le résultat, seulement le temps d'exécution. Une valeur autour de 5 (défaut) semble être un bon compromis entre une lecture de fichiers asc trop volumineux et un nombre d'appels à Tau-Argus trop important. Elle peut être ajustée en fonction du nombre de variables communes à l'intérieur de chaque groupe de tabulations.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"limits-in-relation-to-the-function-rtauargus","dir":"Reference","previous_headings":"","what":"Limits in relation to the function rtauargus","title":"Mass protection — rtauargus_plus","text":"return speed execution, crossings must characteristics (primary secret rules, secondary secret method, secondary secret, weighting variable, etc.). parameters safety_rules, supress, ..., must therefore contain unique value. Moreover, possible specify asc_filename, rda_filename, arb_filename output_names retrieve intermediate files. files written temporary folder (overwritten new group). Therefore, specifying import = FALSE irrelevant ignored. data must data.frame (asc rda files allowed). linked option used, link effective within group tabs. (En contrepartie de la vitesse d'exécution, les croisements doivent avoir les mêmes caractéristiques (mêmes règles de secret primaire, même méthode de secret secondaire, même variable de pondération, etc.). Les paramètres safety_rules, supress, ..., doivent donc contenir une valeur unique. De plus, il n'est pas possible de spécifier asc_filename, rda_filename, arb_filename ou output_names pour récupérer les fichiers intermédiaires. Ces fichiers seront écrits dans un dossier temporaire (et écrasés à chaque nouveau groupe). Par conséquent, spécifier import = FALSE est sans objet et sera ignoré. Les données doivent obligatoirement être un data.frame (fichiers asc et rda pas autorisés). Si l'option linked est utilisée, la liaison ne sera effective qu'à l'intérieur de chaque groupe de tabulations.)","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/rtauargus_plus.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mass protection — rtauargus_plus","text":"","code":"if (FALSE) { # example of ?rtauargus, with an (artificial) repetition of the crossings rtauargus_plus(   grp_size         = 6, # (pour lancer les 12 croisements en 2 appels)   microdata        = data.frame(V1 = c(\"A\", \"A\", \"B\", \"C\", \"A\"), V2 = \"Z\"),   explanatory_vars = rep(list(\"V1\", \"V2\", c(\"V1\", \"V2\")), times = 4),   safety_rules     = \"FREQ(3,10)\",   suppress         = \"GH(.,100)\" )}"},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":null,"dir":"Reference","previous_headings":"","what":"Runs a Tau-Argus batch — run_arb","title":"Runs a Tau-Argus batch — run_arb","text":"Executes instructions contained .arb file Tau-Argus.  (Exécute les instructions contenues dans un fichier .arb pour Tau-Argus.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Runs a Tau-Argus batch — run_arb","text":"","code":"run_arb(   arb_filename,   is_tabular = getOption(\"rtauargus.is_tabular\"),   missing_dir = getOption(\"rtauargus.missing_dir\"),   tauargus_exe = getOption(\"rtauargus.tauargus_exe\"),   logbook = NULL,   show_batch_console = getOption(\"rtauargus.show_batch_console\"),   verbose = TRUE,   import = getOption(\"rtauargus.import\"),   ... )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Runs a Tau-Argus batch — run_arb","text":"arb_filename name batch file execute.  (nom du fichier batch à exécuter.) is_tabular boolean, data already tabulated  (booléen, si les données sont déja tabulées ou non) missing_dir folders results written results exist (\"stop\" trigger error, \"create\" create missing folders).  (action si les dossiers où seront écrits les   résultats n'existent pas (\"stop\" pour déclencher une erreur, \"create\" pour   créer les dossiers manquants).) tauargus_exe directory name Tau-Argus software.  (répertoire et nom du logiciel Tau-Argus.) logbook name file error log saved. NULL, \"logbook.txt\" file saved working directory).  (nom du fichier où est enregistré le journal d'erreurs. Si NULL, le fichier \"logbook.txt\" sera suavegardé sur le répertoire de travail.) show_batch_console display batch progress console.  (pour afficher le déroulement du batch dans la   console.) verbose boolean, display batch execution (TRUE) error messages (FALSE)  (booléen, pour afficher l'exécution du batch (si TRUE) ou uniquement les messages d'erreurs, s'il y en (si FALSE)) import import R files produced, TRUE default.  (pour importer dans R les fichiers produits, TRUE par   défaut.) ... additional parameters system().  (paramètres supplémentaires pour system().)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Runs a Tau-Argus batch — run_arb","text":"list data.frame containing results import = TRUE (via link{import} function) ; NULL otherwise.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Runs a Tau-Argus batch — run_arb","text":"argument arb_filename required, necessary information present file. function package runs Tau-Argus. therefore requires software accessible workstation. location TauArgus.exe program defined globally loading package. fact, argument tauargus_exe normally specified (except override global option time execution function). Checks made actual launching Tau-Argus: existence software computer, asc rda files, folders write results, variables used (crossings, response variable) response variable) metadata (rda file). (Seul l’argument arb_filename est obligatoire, car toutes les informations nécessaires sont présentes dans ce fichier. Il s'agit de la seule fonction du package qui exécute Tau-Argus. Elle nécessite donc que le logiciel soit accessible depuis le poste de travail. L'emplacement du programme TauArgus.exe est défini de manière globale au chargement du package. De fait, l'argument tauargus_exe n'aura normalement pas à être spécifié (sauf pour surcharger l'option globale le temps de l'exécution de la fonction). Des vérifications sont effectuées avant le lancement effectif de Tau-Argus : existence du logiciel sur le poste, des fichiers asc et rda, des dossiers où écrire les résultats, des variables à utiliser (croisements, variable de réponse) dans les métadonnées (fichier rda).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"see-also","dir":"Reference","previous_headings":"","what":"See also","title":"Runs a Tau-Argus batch — run_arb","text":"function rtauargus, uses function inherits parameters.  (La fonction rtauargus, qui utilise cette fonction et hérite de ses paramètres.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/run_arb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Runs a Tau-Argus batch — run_arb","text":"","code":"if (FALSE) {  micro_arb(\"my_batch.arb\") }"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"Function check asc rda files exists (Crée un fichier batch (.arb) pour données tabulées exécutable par Tau-Argus en ligne de commande. La fonction ne vérifie pas si les fichiers asc et rda existent.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"","code":"tab_arb(   arb_filename = NULL,   tab_filename,   rda_filename = NULL,   hst_filename = NULL,   explanatory_vars,   value = getOption(\"rtauargus.response_var\"),   safety_rules,   suppress,   output_names = NULL,   output_type = getOption(\"rtauargus.output_type\"),   output_options = getOption(\"rtauargus.output_options\"),   gointeractive = FALSE )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"arb_filename path arb filename, unspecified, creates temporary file  (nom du fichier arb généré (avec extension). Si non renseigné, un fichier temporaire.) tab_filename [mandatory] path tab_filename. ([obligatoire]nom du fichier .tab (avec extension).) rda_filename rda file name (.rda extension)  nom du fichier rda (avec extension) hst_filename Apriori file name, syntax detailed , Example : hst_filename = \"path_to_file/apriori.hst\" (fichier(s) d'informations priori. Voir ci-dessous pour la syntaxe. Exemple : hst_filename = \"path_to_file/apriori.hst\") explanatory_vars [mandatory] Explanatory vars vector Example : c(\"CJ\", \"A21\") tabular CJ x A21  ([obligatoire] variables catégorielles, sous forme de vecteur. Exemple : c(\"CJ\", \"A21\") pour le premier Pour un tableau croisant CJ x A21) value Colname response variable tabular \"<freq>\". frequency table  (Nom de la variable de réponse dans le tableau \"<freq>\". Permet de tariter les tableaux de fréquence) safety_rules [mandatory] Rules primary suppression Argus syntax, primary suppression dealt apriori file specify manual safety range :\"MAN(10)\" example. ([obligatoire] Règle(s) de secret primaire. Chaîne de caractères en syntaxe batch Tau-Argus. Si le secret primaire été traité dans un fichier d'apriori : utiliser \"MAN(10)\") suppress [mandatory] Algortihm secondary suppression (Tau-Argus batch syntax), parameters . ([obligatoire] Algorithme de gestion du secret secondaire (syntaxe batch de Tau-Argus), ainsi que les potentiels paramètres associés) output_names output file name (nom du fichier en sortie.) output_type Type output file (Argus codification) default \"2\" (csv pivot-table). SBS files use \"4\" (Format des fichiers en sortie (codification Tau-Argus). Valeur par défaut du package : \"2\" (csv pivot-table). Pour le format SBS utiliser \"4\") output_options Additionnal parameter output, default : code\"+\" (print Status). specify options : \"\". (Options supplémentaires des fichiers en sortie. Valeur   par défaut du package : \"+\" (affichage du statut). Pour ne   spécifier aucune option, \"\".) gointeractive Boolean, TRUE open Tau-Argus window launch batch (FALSE default).  (Possibilité de lancer le batch depuis le menu de Tau-Argus  (FALSE par défaut).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"list containing two elements :  arb file name output name (usefull name generated randomly) (Une liste de deux éléments : le nom du fichier arb, le nom   fichiers en sortie (utile pour récupérer les noms générés aléatoirement).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"syntaxe","dir":"Reference","previous_headings":"","what":"Syntaxe","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"tabular data, function secures one table time#' Unless specific details, use syntax Tau-Argus manual  Sauf mention contraire, utiliser la syntaxe mentionnée dans la documentation de Tau-Argus. Syntax pour suppress : First parameter table number, case always 1 (Pour les données tabulées la fonction traite un tableau à la fois Syntaxe spéciale pour suppress : le premier paramètre dans la syntaxe Tau-Argus est le numéro du tableau. Dans le cas de cette fonction ce sera toujours 1)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"informations-hst-filename","dir":"Reference","previous_headings":"","what":"Informations hst_filename","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"possible add apriori file (.hst) tabular, can generated table_rda() function. options mandatory. modify default value use vector .hst file path first element complete parameters : sep separator, ignore_err IgnoreError exp_triv ExpandTrivial. (Il est possible de fournir un fichier apriori (.hst) pour un tableau, il peut être fourni par la fonction table_rda() Exemple : hst_filename = \"mon_chemin/apriori.hst\" Les options supplémentaires sont facultatives. Pour modifier les valeurs par défaut, passer une liste ayant comme premier élément le(s) fichier(s) hst et compléter avec les éléments portant les noms sep pour le séparateur, ignore_err pour IgnoreError et exp_triv pour ExpandTrivial. Comme pour les noms de fichiers, spécifier une seule valeur par paramètre ou autant de valeurs que de tabulations.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_arb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a batch file (.arb) for tabular data in order to run Tau Argus — tab_arb","text":"","code":"if (FALSE) { # creating arb file infos_arb <- tab_arb(   arb_filename = \"path/tab1.arb\",   tab_filename = \"path/tab1.tab\",   rda_filename = \"path/tab1.rda\",   explanatory_vars = c(\"REGION\", \"CJ\"),   value = \"CA\",   safety_rules = \"NK(1,85)|FREQ(3,10)\",   suppress = \"GH(1,100)\",   output_names = \"path/tab1.csv\",   output_options = \"AS+SE+\",   output_type = \"4\" ) # show the content of the file in console # visualisation du contenu du fichier dans la console file.show(infos_arb$arb_filename, pager = \"console\") }"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_multi_manager.html","id":null,"dir":"Reference","previous_headings":"","what":"Manages the secondary secret of a list of tables — tab_multi_manager","title":"Manages the secondary secret of a list of tables — tab_multi_manager","text":"Manages secondary secret list tables","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_multi_manager.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Manages the secondary secret of a list of tables — tab_multi_manager","text":"","code":"tab_multi_manager(   list_tables,   list_explanatory_vars,   dir_name = NULL,   hrc = NULL,   alt_hrc = NULL,   totcode = getOption(\"rtauargus.totcode\"),   alt_totcode = NULL,   value = \"value\",   freq = \"freq\",   secret_var = \"is_secret_prim\",   cost_var = NULL,   suppress = \"MOD(1,5,1,0,0)\",   ip_start = 10,   ip_end = 0,   num_iter_max = 10,   ... )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_multi_manager.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Manages the secondary secret of a list of tables — tab_multi_manager","text":"list_tables named list dataframes representing tables protect list_explanatory_vars named list character vectors explanatory variables table mentionned list_tables. Names list list tables. dir_name string indicated path directory save files (.rda, .hst, .txt, .arb, .csv) generated function. hrc Informations hierarchical variables (see section 'Hierarchical variables').  (Informations sur les variables hiérarchiques (voir section 'Hierarchical variables').) alt_hrc named list alternative hierarchies (useful non nested-hierarchies) totcode Code(s) represent total categorical variable (see section 'Specific parameters' parameter's syntax). unspecified variable(neither default explicitly) set  rtauargus.totcode.  (Code(s) pour le total d'une variable catégorielle (voir section 'Specific parameters' pour la syntaxe de ce paramètre). Les variables non spécifiées (ni par défaut, ni explicitement) se verront attribuer la valeur de rtauargus.totcode.) alt_totcode named list alternative codes value Name column containing value cells.  (Nom de la colonne contenant la valeur des cellules) freq Name column containing cell frequency.  (Nom de la colonne contenant les effectifs pour une cellule) secret_var Boolean variable give primary secret : equal \"TRUE\" cell concerned primary secret,\"FALSE\" otherwise.  exported apriori file  (Variable indiquant le secret primaire de type booléen: prend la valeur \"TRUE\" quand les cellules du tableau doivent être masquées par le secret primaire, \"FALSE\" sinon. Permet de créer un fichier d'apriori) cost_var Numeric variable allow change cost suppression cell secondary suppression, value cell default, can specified cell, fill NA cost need changed cells  (Variable numeric qui permet de changer la coût de suppression d'une cellule, pris en compte dans les algorithmes de secret secondaire.Par défaut le coût correspond à la valeur de la cellule.  peut être spécifié pour chacune des cellules, peut contenir des NA pour les coûts que l'ne souhaite pas modifier.) suppress [mandatory] Algortihm secondary suppression (Tau-Argus batch syntax), parameters . ([obligatoire] Algorithme de gestion du secret secondaire (syntaxe batch de Tau-Argus), ainsi que les potentiels paramètres associés) ip_start integer: Interval protection level apply first treatment table ip_end integer: Interval protection level apply treatments num_iter_max integer: Maximum treatments table (default 10) ... arguments tab_rtauargus2()","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_multi_manager.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Manages the secondary secret of a list of tables — tab_multi_manager","text":"original list tables. Secret Results iteration added table. example, result first iteration called 'is_secret_1' table. boolean variable, whether cell masked .","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_multi_manager.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Manages the secondary secret of a list of tables — tab_multi_manager","text":"","code":"library(rtauargus) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union data(turnover_act_size) data(turnover_act_cj) data(activity_corr_table)  #0-Making hrc file of business sectors ---- hrc_file_activity <- activity_corr_table %>%   write_hrc2(file_name = \"hrc/activity\")  #1-Prepare data ---- #Indicate whether each cell complies with the primary rules #Boolean variable created is TRUE if the cell doesn't comply. #Here the frequency rule is freq in (0;3) #and the dominance rule is NK(1,85) list_data_2_tabs <- list(   act_size = turnover_act_size,   act_cj = turnover_act_cj ) %>% purrr::map(   function(df){     df %>%       mutate(         is_secret_freq = N_OBS > 0 & N_OBS < 3,         is_secret_dom = ifelse(MAX == 0, FALSE, MAX/TOT>0.85),         is_secret_prim = is_secret_freq | is_secret_dom       )   } ) if (FALSE) { options(   rtauargus.tauargus_exe =     \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" ) res_1 <- tab_multi_manager(   list_tables = list_data_2_tabs,   list_explanatory_vars = list(     act_size = c(\"ACTIVITY\", \"SIZE\"),     act_cj = c(\"ACTIVITY\", \"CJ\")   ),   hrc = c(ACTIVITY = hrc_file_activity),   dir_name = \"tauargus_files\",   value = \"TOT\",   freq = \"N_OBS\",   secret_var = \"is_secret_prim\",   totcode =  \"Total\" ) }"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates rda files from tabular data — tab_rda","title":"Creates rda files from tabular data — tab_rda","text":"Creates apriori file primary secret, tabular file (tab) metadata file (rda) tabulated data additional information.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates rda files from tabular data — tab_rda","text":"","code":"tab_rda(   tabular,   tab_filename = NULL,   rda_filename = NULL,   hst_filename = NULL,   explanatory_vars = NULL,   secret_var = NULL,   cost_var = NULL,   decimals = getOption(\"rtauargus.decimals\"),   hrc = NULL,   hierleadstring = getOption(\"rtauargus.hierleadstring\"),   totcode = getOption(\"rtauargus.totcode\"),   codelist = NULL,   value = NULL,   freq = NULL,   maxscore = NULL,   maxscore_2 = NULL,   maxscore_3 = NULL,   separator = getOption(\"rtauargus.separator\") )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates rda files from tabular data — tab_rda","text":"tabular [mandatory] data.frame contains tabulated data additional boolean variable indicates primary secret type boolean  ([obligatoire] data.frame contenant les données tabulées et une variable supplémentaire indiquant le secret primaire de type booléen.) tab_filename tab file name (.tab extension)  nom du fichier tab (avec extension .tab) rda_filename rda file name (.rda extension)  nom du fichier rda (avec extension) hst_filename hst file name (.hst extension)  nom du fichier hst (avec extension) explanatory_vars [mandatory] Vector explanatory variables  [obligatoire] Variables catégorielles, sous forme  de vecteurs  Example : c(\"A21\", \"TREFF\", \"REG\") table crossing A21 x TREFF x REG secret_var Boolean variable give primary secret : equal \"TRUE\" cell concerned primary secret,\"FALSE\" otherwise.  exported apriori file  (Variable indiquant le secret primaire de type booléen: prend la valeur \"TRUE\" quand les cellules du tableau doivent être masquées par le secret primaire, \"FALSE\" sinon. Permet de créer un fichier d'apriori) cost_var Numeric variable allow change cost suppression cell secondary suppression, value cell default, can specified cell, fill NA cost need changed cells  (Variable numeric qui permet de changer la coût de suppression d'une cellule, pris en compte dans les algorithmes de secret secondaire.Par défaut le coût correspond à la valeur de la cellule.  peut être spécifié pour chacune des cellules, peut contenir des NA pour les coûts que l'ne souhaite pas modifier.) decimals Minimum number decimals display (see section 'Number decimals')  (nombre minimal de décimales à afficher (voir section 'Number decimals').) hrc Informations hierarchical variables (see section 'Hierarchical variables').  (Informations sur les variables hiérarchiques (voir section 'Hierarchical variables').) hierleadstring character used indicate depth code hierarchy.  (Caractère qui, répété n fois, indique que la valeur est à n niveaux de profondeur dans la hiérarchie.) totcode Code(s) represent total categorical variable (see section 'Specific parameters' parameter's syntax). unspecified variable(neither default explicitly) set  rtauargus.totcode.  (Code(s) pour le total d'une variable catégorielle (voir section 'Specific parameters' pour la syntaxe de ce paramètre). Les variables non spécifiées (ni par défaut, ni explicitement) se verront attribuer la valeur de rtauargus.totcode.) codelist file(s) containing labels categorical variables (see section 'Specific parameters' syntax parameter).  (Fichier(s) contenant les libellés des variables catégorielles (voir section 'Specific parameters' pour la syntaxe de ce paramètre).) value Name column containing value cells.  (Nom de la colonne contenant la valeur des cellules) freq Name column containing cell frequency.  (Nom de la colonne contenant les effectifs pour une cellule) maxscore Name column containing, value largest contributor cell.  (Nom de la colonne contenant la valeur du plus gros contributeur d'une cellule) maxscore_2 Name column containing, value second largest contributor cell.  (Nom de la colonne contenant la valeur du deuxième plus gros contributeur d'une cellule) maxscore_3 Name column containing, value third largest contributor cell.  (Nom de la colonne contenant la valeur du troisième plus gros contributeur d'une cellule) separator Character used separator .tab file.  (Caractère utilisé en tant que separateur dans le fichier .tab)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates rda files from tabular data — tab_rda","text":"Return rda file name list (invisible). (Renvoie le nom du fichier rda sous forme de liste (de manière invisible).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates rda files from tabular data — tab_rda","text":"Crée un fichier d'apriori pour le secret primaire, un fichier tabular (tab) et un fichier de métadonnées (rda) à partir de données tabulées et d'informations additionnelles.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"apriori-file-","dir":"Reference","previous_headings":"","what":"Apriori file","title":"Creates rda files from tabular data — tab_rda","text":"apriori file (.hst) summarizes value table concerned primary secret . file tau-argus need set primary secret . parameter secret_var indicates name primary secret variable. additional boolean variable indicates primary secret table (tabulated data), function tab_rda create apriori file format conforming tauargus. Le fichier d'apriori (.hst) récapitule pour chaque valeurs du tableau si elles sont concernées par le secret primaire ou non. Avec ce fichier tau-argus n'aura plus besoin de poser le secret primaire lui même, il se basera sur le fichier d'apriori pour le faire. Le paramètre secret_var indique le nom de la variable du secret primaire. Si l'rajoute cette variable supplémentaire indiquant le secret primaire (de type booléen) au tableau de données tabulées, la fonction tab_rda permet de créer un fichier d'apriori au format conforme pour tauargus.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"specific-parameters","dir":"Reference","previous_headings":"","what":"Specific parameters","title":"Creates rda files from tabular data — tab_rda","text":"parameters totcode, codelist must given form vector indicating value take variable. names elements vector give variable concerned elements vector give value parameter Tau-Argus. unnamed element set default value variable. (Les paramètres totcode,  et codelist sont à renseigner sous la forme d'un vecteur indiquant la valeur à prendre pour chaque variable. Les noms des éléments du vecteur donnent la variable concernée, les éléments du vecteur donnent la valeur du paramètre pour Tau-Argus. Un élément non nommé constituera la valeur par défaut, qui sera attribuée à toutes les variables pouvant prendre ce paramètre.) example : totcode = \"global\" : writes <TOTCODE> \"global\"   explanatory vars totcode = c(\"global\", size=\"total\", income=\"total\") :   <TOTCODE> \"global\" variable except size   income assigned <TOTCODE> \"total\"   default : <TOTCODE> \"Total\" totcode = \"global\" : écrit <TOTCODE> \"global\" pour     toutes les variables catégorielles totcode = c(\"global\", size=\"total\", income=\"total\") :   <TOTCODE> \"global\" pour toutes les variables catégorielles   sauf  size income qui se verront affecter   le total : <TOTCODE> \"total\"   Par defaut : <TOTCODE> \"Total\"","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"hierarchical-variables","dir":"Reference","previous_headings":"","what":"Hierarchical variables","title":"Creates rda files from tabular data — tab_rda","text":"Parameter hrc syntax totcode codelist (named vector containing many elements variables describe). Hierarchy defined separate hrc file (hiercodelist). can written function link{write_hrc2}. function expects location file (possible hierleadstring differs default option package : @. path existing file explicitly given. elements vector parameter must named (name variable), even one element. emphExample :c(category=\"category.hrc\") (Le paramètre hrc obéit aux mêmes règles de syntaxe que totcode  et codelist (vecteur nommé contenant autant d'éléments que de variables à décrire). La hiérarchie est définie dans un fichier hrc à part (hiercodelist) qui peut être écrit à l'aide de la fonction write_hrc2. La fonction attend l'emplacement de ce fichier (et un éventuel hierleadstring s'il diffère de l'option par défaut du package). Le chemin vers le fichier existant est explicitement donné. Les éléments du vecteur en paramètre doivent nommés (avec le nom de la variable), même s'il n'y qu'un seul élément. Exemple :c(category=\"category.hrc\"))","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rda.html","id":"number-of-decimals","dir":"Reference","previous_headings":"","what":"Number of decimals","title":"Creates rda files from tabular data — tab_rda","text":"Parameter decimals indicates minimum number decimal places include output file (whatever number decimals actually present tabular). applies real variables (double) integer variables. add zeros integer variable, convert .double beforehand. (Le paramètre decimals indique le nombre minimal de décimales à faire figurer dans le fichier en sortie (quel que soit le nombre de décimales effectivement présent dans tabular). Il s'applique à toutes les variables réelles (double) mais pas aux variables entières (integer). Pour ajouter des zéros à une variable entière, la convertir avec .double au préalable.)","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":null,"dir":"Reference","previous_headings":"","what":"All in once for tabular — tab_rtauargus","title":"All in once for tabular — tab_rtauargus","text":"tabular","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"All in once for tabular — tab_rtauargus","text":"","code":"tab_rtauargus(   tabular,   files_name = NULL,   dir_name = NULL,   explanatory_vars,   totcode = getOption(\"rtauargus.totcode\"),   hrc = NULL,   secret_var = NULL,   cost_var = NULL,   value = \"value\",   freq = \"freq\",   maxscore = NULL,   safety_rules = \"MAN(10)\",   suppress = \"MOD(1,5,1,0,0)\",   show_batch_console = FALSE,   output_type = 4,   output_options = \"\",   unif_labels = TRUE,   ... )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"All in once for tabular — tab_rtauargus","text":"tabular [mandatory] data.frame contains tabulated data additional boolean variable indicates primary secret type boolean  ([obligatoire] data.frame contenant les données tabulées et une variable supplémentaire indiquant le secret primaire de type booléen.) files_name string used name files needed process. files name, extension different. dir_name string indicated path directory save files (.rda, .hst, .txt, .arb, .csv) generated function. explanatory_vars [mandatory] Vector explanatory variables  [obligatoire] Variables catégorielles, sous forme  de vecteurs  Example : c(\"A21\", \"TREFF\", \"REG\") table crossing A21 x TREFF x REG totcode Code(s) represent total categorical variable (see section 'Specific parameters' parameter's syntax). unspecified variable(neither default explicitly) set  rtauargus.totcode.  (Code(s) pour le total d'une variable catégorielle (voir section 'Specific parameters' pour la syntaxe de ce paramètre). Les variables non spécifiées (ni par défaut, ni explicitement) se verront attribuer la valeur de rtauargus.totcode.) hrc Informations hierarchical variables (see section 'Hierarchical variables').  (Informations sur les variables hiérarchiques (voir section 'Hierarchical variables').) secret_var Boolean variable give primary secret : equal \"TRUE\" cell concerned primary secret,\"FALSE\" otherwise.  exported apriori file  (Variable indiquant le secret primaire de type booléen: prend la valeur \"TRUE\" quand les cellules du tableau doivent être masquées par le secret primaire, \"FALSE\" sinon. Permet de créer un fichier d'apriori) cost_var Numeric variable allow change cost suppression cell secondary suppression, value cell default, can specified cell, fill NA cost need changed cells  (Variable numeric qui permet de changer la coût de suppression d'une cellule, pris en compte dans les algorithmes de secret secondaire.Par défaut le coût correspond à la valeur de la cellule.  peut être spécifié pour chacune des cellules, peut contenir des NA pour les coûts que l'ne souhaite pas modifier.) value Name column containing value cells.  (Nom de la colonne contenant la valeur des cellules) freq Name column containing cell frequency.  (Nom de la colonne contenant les effectifs pour une cellule) maxscore Name column containing, value largest contributor cell.  (Nom de la colonne contenant la valeur du plus gros contributeur d'une cellule) safety_rules [mandatory] Rules primary suppression Argus syntax, primary suppression dealt apriori file specify manual safety range :\"MAN(10)\" example. ([obligatoire] Règle(s) de secret primaire. Chaîne de caractères en syntaxe batch Tau-Argus. Si le secret primaire été traité dans un fichier d'apriori : utiliser \"MAN(10)\") suppress [mandatory] Algortihm secondary suppression (Tau-Argus batch syntax), parameters . ([obligatoire] Algorithme de gestion du secret secondaire (syntaxe batch de Tau-Argus), ainsi que les potentiels paramètres associés) show_batch_console display batch progress console.  (pour afficher le déroulement du batch dans la   console.) output_type Type output file (Argus codification) default \"2\" (csv pivot-table). SBS files use \"4\" (Format des fichiers en sortie (codification Tau-Argus). Valeur par défaut du package : \"2\" (csv pivot-table). Pour le format SBS utiliser \"4\") output_options Additionnal parameter output, default : code\"+\" (print Status). specify options : \"\". (Options supplémentaires des fichiers en sortie. Valeur   par défaut du package : \"+\" (affichage du statut). Pour ne   spécifier aucune option, \"\".) unif_labels boolean, explanatory variables standardized ... parameter tab_rda, tab_arb run_arb functions, relevant treatment tabular.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"All in once for tabular — tab_rtauargus","text":"output_type equals 4, original tabular returned new column called Status, indicating status cell coming Tau-Argus : \"\" primary secret due frequency rule, \"B\" primary secret due dominance rule, \"D\" secondary secret \"V\" secret cell. output_type equal 4, raw result tau-argus returned.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":"standardization-of-explanatory-variables-and-hierarchies","dir":"Reference","previous_headings":"","what":"Standardization of explanatory variables and hierarchies","title":"All in once for tabular — tab_rtauargus","text":"boolean argument unif_labels useful prevent common errors using Tau-Argus. Indeed, Tau-Argus needs , within level hierarchy, labels number characters. argument set TRUE, tab_rtauargus standardizes explanatory variables prevent issue. Hierarchical explanatory variables (explanatory variables associated hrc file) modified tabular data another hrc file created relevant tabular. output, modifications removed.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"All in once for tabular — tab_rtauargus","text":"","code":"if (FALSE) { library(dplyr) data(turnover_act_size)  # Prepare data with primary secret ---- turnover_act_size <- turnover_act_size %>%   mutate(     is_secret_freq = N_OBS > 0 & N_OBS < 3,     is_secret_dom = ifelse(MAX == 0, FALSE, MAX/TOT>0.85),     is_secret_prim = is_secret_freq | is_secret_dom   )  # Make hrc file of business sectors ---- data(activity_corr_table) hrc_file_activity <- activity_corr_table %>%   write_hrc2(file_name = \"hrc/activity\")  # Compute the secondary secret ---- options(   rtauargus.tauargus_exe =     \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" )  res <- tab_rtauargus(   tabular = turnover_act_size,   files_name = \"turn_act_size\",   dir_name = \"tauargus_files\",   explanatory_vars = c(\"ACTIVITY\", \"SIZE\"),   hrc = c(ACTIVITY = hrc_file_activity),   totcode = c(ACTIVITY = \"Total\", SIZE = \"Total\"),   secret_var = \"is_secret_prim\",   value = \"TOT\",   freq = \"N_OBS\",   verbose = FALSE ) }"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus2.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","title":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","text":"Wrapper tab_rtauargus adapted tab_multi_manager function.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","text":"","code":"tab_rtauargus2(   tabular,   files_name = NULL,   dir_name = NULL,   explanatory_vars,   totcode,   hrc = NULL,   secret_var = NULL,   cost_var = NULL,   value = \"value\",   freq = \"freq\",   ip = 10,   suppress = \"MOD(1,5,1,0,0)\",   ... )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","text":"tabular [mandatory] data.frame contains tabulated data additional boolean variable indicates primary secret type boolean  ([obligatoire] data.frame contenant les données tabulées et une variable supplémentaire indiquant le secret primaire de type booléen.) files_name string used name files needed process. files name, extension different. dir_name string indicated path directory save files (.rda, .hst, .txt, .arb, .csv) generated function. explanatory_vars [mandatory] Vector explanatory variables  [obligatoire] Variables catégorielles, sous forme  de vecteurs  Example : c(\"A21\", \"TREFF\", \"REG\") table crossing A21 x TREFF x REG totcode Code(s) represent total categorical variable (see section 'Specific parameters' parameter's syntax). unspecified variable(neither default explicitly) set  rtauargus.totcode.  (Code(s) pour le total d'une variable catégorielle (voir section 'Specific parameters' pour la syntaxe de ce paramètre). Les variables non spécifiées (ni par défaut, ni explicitement) se verront attribuer la valeur de rtauargus.totcode.) hrc Informations hierarchical variables (see section 'Hierarchical variables').  (Informations sur les variables hiérarchiques (voir section 'Hierarchical variables').) secret_var Boolean variable give primary secret : equal \"TRUE\" cell concerned primary secret,\"FALSE\" otherwise.  exported apriori file  (Variable indiquant le secret primaire de type booléen: prend la valeur \"TRUE\" quand les cellules du tableau doivent être masquées par le secret primaire, \"FALSE\" sinon. Permet de créer un fichier d'apriori) cost_var Numeric variable allow change cost suppression cell secondary suppression, value cell default, can specified cell, fill NA cost need changed cells  (Variable numeric qui permet de changer la coût de suppression d'une cellule, pris en compte dans les algorithmes de secret secondaire.Par défaut le coût correspond à la valeur de la cellule.  peut être spécifié pour chacune des cellules, peut contenir des NA pour les coûts que l'ne souhaite pas modifier.) value Name column containing value cells.  (Nom de la colonne contenant la valeur des cellules) freq Name column containing cell frequency.  (Nom de la colonne contenant les effectifs pour une cellule) ip Interval Protection Level (10 default) suppress [mandatory] Algortihm secondary suppression (Tau-Argus batch syntax), parameters . ([obligatoire] Algorithme de gestion du secret secondaire (syntaxe batch de Tau-Argus), ainsi que les potentiels paramètres associés) ... arguments tab_rtauargus function","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","text":"original tabular returned new column called Status, indicating status cell coming Tau-Argus : \"\" primary secret due frequency rule, \"B\" primary secret due dominance rule, \"D\" secondary secret \"V\" secret cell.","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/tab_rtauargus2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wrapper of tab_rtauargus adapted for tab_multi_manager function. — tab_rtauargus2","text":"","code":"if (FALSE) { library(dplyr) data(turnover_act_size)  # Prepare data with primary secret ---- turnover_act_size <- turnover_act_size %>%   mutate(     is_secret_freq = N_OBS > 0 & N_OBS < 3,     is_secret_dom = ifelse(MAX == 0, FALSE, MAX/TOT>0.85),     is_secret_prim = is_secret_freq | is_secret_dom   )  # Make hrc file of business sectors ---- data(activity_corr_table) hrc_file_activity <- activity_corr_table %>%   write_hrc2(file_name = \"hrc/activity\")  # Compute the secondary secret ---- options(   rtauargus.tauargus_exe =     \"Y:/Logiciels/TauArgus/TauArgus4.2.2b1/TauArgus.exe\" )  res <- tab_rtauargus2(   tabular = turnover_act_size,   files_name = \"turn_act_size\",   dir_name = \"tauargus_files\",   explanatory_vars = c(\"ACTIVITY\", \"SIZE\"),   hrc = c(ACTIVITY = hrc_file_activity),   totcode = c(ACTIVITY = \"Total\", SIZE = \"Total\"),   secret_var = \"is_secret_prim\",   value = \"TOT\",   freq = \"N_OBS\" ) }"},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_cj.html","id":null,"dir":"Reference","previous_headings":"","what":"Turnover broken down by business sector and type of companies (fake values). — turnover_act_cj","title":"Turnover broken down by business sector and type of companies (fake values). — turnover_act_cj","text":"tabular dataset containing turnover broken Business sector Type companies. Useful playing tab_ functions.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_cj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Turnover broken down by business sector and type of companies (fake values). — turnover_act_cj","text":"","code":"turnover_act_cj"},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_cj.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Turnover broken down by business sector and type of companies (fake values). — turnover_act_cj","text":"tibble/data frame 406 rows 5 variables: ACTIVITY business sector, hierarchical variables three levels described   activity_corr_table dataset. root noted \"Total\" CJ Type companies (3 categories + overall category \"Total\") N_OBS Frequency, number companies TOT turnover MAX turnover company contributes cell.","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Turnover broken down by business sector and size of French companies (fake values). — turnover_act_size","title":"Turnover broken down by business sector and size of French companies (fake values). — turnover_act_size","text":"tabular dataset containing turnover broken Business sector sector Size companies. Useful playing tab_ functions.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Turnover broken down by business sector and size of French companies (fake values). — turnover_act_size","text":"","code":"turnover_act_size"},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_act_size.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Turnover broken down by business sector and size of French companies (fake values). — turnover_act_size","text":"tibble/data frame 414 rows 5 variables: ACTIVITY business sector, hierarchical variables three levels described   activity_corr_table dataset. root noted \"Total\" SIZE size companies (Number employees three categories   + overall category \"Total\") N_OBS Frequency, number companies TOT turnover value euros MAX turnover company contributes cell.","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_cj.html","id":null,"dir":"Reference","previous_headings":"","what":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_cj","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_cj","text":"tabular dataset containing turnover broken NUTS geographical localisation Type companies. Useful playing tab_ functions.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_cj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_cj","text":"","code":"turnover_nuts_cj"},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_cj.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_cj","text":"tibble/data frame 452 rows 5 variables: NUTS nuts - european denomination administrative levels.  Hierarchical variables two levels (nuts2 nuts3) described   nuts23_fr_corr_table dataset. root noted \"Total\" CJ Type companies (3 categories + overall category \"Total\") N_OBS Frequency, number companies TOT turnover value euros MAX turnover company contributes cell.","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_size","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_size","text":"tabular dataset containing turnover broken NUTS geographical localisation Size companies. Useful playing tab_ functions.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_size","text":"","code":"turnover_nuts_size"},{"path":"https://inseefrlab.github.io/rtauargus/reference/turnover_nuts_size.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Turnover broken down by NUTS and size of French companies (fake values). — turnover_nuts_size","text":"tibble/data frame 460 rows 5 variables: NUTS nuts - european denomination administrative levels.  Hierarchical variables two levels (nuts2 nuts3) described   nuts23_fr_corr_table dataset. root noted \"Total\" SIZE size companies (Number employees three categories   + overall category \"Total\") N_OBS Frequency, number companies TOT turnover value euros MAX turnover company contributes cell.","code":""},{"path":[]},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a hrc file from microdata — write_hrc","title":"Creates a hrc file from microdata — write_hrc","text":"Creates hrc file (hierarchy) several variables set microdata set. Crée un fichier hrc (hiérarchie) à partir de plusieurs variables d'un jeu de microdonnées.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a hrc file from microdata — write_hrc","text":"","code":"write_hrc(   microdata,   vars_hrc,   hierleadstring = getOption(\"rtauargus.hierleadstring\"),   hrc_filename = NULL,   fill_na = c(\"up\", \"down\"),   compact = TRUE,   hierlevels = NULL )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a hrc file from microdata — write_hrc","text":"microdata [required] data.frame containing microdata.  ([obligatoire] data.frame contenant les microdonnées.) vars_hrc [mandatory] vector variable names constituting hierarchy, finest aggregated level. ([obligatoire] vecteur des noms des variables   constituant la hiérarchie, du niveau le plus fin au niveau le plus agrégé.) hierleadstring character , repeated n times, indicates value n levels deep hierarchy.  (caractère qui, répété n fois, indique que la valeur est à n niveaux de profondeur dans la hiérarchie.) hrc_filename name location produced hrc file. filled, temporary file. (nom et emplacement du fichier hrc produit. Si non renseigné, un fichier temporaire.) fill_na fill missing values, using variable : \"\" (default) : hierarchical variable level level immediately \"\" : hierarchical variable level immediately lower (remplissage d'éventuelles valeurs manquantes, à l'aide d'une   autre variable : \"\" (défaut) : variable hiérarchique de niveau        immédiatement supérieur \"\" : variable hiérarchique de niveau immédiatement        inférieur ) compact prune branches repeating single value lowest level depth (TRUE default). (pour élaguer les branches répétant une unique valeur jusqu'au   plus bas niveau de profondeur (TRUE par défaut).) hierlevels one variable specified vars_hrc, allows generate hierarchy according position characters string. example, hierlevels = \"2 3\" build hierarchy common code. (si une seule variable est spécifiée dans vars_hrc,   permet de générer la hiérarchie selon la position des caractères dans la   chaîne. Par exemple, hierlevels = \"2 3\" pour construire une   hiérarchie département-commune à partir d'un code commune.)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a hrc file from microdata — write_hrc","text":"name hrc file (useful case temporary file random name). (Le nom du fichier hrc (utile dans le cas d'un fichier temporaire au   nom aléatoire).)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a hrc file from microdata — write_hrc","text":"function reconstructs variable hierarchy levels present data. variables vars_hrc must classified finest aggregated. relationship hierarchical level must application (mathematical sense term), .e. fine level must single corresponding aggregated level. creation hierarchy impossible condition met. name output file specified, temporary file created. deleted end session. path file can retrieved return value function. Missing values hierarchical variables imputed beforehand using another hierarchical variable (parameter fill_na). ascending strategy (\"\"), variables aggregated refined, vice versa downward strategy (\"\"). parameter compact allows create hierarchies variable depths. idea cut branches consisting single value repeated maximum depth (see examples). La fonction reconstitue la hiérarchie des variables à partir des niveaux présents dans les données. Les variables dans vars_hrc doivent être classées de la plus fine à la plus agrégée. La relation entre chaque niveau hiérarchique doit être une application (au sens mathématique du terme), c'est-à-dire que chaque niveau fin doit avoir un seul et unique niveau agrégé correspondant. La création de la hiérarchie est impossible si cette condition n'est pas remplie. Si le nom du fichier en sortie n'est pas spécifié, un fichier temporaire est créé. Il sera effacé en fin de session. Le chemin vers ce fichier peut être récupéré dans la valeur de retour de la fonction. Les valeurs manquantes présentes dans les variables hiérarchiques seront préalablement imputées à l'aide d'une autre variable hiérarchique (paramètre fill_na). En stratégie ascendante (\"\"), les variables sont parcourues de la plus agrégée à la plus fine, et inversement en stratégie descendante (\"\"). Le paramètre compact permet de créer des hiérarchies à profondeurs variables. L'idée est de couper les branches constituées d'une seule valeur répétée jusqu'à la profondeur maximale (voir exemples).","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a hrc file from microdata — write_hrc","text":"","code":"# Full Hierarchy ............................  df_naf <- data.frame(   A10 = c(\"AZ\", \"BE\", \"BE\", \"BE\", \"BE\", \"BE\", \"BE\"),   A21 = c(\"A\" , \"C\" , \"B\" , \"C\" , \"C\" , \"C\" , \"B\" ),   A88 = c(\"01\", \"10\", \"06\", \"10\", \"12\", \"11\", \"07\") )  tmp_file <- write_hrc(df_naf, c(\"A88\", \"A21\", \"A10\")) file.show(tmp_file, pager = \"console\") #> Warning: error in running command  tmp_file <- write_hrc(df_naf, c(\"A88\", \"A10\"), hierleadstring = \":\") file.show(tmp_file, pager = \"console\") #> Warning: error in running command  # Hierarchy with varying depth  ...............  df <- data.frame(   niv1 = c(\"A\"  , \"A\"  , \"A\"  , \"B\"  , \"C\"  , \"C\" ),   niv2 = c(\"A1\" , \"A1\" , \"A2\" ,  NA  , \"C1\" , \"C2\"),   niv3 = c(\"A1x\", \"A1y\",  NA  ,  NA  , \"C1\" ,  NA ) )  tmp_file <- write_hrc(df, c(\"niv3\", \"niv2\", \"niv1\")) #> Warning: valeurs manquantes imputees pour construire la hierarchie file.show(tmp_file, pager = \"console\") #> Warning: error in running command  tmp_file <- write_hrc(df, c(\"niv3\", \"niv2\", \"niv1\"), compact = FALSE) #> Warning: valeurs manquantes imputees pour construire la hierarchie file.show(tmp_file, pager = \"console\") #> Warning: error in running command"},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a hrc file from correspondence table — write_hrc2","title":"Creates a hrc file from correspondence table — write_hrc2","text":"Creates .hrc hierarchy correspondence table.  Ecrit une hiérarchie .hrc à partir d'une table de correspondance.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a hrc file from correspondence table — write_hrc2","text":"","code":"write_hrc2(   corr_table,   file_name = NULL,   sort_table = FALSE,   rev = FALSE,   hier_lead_string = getOption(\"rtauargus.hierleadstring\"),   adjust_unique_roots = FALSE,   add_char = \"ZZZ\" )"},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a hrc file from correspondence table — write_hrc2","text":"corr_table Data frame. Correspondence table, aggregated level detailed one  Table de correspondance, du niveau le plus agrégé au niveau le plus fin file_name character string. Name output file (.hrc extension ). NULL (default), file_name set name correspondence table  Nom du fichier en sortie (avec ou sans l'extension .hrc) ; Si NULL (par défaut), le nom du fichier sera identique au nom de la table de correspondance. sort_table boolean. TRUE, table sorted beforehand. (default FALSE) Si TRUE, la table sera triée avant traitement. (défaut à FALSE) rev boolean. TRUE, column order reversed. Si TRUE, inverse l'ordre des colonnes. hier_lead_string character. (Single) character indicating hierarchy depth .hrc file. default, value set current value mentionned package options (.e. \"@\" package startup).  Caractère unique repérant le niveau de profondeur dans le .hrc adjust_unique_roots boolean. TRUE add fictional roots correspondence table, unique roots hrc file. tabular function, unique roots handled Tau-Argus.  Si TRUE la fonction va ajouter des feuilles fictives au fichier .hrc afin qu'il n'y ait plus de feuilles uniques. Les feuilles uniques peuvent générer des problèmes dans l'exécution de Tau-Argus add_char character adjust_unique_roots TRUE add_char string used create fictional roots, sure string create duplicates.string paste beginning unique root  default = \"ZZZ\"  character Si adjust_unique_roots est TRUE add_char est l'élément qui sera utilisé afin de créer des feuilles fictives, il faut être sur que cela ne crée pas de doublons dans la hiérarchie.La chaine de caractère sera ajouté au début d'une feuille unique. Par defaut :\"ZZZ\"","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a hrc file from correspondence table — write_hrc2","text":"Invisible. Path written .hrc file. Chemin vers le fichier .hrc.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a hrc file from correspondence table — write_hrc2","text":"Creates .hrc hierarchy file adapted tau-Argus correspondence table fully describing . default, lines sorted alphabetically regroup identical levels. Ecrit un fichier de hiérarchie .hrc lisible par tau-Argus à partir d'une table de corrrespondance la décrivant complètement. Par défaut, les lignes du tableau seront triées afin de regrouper les niveaux de hiérarchie identiques.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"details-about-correspondence-table-amp-hrc","dir":"Reference","previous_headings":"","what":"Details about correspondence table & .hrc","title":"Creates a hrc file from correspondence table — write_hrc2","text":"Hierarchy files read tau-Argus expected follow strict pattern. function mimicks rigidities. 1 Ideal case correspondence table assumed look like: Columns must ordered aggregated detailed. reverse order, may want use rev = TRUE. case, please reorder columns hand. Hierarchy must well-nested : fine levels must systematically nested unique higher levels. compatible situation, split different hierarchies insure common cells correctly protected (seek documentation help needed). 2 Dealing NAs write_hrc2 function preferably used without NAs correspondence table. presence NAs, sort argument FALSE. Indeed, NAs sorted together , thus, separated expected place hierarchy. , introduce two common cases correspondence tables NAs. first one supported function, second one . Please careful dealing NAs check thoroughly resulting .hrc file, consider filling NAs beforehand. 2.1 Sparse hierarchies  Hierarchy sparse NAs inserted instead repeating given level. cases still issue warning presence NAs, pose problem, sort=FALSE set. 2.2 Non-uniform hierarchies Hierarchies non-uniform depth happen levels detailed  lowest detail, creating NAs. Processing file generate error following messages: Missing values last column correspondence table allowed. relevant, fill value previous column","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"d-tails-sur-les-tables-de-correspondance-et-le-hrc","dir":"Reference","previous_headings":"","what":"Détails sur les tables de correspondance et le .hrc","title":"Creates a hrc file from correspondence table — write_hrc2","text":"Tau-Argus attend des fichiers écrits avec précision. Certaines de ses rigidités sont reproduites par cette fonction. 1 Cas idéal Voici l'aspect général que devrait avoir une table de correspondance : Les colonnes doivent être ordonnées du niveau le plus agrégé au plus fin. Si elles sont en sens inverse, l'option rev = TRUE permet de les mettre en ordre. Dans toute autre situation, vous devrez d'abord les ordonner à la main. La hiérarchie doit être bien emboîtée : un niveau fin doit systématiquement correspondre à un unique niveau agrégé. Si cette exigence n'est pas remplie, il faudra créer plusieurs hiérarchies et faire en sorte que les cellules communes soient correctement protégées (au besoin, consultez la documentation ou chercher de l'aide). 2 Valeurs manquantes La fonction write_hrc2 doit être utilisée de préférence sans aucun NA dans votre table de correspondance. En présence de NAs, l'argument sort doit être à FALSE. En effet, les NAs seraient triés ensemble et, donc, être séparées de leur place attendue dans la hiérarchie. Ci-dessous, nous présentons deux cas courants où les tables de correspondance pourraient avoir NAs. Le premier cas est pris en charge par la fonction, le second ne l'est pas. Soyez prudent lorsque vous manipulez des NA et vérifiez soigneusement le fichier .hrc résultant ou envisagez de remplir les NAs à l'avance. 2.1 Hiérarchies creuses  Une hiérarchie est creuse si des NAs sont insérées au lieu de répéter un niveau donné verticalement. De tels cas émettent toujours un avertissement du fait de la présence de NA, mais ne posent aucun problème, si utilise sort=FALSE. 2.2 Hiérarchies non-uniformes Les hiérarchies à profondeur non-uniforme correspondent aux cas où certains niveaux ne sont pas détaillés jusqu'au bout, la fin de certaines lignes étant manquante. Le traitement d'un tel fichier générera une erreur avec les messages suivants : Missing values last column correspondence table allowed. relevant, fill value previous column","code":""},{"path":"https://inseefrlab.github.io/rtauargus/reference/write_hrc2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a hrc file from correspondence table — write_hrc2","text":"","code":"# 1. Standard example. Table will be written on your working directory. # Exemple standard. La table sera écrite dans votre répertoire de travail. astral <- data.frame(   type      = c(\"planet\", \"planet\", \"star\", \"star\", \"star\", \"other\", \"other\"),   details   = c(     \"telluric\", \"gasgiant\", \"bluestar\", \"whitedwarf\",     \"reddwarf\", \"blackhole\", \"pulsar\") ) path <- write_hrc2(astral) if (FALSE) read.table(path) # Note that line order was changed ('other' comes before 'planet'), to no # consequence whatsoever for Tau-Argus. # Remarque : l'ordre des lignes a été modifié ('other' arrive avant 'planet'), # ce qui n'a aucune conséquence pour Tau-Argus.  # Wrong column order: # Mauvais ordonnancement des colonnes : astral_inv <- data.frame(   details = c(     \"telluric\", \"gasgiant\", \"bluestar\", \"whitedwarf\",     \"reddwarf\", \"blackhole\", \"pulsar\"),     type = c(\"planet\", \"planet\", \"star\", \"star\", \"star\", \"other\", \"other\") ) path <- write_hrc2(astral_inv) #> Warning: There are duplicates in the expectedly most detailed level #>     (last column). Please be sure columns are rightfully ordered. if (FALSE) read.table(path) # Because of the inverted order, everything is written backwards : planet is a # subtype of gasgiant, etc. # À cause de l'inversion des colonnes, tout est écrit à l'envers : planet est # devenu une sous-catégorie de gasgiant, par exemple.  # Correction : path <- write_hrc2(astral_inv, rev = TRUE) if (FALSE) read.table(path)  # 2.1 Sparse case # Cas creux astral_sparse <- data.frame(   type      = c(\"planet\", NA, \"star\", NA, NA, \"other\", NA),   details   = c(     \"telluric\", \"gasgiant\", \"bluestar\", \"whitedwarf\",     \"reddwarf\", \"blackhole\", \"pulsar\") ) # NAs in general are risky, but, in this case, the function works well. # Les valeurs manquantes causent un risque, mais, dans ce genre de cas, # la fonction a le comportement attendu. path <- write_hrc2(astral_sparse) #> Warning: Missing values in correspondence table will be filled in (see documentation). #>             If unintended, this can cause errors when using the .hrc file with tau-Argus. if (FALSE) read.table(path)  # 2.2 Non-uniform depth # Hiérarchie non-uniforme astral_nu <- data.frame(   type      = c(\"planet\", \"planet\", \"star\", \"other\", \"other\"),   details  = c(\"telluric\", \"gasgiant\", NA, \"blackhole\", \"pulsar\") ) # The following code will generate an error # (see section Details about correspondence table & .hrc) if (FALSE) { path <- write_hrc2(astral_nu) } #To fix the issue, you have to fill in the NAs beforehand.  astral_nu_fill <- data.frame(   type      = c(\"planet\", \"planet\", \"star\", \"other\", \"other\"),   details  = c(\"telluric\", \"gasgiant\", \"star\", \"blackhole\", \"pulsar\") ) # The following code will work path <- write_hrc2(astral_nu_fill) if (FALSE) read.table(path)"},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-110","dir":"Changelog","previous_headings":"","what":"rtauargus 1.1.0","title":"rtauargus 1.1.0","text":"[01/10/2022] tab_multi_manager(): argument alt_hrc alt_totcode handle non-nested hierarchies.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-100","dir":"Changelog","previous_headings":"","what":"rtauargus 1.0.0","title":"rtauargus 1.0.0","text":"[01/09/2022] English documentation tab_multi_manager(): function protect several tables . tab_arb() : argument value now called response_var tab_rda() function. tab_arb() : argument apriori now called hst_filename tab_rda() function. write_hrc2() : new function creat hrc file correspondence table","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-050","dir":"Changelog","previous_headings":"","what":"rtauargus 0.5.0","title":"rtauargus 0.5.0","text":"[18/04/2022] Ajout de fonctions pour gérer le secret directement sur des données tabulées. Addition functions manage confidentiality directly tabular data.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-043","dir":"Changelog","previous_headings":"","what":"rtauargus 0.4.3","title":"rtauargus 0.4.3","text":"[13/10/2021] projet transféré dans le groupe outilsconfidentialite","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-042","dir":"Changelog","previous_headings":"","what":"rtauargus 0.4.2","title":"rtauargus 0.4.2","text":"[17/12/2020] projet migré vers gitlab.insee.fr","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-041","dir":"Changelog","previous_headings":"","what":"rtauargus 0.4.1","title":"rtauargus 0.4.1","text":"[18/10/2019] rtauargus_plus() : extension de la fonction rtauargus pour un grand nombre de croisements (ayant tous les mêmes caractéristiques). Réduit le temps d’exécution par rapport à la version “normale”.","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-040","dir":"Changelog","previous_headings":"","what":"rtauargus 0.4.0","title":"rtauargus 0.4.0","text":"[04/09/2019] rtauargus() peut désormais prendre en entrée un couple de fichiers asc et rda (au lieu d’un data.frame). Permet de lancer un traitement dans le cas où ces fichiers texte de microdonnées existent déjà. nouveau nom de run_tauargus (nom plus explicite, principalement pour éviter la confusion avec la fonction rtauargus). L’ancien nom reste pour l’instant utilisable : un message avertit du changement. Il sera remplacé par un message d’erreur dans une prochaine version. existence du logiciel sur le poste ; existence des fichiers asc et rda ; présence des variables à utiliser (croisements, variable de réponse, …) dans les métadonnées (fichier rda) ; existence des dossiers où vont être écrits les résultats. Si absents, possibilité de les créer automatiquement (paramètre missing_dir avec option associée rtauargus.missing_dir). import() : si des fichiers apriori ont été utilisés, stockage du nom de ces fichiers dans les métadonnées (attributs) de l’objet R créé améliorations de la documentation (rubriques d’aide et vignette)","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-031","dir":"Changelog","previous_headings":"","what":"rtauargus 0.3.1","title":"rtauargus 0.3.1","text":"[11/07/2019] informe de l’absence de tauargus.exe au chargement du package diverses améliorations de la documentation (rubriques d’aide et vignette) utilise valeurs par défaut des options en cas d’effacement accidentel par l’utilisateur","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-030","dir":"Changelog","previous_headings":"","what":"rtauargus 0.3.0","title":"rtauargus 0.3.0","text":"[29/03/2019] ajoute paramètre apriori (fichiers hst) conserve les noms de tabulations en sortie si précisés dans explanatory_vars vérification plus rigoureuse de certains paramètres","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-021","dir":"Changelog","previous_headings":"","what":"rtauargus 0.2.1","title":"rtauargus 0.2.1","text":"[03/12/2018] write_hrc() : prise en compte de davantage de cas particuliers améliore vignette","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-020","dir":"Changelog","previous_headings":"","what":"rtauargus 0.2.0","title":"rtauargus 0.2.0","text":"[14/08/2018] implémente tableaux liés (paramètre linked) corrige extensions de fichiers pour \"5\" (.tab) et \"6\" (.jj) corrige bug quand un seul paramètre à suppress, par exemple MOD(1) write_hrc() : nouvelle fonction créant un fichier .hrc à partir de variables hiérarchiques présentes dans les microdonnées implémente paramètres missing, totcode et codelist simplifie syntaxe pour paramètre hrc (cohérente avec nouveaux paramètres) nouveau paramètre hierleadstring (valeur par défaut dans l’option de package rtauargus.hierleadstring) efface les options du package à son déchargement corrections diverses documentation","code":""},{"path":"https://inseefrlab.github.io/rtauargus/news/index.html","id":"rtauargus-010","dir":"Changelog","previous_headings":"","what":"rtauargus 0.1.0","title":"rtauargus 0.1.0","text":"[01/08/2018] Première version stable.","code":""}]
